"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[179],{2011:(ot,Te,P)=>{P.d(Te,{hO:()=>Ge,xv:()=>ue,Dh:()=>de,GT:()=>pe,cc:()=>Ae,on:()=>j,pX:()=>X});var m=P(5e3),Y=P(127),O=P(5813);ot=P.hmd(ot);const ae=["ngOnDestroy"],X=(we,Xe,We,De={})=>new Proxy(we,{get:(_e,Ee)=>We.runOutsideAngular(()=>{var He;if(we[Ee])return(null===(He=null==De?void 0:De.spy)||void 0===He?void 0:He.get)&&De.spy.get(Ee,we[Ee]),we[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const $e=Xe.toPromise().then(te=>{const W=te&&te[Ee];return"function"==typeof W?W.bind(te):W&&W.then?W.then(ne=>We.run(()=>ne)):We.run(()=>W)});return new Proxy(()=>{},{get:(te,W)=>$e[W],apply:(te,W,ne)=>$e.then(ge=>{var ie;const Ne=ge&&ge(...ne);return(null===(ie=null==De?void 0:De.spy)||void 0===ie?void 0:ie.apply)&&De.spy.apply(Ee,ne,Ne),Ne})})})}),pe=(we,Xe)=>{Xe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(De=>{Object.defineProperty(we.prototype,De,Object.getOwnPropertyDescriptor(We.prototype||We,De))})})};class re{constructor(Xe){return Xe}}const de=new m.OlP("angularfire2.app.options"),ue=new m.OlP("angularfire2.app.name");function j(we,Xe,We){const _e="object"==typeof We&&We||{};_e.name=_e.name||"string"==typeof We&&We||"[DEFAULT]";const He=Y.Z.apps.filter($e=>$e&&$e.name===_e.name)[0]||Xe.runOutsideAngular(()=>Y.Z.initializeApp(we,_e));try{JSON.stringify(we)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new re(He)}const $=(we,...Xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)},J={provide:re,useFactory:j,deps:[de,m.R0b,[new m.FiY,ue]]};let Ge=(()=>{class we{constructor(We){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",m.q4F.full,We.toString())}static initializeApp(We,De){return{ngModule:we,providers:[{provide:de,useValue:We},{provide:ue,useValue:De}]}}}return we.\u0275fac=function(We){return new(We||we)(m.LFG(m.Lbi))},we.\u0275mod=m.oAB({type:we}),we.\u0275inj=m.cJS({providers:[J]}),we})();function Ae(we,Xe,We,De,_e){const[,Ee,He]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===we)||[];if(Ee)return function Re(we,Xe){try{return we.toString()===Xe.toString()}catch(We){return we===Xe}}(_e,He)||(he("error",`${Xe} was already initialized on the ${We} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:He})),Ee;{const $e=De();return globalThis.\u0275AngularfireInstanceCache.push([we,$e,_e]),$e}}const Le=!!ot.hot,he=(we,...Xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Te,P)=>{P.d(Te,{q4:()=>Hl,iC:()=>Kl,HU:()=>Fu,vb:()=>Dd,JM:()=>no});var m=P(5e3),Y=P(5867),O=P(5861),ae=P(9681),X=P(2090),pe=P(4859),re=P(1877);const de="@firebase/installations",$="w:0.5.7",J="FIS_v2",we=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(D){return D instanceof X.ZR&&D.code.includes("request-failed")}function We({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:ne(D.expiresIn),creationTime:Date.now()}}function _e(D,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return we.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function $e(D,{refreshToken:C}){const N=He(D);return N.append("Authorization",function ge(D){return`${J} ${D}`}(C)),N}function te(D){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ne(D){return Number(D.replace("s","000"))}function ie(D,C){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:N}){const F=We(D),K=He(D),ee=C.getImmediate({optional:!0});if(ee){const wt=yield ee.getHeartbeatsHeader();wt&&K.append("x-firebase-client",wt)}const Me={method:"POST",headers:K,body:JSON.stringify({fid:N,authVersion:J,appId:D.appId,sdkVersion:$})},Ze=yield te(()=>fetch(F,Me));if(Ze.ok){const wt=yield Ze.json();return{fid:wt.fid||N,registrationStatus:2,refreshToken:wt.refreshToken,authToken:De(wt.authToken)}}throw yield _e("Create Installation",Ze)})).apply(this,arguments)}function oe(D){return new Promise(C=>{setTimeout(C,D)})}const Jt=/^[cdef][\w-]{21}$/;function at(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function pt(D){return function It(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Jt.test(N)?N:""}catch(D){return""}}function ln(D){return`${D.appName}!${D.appId}`}const cn=new Map;function Ti(D,C){const N=ln(D);Xt(N,C),function qt(D,C){const N=function ui(){return!ar&&"BroadcastChannel"in self&&(ar=new BroadcastChannel("[Firebase] FID Change"),ar.onmessage=D=>{Xt(D.data.key,D.data.fid)}),ar}();N&&N.postMessage({key:D,fid:C}),function Os(){0===cn.size&&ar&&(ar.close(),ar=null)}()}(N,C)}function Xt(D,C){const N=cn.get(D);if(N)for(const F of N)F(C)}let ar=null;const Lr="firebase-installations-store";let us=null;function ls(){return us||(us=(0,X.X3)("firebase-installations-database",1,(D,C)=>{0===C&&D.createObjectStore(Lr)})),us}function ut(D,C){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(D,C){const N=ln(D),K=(yield ls()).transaction(Lr,"readwrite"),ee=K.objectStore(Lr),Se=yield ee.get(N);return yield ee.put(C,N),yield K.complete,(!Se||Se.fid!==C.fid)&&Ti(D,C.fid),C})).apply(this,arguments)}function Xn(D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(D){const C=ln(D),F=(yield ls()).transaction(Lr,"readwrite");yield F.objectStore(Lr).delete(C),yield F.complete})).apply(this,arguments)}function li(D,C){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(D,C){const N=ln(D),K=(yield ls()).transaction(Lr,"readwrite"),ee=K.objectStore(Lr),Se=yield ee.get(N),Me=C(Se);return void 0===Me?yield ee.delete(N):yield ee.put(Me,N),yield K.complete,Me&&(!Se||Se.fid!==Me.fid)&&Ti(D,Me.fid),Me})).apply(this,arguments)}function yn(D){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(D){let C;const N=yield li(D.appConfig,F=>{const K=Ps(F),ee=Aa(D,K);return C=ee.registrationPromise,ee.installationEntry});return""===N.fid?{installationEntry:yield C}:{installationEntry:N,registrationPromise:C}})).apply(this,arguments)}function Ps(D){return Ht(D||{fid:at(),registrationStatus:0})}function Aa(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(we.create("app-offline"))};const N={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function zt(D,C){return rt.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:vt(D)}:{installationEntry:C}}function rt(){return(rt=(0,O.Z)(function*(D,C){try{const N=yield ie(D,C);return ut(D.appConfig,N)}catch(N){throw Xe(N)&&409===N.customData.serverCode?yield Xn(D.appConfig):yield ut(D.appConfig,{fid:C.fid,registrationStatus:0}),N}})).apply(this,arguments)}function vt(D){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*(D){let C=yield Gi(D.appConfig);for(;1===C.registrationStatus;)yield oe(100),C=yield Gi(D.appConfig);if(0===C.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield yn(D);return F||N}return C})).apply(this,arguments)}function Gi(D){return li(D,C=>{if(!C)throw we.create("installation-not-found");return Ht(C)})}function Ht(D){return function lo(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function br(D,C){return lr.apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},N){const F=ct(D,N),K=$e(D,N),ee=C.getImmediate({optional:!0});if(ee){const wt=yield ee.getHeartbeatsHeader();wt&&K.append("x-firebase-client",wt)}const Me={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:$,appId:D.appId}})},Ze=yield te(()=>fetch(F,Me));if(Ze.ok)return De(yield Ze.json());throw yield _e("Generate Auth Token",Ze)})).apply(this,arguments)}function ct(D,{fid:C}){return`${We(D)}/${C}/authTokens:generate`}function Ir(D){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(D,C=!1){let N;const F=yield li(D.appConfig,ee=>{if(!Lt(ee))throw we.create("not-registered");const Se=ee.authToken;if(!C&&B(Se))return ee;if(1===Se.requestStatus)return N=Ke(D,C),ee;{if(!navigator.onLine)throw we.create("app-offline");const Me=G(ee);return N=dt(D,Me),Me}});return N?yield N:F.authToken})).apply(this,arguments)}function Ke(D,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,C){let N=yield Ye(D.appConfig);for(;1===N.authToken.requestStatus;)yield oe(100),N=yield Ye(D.appConfig);const F=N.authToken;return 0===F.requestStatus?Ir(D,C):F})).apply(this,arguments)}function Ye(D){return li(D,C=>{if(!Lt(C))throw we.create("not-registered");return function ce(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function dt(D,C){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(D,C){try{const N=yield br(D,C),F=Object.assign(Object.assign({},C),{authToken:N});return yield ut(D.appConfig,F),N}catch(N){if(!Xe(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ut(D.appConfig,F)}else yield Xn(D.appConfig);throw N}})).apply(this,arguments)}function Lt(D){return void 0!==D&&2===D.registrationStatus}function B(D){return 2===D.requestStatus&&!function L(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function G(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Ve(){return(Ve=(0,O.Z)(function*(D){const C=D,{installationEntry:N,registrationPromise:F}=yield yn(C);return F?F.catch(console.error):Ir(C).catch(console.error),N.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(D,C=!1){const N=D;return yield Dr(N),(yield Ir(N,C)).token})).apply(this,arguments)}function Dr(D){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield yn(D);C&&(yield C)})).apply(this,arguments)}function Kn(D){return we.create("missing-app-config-values",{valueName:D})}const Ma="installations",Oe=D=>{const C=D.getProvider("app").getImmediate(),N=function cs(D){if(!D||!D.options)throw Kn("App Configuration");if(!D.name)throw Kn("App Name");const C=["projectId","apiKey","appId"];for(const N of C)if(!D.options[N])throw Kn(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:N,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Pt=D=>{const C=D.getProvider("app").getImmediate(),N=(0,ae._getProvider)(C,Ma).getImmediate();return{getId:()=>function Q(D){return Ve.apply(this,arguments)}(N),getToken:K=>function gt(D){return Zt.apply(this,arguments)}(N,K)}};(function pn(){(0,ae._registerComponent)(new pe.wA(Ma,Oe,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",Pt,"PRIVATE"))})(),(0,ae.registerVersion)(de,"0.5.7"),(0,ae.registerVersion)(de,"0.5.7","esm2017");const cr="@firebase/remote-config",On=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fh{constructor(C,N,F,K){this.client=C,this.storage=N,this.storageCache=F,this.logger=K}isCachedDataFresh(C,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,K=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var N=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(K&&N.isCachedDataFresh(C.cacheMaxAgeMillis,F))return K;C.eTag=K&&K.eTag;const ee=yield N.client.fetch(C),Se=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Se.push(N.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Se),ee})()}}function nd(D=navigator){return D.languages&&D.languages[0]||D.language}class gu{constructor(C,N,F,K,ee,Se){this.firebaseInstallations=C,this.sdkVersion=N,this.namespace=F,this.projectId=K,this.apiKey=ee,this.appId=Se}fetch(C){var N=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Me={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ze={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:N.appId,language_code:nd()},wt={method:"POST",headers:Me,body:JSON.stringify(Ze)},Rt=fetch(Se,wt),Dt=new Promise((_i,Fi)=>{C.signal.addEventListener(()=>{const Co=new Error("The operation was aborted.");Co.name="AbortError",Fi(Co)})});let Gn;try{yield Promise.race([Rt,Dt]),Gn=yield Rt}catch(_i){let Fi="fetch-client-network";throw"AbortError"===_i.name&&(Fi="fetch-timeout"),On.create(Fi,{originalErrorMessage:_i.message})}let Sn=Gn.status;const ea=Gn.headers.get("ETag")||void 0;let Do,Ur;if(200===Gn.status){let _i;try{_i=yield Gn.json()}catch(Fi){throw On.create("fetch-client-parse",{originalErrorMessage:Fi.message})}Do=_i.entries,Ur=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Sn=500:"NO_CHANGE"===Ur?Sn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(Do={}),304!==Sn&&200!==Sn)throw On.create("fetch-status",{httpStatus:Sn});return{status:Sn,eTag:ea,config:Do}})()}}class Wp{constructor(C,N){this.client=C,this.storage=N}fetch(C){var N=this;return(0,O.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:N,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function jn(D,C){return new Promise((N,F)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(N,K);D.addEventListener(()=>{clearTimeout(ee),F(On.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,N);try{const ee=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function rd(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ee))throw ee;const Se={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Se),K.attemptFetch(C,Se)}})()}}class mu{constructor(C,N,F,K,ee){this.app=C,this._client=N,this._storageCache=F,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function El(D,C){const N=D.target.error||void 0;return On.create(C,{originalErrorMessage:N&&N.message})}const Bs="app_namespace_store";class Lh{constructor(C,N,F,K=function Yp(){return new Promise((D,C)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{C(El(F,"storage-open"))},N.onsuccess=F=>{D(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(N){C(On.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=C,this.appName=N,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((K,ee)=>{const Me=F.transaction([Bs],"readonly").objectStore(Bs),Ze=N.createCompositeKey(C);try{const wt=Me.get(Ze);wt.onerror=Rt=>{ee(El(Rt,"storage-get"))},wt.onsuccess=Rt=>{const Dt=Rt.target.result;K(Dt?Dt.value:void 0)}}catch(wt){ee(On.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(C,N){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ee,Se)=>{const Ze=K.transaction([Bs],"readwrite").objectStore(Bs),wt=F.createCompositeKey(C);try{const Rt=Ze.put({compositeKey:wt,value:N});Rt.onerror=Dt=>{Se(El(Dt,"storage-set"))},Rt.onsuccess=()=>{ee()}}catch(Rt){Se(On.create("storage-set",{originalErrorMessage:Rt&&Rt.message}))}})})()}delete(C){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((K,ee)=>{const Me=F.transaction([Bs],"readwrite").objectStore(Bs),Ze=N.createCompositeKey(C);try{const wt=Me.delete(Ze);wt.onerror=Rt=>{ee(El(Rt,"storage-delete"))},wt.onsuccess=()=>{K()}}catch(wt){ee(On.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class sd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const N=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),ee=yield N;ee&&(C.lastFetchStatus=ee);const Se=yield F;Se&&(C.lastSuccessfulFetchTimestampMillis=Se);const Me=yield K;Me&&(C.activeConfig=Me)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function ho(){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Bo(){(0,ae._registerComponent)(new pe.wA("remote-config",function D(C,{instanceIdentifier:N}){const F=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw On.create("registration-window");if(!(0,X.hl)())throw On.create("indexed-db-unavailable");const{projectId:ee,apiKey:Se,appId:Me}=F.options;if(!ee)throw On.create("registration-project-id");if(!Se)throw On.create("registration-api-key");if(!Me)throw On.create("registration-app-id");const Ze=new Lh(Me,F.name,N=N||"firebase"),wt=new sd(Ze),Rt=new re.Yd(cr);Rt.logLevel=re.in.ERROR;const Dt=new gu(K,ae.SDK_VERSION,N,ee,Se,Me),Gn=new Wp(Dt,Ze),Sn=new Fh(Gn,Ze,wt,Rt),ea=new mu(F,Sn,wt,Ze,Rt);return function Ai(D){const C=(0,X.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ea),ea},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(cr,"0.3.6"),(0,ae.registerVersion)(cr,"0.3.6","esm2017")}();const wl="/firebase-messaging-sw.js",js="/firebase-cloud-messaging-push-scope",zr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fo="google.c.a.c_id",Na="google.c.a.c_l",od="google.c.a.ts",Qp="google.c.a.e";var $s=(()=>{return(D=$s||($s={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",$s;var D})();function hi(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _u(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),K=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)K[ee]=F.charCodeAt(ee);return K}const vu="fcm_token_details_db",dr="fcm_token_object_Store";function Uh(D){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(vu))return null;let C=null;return(yield(0,X.X3)(vu,5,function(){var F=(0,O.Z)(function*(K,ee,Se,Me){var Ze;if(ee<2||!K.objectStoreNames.contains(dr))return;const wt=Me.objectStore(dr),Rt=yield wt.index("fcmSenderId").get(D);if(yield wt.clear(),Rt)if(2===ee){const Dt=Rt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;C={token:Dt.fcmToken,createTime:null!==(Ze=Dt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:hi(Dt.vapidKey)}}}else if(3===ee){const Dt=Rt;C={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:hi(Dt.auth),p256dh:hi(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:hi(Dt.vapidKey)}}}else if(4===ee){const Dt=Rt;C={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:hi(Dt.auth),p256dh:hi(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:hi(Dt.vapidKey)}}}});return function(K,ee,Se,Me){return F.apply(this,arguments)}}())).close(),yield(0,X.Lj)(vu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),ad(C)?C:null}),Eu.apply(this,arguments)}function ad(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ps="firebase-messaging-store";let Ra=null;function bl(){return Ra||(Ra=(0,X.X3)("firebase-messaging-database",1,(D,C)=>{0===C&&D.createObjectStore(ps)})),Ra}function mn(D){return $o.apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(D){const C=go(D),F=yield(yield bl()).transaction(ps).objectStore(ps).get(C);if(F)return F;{const K=yield Uh(D.appConfig.senderId);if(K)return yield Hs(D,K),K}})).apply(this,arguments)}function Hs(D,C){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(D,C){const N=go(D),K=(yield bl()).transaction(ps,"readwrite");return yield K.objectStore(ps).put(C,N),yield K.complete,C})).apply(this,arguments)}function ud(D){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(D){const C=go(D),F=(yield bl()).transaction(ps,"readwrite");yield F.objectStore(ps).delete(C),yield F.complete})).apply(this,arguments)}function go({appConfig:D}){return D.appId}const Pn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Oa(D,C){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(D,C){const N=yield qs(D),F=ht(C),K={method:"POST",headers:N,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Zr(D.appConfig),K)).json()}catch(Se){throw Pn.create("token-subscribe-failed",{errorInfo:Se})}if(ee.error)throw Pn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Pn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Tr(D,C){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(D,C){const N=yield qs(D),F=ht(C.subscriptionOptions),K={method:"PATCH",headers:N,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Zr(D.appConfig)}/${C.token}`,K)).json()}catch(Se){throw Pn.create("token-update-failed",{errorInfo:Se})}if(ee.error)throw Pn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Pn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function gs(D,C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield qs(D)};try{const ee=yield(yield fetch(`${Zr(D.appConfig)}/${C}`,F)).json();if(ee.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw Pn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Zr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function qs(D){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*({appConfig:D,installations:C}){const N=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ht({p256dh:D,auth:C,endpoint:N,vapidKey:F}){const K={web:{endpoint:N,auth:C,p256dh:D}};return F!==zr&&(K.web.applicationPubKey=F),K}const Du=6048e5;function Pa(D){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,O.Z)(function*(D){const C=yield Cl(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:hi(C.getKey("auth")),p256dh:hi(C.getKey("p256dh"))},F=yield mn(D.firebaseDependencies);if(F){if(Ho(F.subscriptionOptions,N))return Date.now()>=F.createTime+Du?Il(D,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield gs(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return be(D.firebaseDependencies,N)}return be(D.firebaseDependencies,N)})).apply(this,arguments)}function Tu(D){return Au.apply(this,arguments)}function Au(){return(Au=(0,O.Z)(function*(D){const C=yield mn(D.firebaseDependencies);C&&(yield gs(D.firebaseDependencies,C.token),yield ud(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Il(D,C){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,O.Z)(function*(D,C){try{const N=yield Tr(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:N,createTime:Date.now()});return yield Hs(D.firebaseDependencies,F),N}catch(N){throw yield Tu(D),N}})).apply(this,arguments)}function be(D,C){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(D,C){const F={token:yield Oa(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Hs(D,F),F.token})).apply(this,arguments)}function Cl(D,C){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_u(C)})})).apply(this,arguments)}function Ho(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Go(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Yr(D,C){if(!C.notification)return;D.notification={};const N=C.notification.title;N&&(D.notification.title=N);const F=C.notification.body;F&&(D.notification.body=F);const K=C.notification.image;K&&(D.notification.image=K)}(C,D),function Tl(D,C){!C.data||(D.data=C.data)}(C,D),function Al(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const N=C.fcmOptions.link;N&&(D.fcmOptions.link=N);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function ld(D){return"object"==typeof D&&!!D&&fo in D}function Sl(D,C){const N=[];for(let F=0;F<D.length;F++)N.push(D.charAt(F)),F<C.length&&N.push(C.charAt(F));return N.join("")}function Ws(D){return Pn.create("missing-app-config-values",{valueName:D})}Sl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(C,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Su(D){if(!D||!D.options)throw Ws("App Configuration Object");if(!D.name)throw Ws("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const F of C)if(!N[F])throw Ws(F);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function fi(D){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(wl,{scope:js}),D.swRegistration.update().catch(()=>{})}catch(C){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Ks(D,C){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield fi(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Ml(D,C){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=zr)})).apply(this,arguments)}function xl(){return(xl=(0,O.Z)(function*(D,C){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield Ml(D,null==C?void 0:C.vapidKey),yield Ks(D,null==C?void 0:C.serviceWorkerRegistration),Pa(D)})).apply(this,arguments)}function ka(D,C,N){return mo.apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(D,C,N){const F=Nl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[fo],message_name:N[Na],message_time:N[od],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nl(D){switch(D){case $s.NOTIFICATION_CLICKED:return"notification_open";case $s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function cd(){return(cd=(0,O.Z)(function*(D,C){const N=C.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===$s.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Go(N)):D.onMessageHandler.next(Go(N)));const F=N.data;ld(F)&&"1"===F[Qp]&&(yield ka(D,N.messageType,F))})).apply(this,arguments)}const Ol="@firebase/messaging",dd=D=>{const C=new hr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Rl(D,C){return cd.apply(this,arguments)}(C,N)),C},_o=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Nu(D,C){return xl.apply(this,arguments)}(C,F)}};function fd(){return vo.apply(this,arguments)}function vo(){return(vo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hd(){(0,ae._registerComponent)(new pe.wA("messaging",dd,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",_o,"PRIVATE")),(0,ae.registerVersion)(Ol,"0.9.11"),(0,ae.registerVersion)(Ol,"0.9.11","esm2017")}();const kl="analytics",my="firebase_id",Fa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ru="https://www.googletagmanager.com/gtag/js",$n=new re.Yd("@firebase/analytics");function gd(D){return Promise.all(D.map(C=>C.catch(N=>N)))}function Jp(D,C){const N=document.createElement("script");N.src=`${Ru}?l=${D}&id=${C}`,N.async=!0,document.head.appendChild(N)}function qo(D,C,N,F,K,ee){return md.apply(this,arguments)}function md(){return(md=(0,O.Z)(function*(D,C,N,F,K,ee){const Se=F[K];try{if(Se)yield C[Se];else{const Ze=(yield gd(N)).find(wt=>wt.measurementId===K);Ze&&(yield C[Ze.appId])}}catch(Me){$n.error(Me)}D("config",K,ee)})).apply(this,arguments)}function Ll(D,C,N,F,K){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(D,C,N,F,K){try{let ee=[];if(K&&K.send_to){let Se=K.send_to;Array.isArray(Se)||(Se=[Se]);const Me=yield gd(N);for(const Ze of Se){const wt=Me.find(Dt=>Dt.measurementId===Ze),Rt=wt&&C[wt.appId];if(!Rt){ee=[];break}ee.push(Rt)}}0===ee.length&&(ee=Object.values(C)),yield Promise.all(ee),D("event",F,K||{})}catch(ee){$n.error(ee)}})).apply(this,arguments)}function Xp(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(Ru))return C;return null}const Fn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Jr=new class Qr{constructor(C={},N=1e3){this.throttleMetadata=C,this.intervalMillis=N}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,N){this.throttleMetadata[C]=N}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function zo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function _d(D){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(D){var C;const{appId:N,apiKey:F}=D,K={method:"GET",headers:zo(F)},ee=Fa.replace("{app-id}",N),Se=yield fetch(ee,K);if(200!==Se.status&&304!==Se.status){let Me="";try{const Ze=yield Se.json();(null===(C=Ze.error)||void 0===C?void 0:C.message)&&(Me=Ze.error.message)}catch(Ze){}throw Fn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Me})}return Se.json()})).apply(this,arguments)}function jh(D){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(D,C=Jr,N){const{appId:F,apiKey:K,measurementId:ee}=D.options;if(!F)throw Fn.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:F};throw Fn.create("no-api-key")}const Se=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new Vl;return setTimeout((0,O.Z)(function*(){Me.abort()}),void 0!==N?N:6e4),Ou({appId:F,apiKey:K,measurementId:ee},Se,Me,C)})).apply(this,arguments)}function Ou(D,C,N){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:N},F,K=Jr){const{appId:ee,measurementId:Se}=D;try{yield kt(F,C)}catch(Me){if(Se)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:ee,measurementId:Se};throw Me}try{const Me=yield _d(D);return K.deleteThrottleMetadata(ee),Me}catch(Me){if(!vd(Me)){if(K.deleteThrottleMetadata(ee),Se)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:ee,measurementId:Se};throw Me}const Ze=503===Number(Me.customData.httpStatus)?(0,X.$s)(N,K.intervalMillis,30):(0,X.$s)(N,K.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:N+1};return K.setThrottleMetadata(ee,wt),$n.debug(`Calling attemptFetch again in ${Ze} millis`),Ou(D,wt,F,K)}})).apply(this,arguments)}function kt(D,C){return new Promise((N,F)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(N,K);D.addEventListener(()=>{clearTimeout(ee),F(Fn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function vd(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Vl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Ed(){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(){if(!(0,X.hl)())return $n.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(D){return $n.warn(Fn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function _s(){return(_s=(0,O.Z)(function*(D,C,N,F,K,ee,Se){var Me;const Ze=jh(D);Ze.then(Sn=>{N[Sn.measurementId]=Sn.appId,D.options.measurementId&&Sn.measurementId!==D.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sn=>$n.error(Sn)),C.push(Ze);const wt=Ed().then(Sn=>{if(Sn)return F.getId()}),[Rt,Dt]=yield Promise.all([Ze,wt]);Xp()||Jp(ee,Rt.measurementId),K("js",new Date);const Gn=null!==(Me=null==Se?void 0:Se.config)&&void 0!==Me?Me:{};return Gn.origin="firebase",Gn.update=!0,null!=Dt&&(Gn[my]=Dt),K("config",Rt.measurementId,Gn),Rt.measurementId})).apply(this,arguments)}class Wo{constructor(C){this.app=C}_delete(){return delete gi[this.app.options.appId],Promise.resolve()}}let gi={},Qs=[];const La={};let Js,Wi,zi="dataLayer",Bl=!1;function Ri(D,C,N){!function Ko(){const D=[];if((0,X.ru)()&&D.push("This is a browser extension environment."),(0,X.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),N=Fn.create("invalid-analytics-context",{errorInfo:C});$n.warn(N.message)}}();const F=D.options.appId;if(!F)throw Fn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Fn.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gi[F])throw Fn.create("already-exists",{id:F});if(!Bl){!function ys(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(zi);const{wrappedGtag:ee,gtagCore:Se}=function Bh(D,C,N,F,K){let ee=function(...Se){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function yd(D,C,N,F){function ee(){return(ee=(0,O.Z)(function*(Se,Me,Ze){try{"event"===Se?yield Ll(D,C,N,Me,Ze):"config"===Se?yield qo(D,C,N,F,Me,Ze):D("set",Me)}catch(wt){$n.error(wt)}})).apply(this,arguments)}return function K(Se,Me,Ze){return ee.apply(this,arguments)}}(ee,D,C,N),{gtagCore:ee,wrappedGtag:window[K]}}(gi,Qs,La,zi,"gtag");Wi=ee,Js=Se,Bl=!0}return gi[F]=function Hn(D,C,N,F,K,ee,Se){return _s.apply(this,arguments)}(D,Qs,La,C,Js,zi,N),new Wo(D)}function Va(){return(Va=(0,O.Z)(function*(D,C,N,F,K){if(K&&K.global)D("event",N,F);else{const ee=yield C;D("event",N,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function Tn(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}const eo="@firebase/analytics";!function rg(){(0,ae._registerComponent)(new pe.wA(kl,(C,{options:N})=>Ri(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function D(C){try{const N=C.getProvider(kl).getImmediate();return{logEvent:(F,K,ee)=>function ng(D,C,N,F){D=(0,X.m9)(D),function Zo(D,C,N,F,K){return Va.apply(this,arguments)}(Wi,gi[D.app.options.appId],C,N,F).catch(K=>$n.error(K))}(N,F,K,ee)}}catch(N){throw Fn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ae.registerVersion)(eo,"0.7.7"),(0,ae.registerVersion)(eo,"0.7.7","esm2017")}();var to=P(4408),Pu=P(7565);const jl=new class wn extends Pu.v{}(class Es extends to.o{constructor(C,N){super(C,N),this.scheduler=C,this.work=N}schedule(C,N=0){return N>0?super.schedule(C,N):(this.delay=N,this.state=C,this.scheduler.flush(this),this)}execute(C,N){return N>0||this.closed?super.execute(C,N):this._execute(C,N)}requestAsyncId(C,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,N,F):C.flush(this)}});var ig=P(4986),$l=P(8505),Mr=P(9468),mi=P(5363);const Hl=new m.GfV("7.3.0"),ws="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",Zi="__angularfire_symbol__remoteConfigIsSupportedValue",Ua="__angularfire_symbol__remoteConfigIsSupported",Gl="__angularfire_symbol__messagingIsSupportedValue",ql="__angularfire_symbol__messagingIsSupported";function no(D,C,N){if(C){if(1===C.length)return C[0];const ee=C.filter(Se=>Se.app===N);if(1===ee.length)return ee[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=Tn().then(D=>globalThis[ws]=D).catch(()=>globalThis[ws]=!1)),globalThis[ql]||(globalThis[ql]=fd().then(D=>globalThis[Gl]=D).catch(()=>globalThis[Gl]=!1)),globalThis[Ua]||(globalThis[Ua]=ho().then(D=>globalThis[Zi]=D).catch(()=>globalThis[Zi]=!1));const Dd=(D,C)=>{const N=C?[C]:(0,Y.C6)(),F=[];return N.forEach(K=>{K.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function bo(){}class ku{constructor(C,N=jl){this.zone=C,this.delegate=N}now(){return this.delegate.now()}schedule(C,N,F){const K=this.zone;return this.delegate.schedule(function(Se){K.runGuarded(()=>{C.apply(this,[Se])})},N,F)}}class Yi{constructor(C){this.zone=C,this.task=null}call(C,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bo,{},bo,bo)),N.pipe((0,$l.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fu=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new ku(Zone.current)),this.insideAngular=N.run(()=>new ku(Zone.current,ig.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Qi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Kl(D){return Qi(),function Io(D){return function(N){return(N=N.lift(new Yi(D.ngZone))).pipe((0,Mr.R)(D.outsideAngular),(0,mi.Q)(D.insideAngular))}}(Qi())(D)}},2090:(ot,Te,P)=>{P.d(Te,{BH:()=>Ae,LL:()=>It,ZR:()=>oe,zI:()=>ge,US:()=>re,tV:()=>j,L:()=>ue,$s:()=>lo,r3:()=>Xt,Sg:()=>Re,ne:()=>ut,vZ:()=>Os,ZB:()=>J,Lj:()=>jt,pd:()=>us,m9:()=>ct,z$:()=>Le,jU:()=>Xe,ru:()=>We,d:()=>_e,xb:()=>ar,w1:()=>Ee,hl:()=>W,uI:()=>he,UG:()=>we,b$:()=>De,G6:()=>te,Mn:()=>He,X3:()=>dt,xO:()=>Hi,zd:()=>Lr,eu:()=>ne});var m=P(5861);const X=function(B){const L=[];let G=0;for(let ce=0;ce<B.length;ce++){let Q=B.charCodeAt(ce);Q<128?L[G++]=Q:Q<2048?(L[G++]=Q>>6|192,L[G++]=63&Q|128):55296==(64512&Q)&&ce+1<B.length&&56320==(64512&B.charCodeAt(ce+1))?(Q=65536+((1023&Q)<<10)+(1023&B.charCodeAt(++ce)),L[G++]=Q>>18|240,L[G++]=Q>>12&63|128,L[G++]=Q>>6&63|128,L[G++]=63&Q|128):(L[G++]=Q>>12|224,L[G++]=Q>>6&63|128,L[G++]=63&Q|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Q=0;Q<B.length;Q+=3){const Ve=B[Q],gt=Q+1<B.length,Zt=gt?B[Q+1]:0,Dr=Q+2<B.length,Wt=Dr?B[Q+2]:0;let fn=(15&Zt)<<2|Wt>>6,tr=63&Wt;Dr||(tr=64,gt||(fn=64)),ce.push(G[Ve>>2],G[(3&Ve)<<4|Zt>>4],G[fn],G[tr])}return ce.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(X(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let G=0,ce=0;for(;G<B.length;){const Q=B[G++];if(Q<128)L[ce++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ve=B[G++];L[ce++]=String.fromCharCode((31&Q)<<6|63&Ve)}else if(Q>239&&Q<365){const Dr=((7&Q)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;L[ce++]=String.fromCharCode(55296+(Dr>>10)),L[ce++]=String.fromCharCode(56320+(1023&Dr))}else{const Ve=B[G++],gt=B[G++];L[ce++]=String.fromCharCode((15&Q)<<12|(63&Ve)<<6|63&gt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Q=0;Q<B.length;){const Ve=G[B.charAt(Q++)],Zt=Q<B.length?G[B.charAt(Q)]:0;++Q;const Wt=Q<B.length?G[B.charAt(Q)]:64;++Q;const Nt=Q<B.length?G[B.charAt(Q)]:64;if(++Q,null==Ve||null==Zt||null==Wt||null==Nt)throw Error();ce.push(Ve<<2|Zt>>4),64!==Wt&&(ce.push(Zt<<4&240|Wt>>2),64!==Nt&&ce.push(Wt<<6&192|Nt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ue=function(B){return function(B){const L=X(B);return re.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return re.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function J(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!Ge(G)||(B[G]=J(B[G],L[G]));return B}function Ge(B){return"__proto__"!==B}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,ce)=>{G?this.reject(G):this.resolve(ce),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,ce))}}}function Re(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=L||"demo-project",Q=B.iat||0,Ve=B.sub||B.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Q,exp:Q+3600,auth_time:Q,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(gt)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function We(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Le().indexOf("Electron/")>=0}function Ee(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function He(){return Le().indexOf("MSAppHost/")>=0}function te(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function ne(){return new Promise((B,L)=>{try{let G=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ce);Q.onsuccess=()=>{Q.result.close(),G||self.indexedDB.deleteDatabase(ce),B(!0)},Q.onupgradeneeded=()=>{G=!1},Q.onerror=()=>{var Ve;L((null===(Ve=Q.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(G){L(G)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor(L,G,ce){super(G),this.code=L,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(L,G,ce){this.service=L,this.serviceName=G,this.errors=ce}create(L,...G){const ce=G[0]||{},Q=`${this.service}/${L}`,Ve=this.errors[L],gt=Ve?function Jt(B,L){return B.replace(Rn,(G,ce)=>{const Q=L[ce];return null!=Q?String(Q):`<${ce}?>`})}(Ve,ce):"Error";return new oe(Q,`${this.serviceName}: ${gt} (${Q}).`,ce)}}const Rn=/\{\$([^}]+)}/g;function Xt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function ar(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Os(B,L){if(B===L)return!0;const G=Object.keys(B),ce=Object.keys(L);for(const Q of G){if(!ce.includes(Q))return!1;const Ve=B[Q],gt=L[Q];if(Fr(Ve)&&Fr(gt)){if(!Os(Ve,gt))return!1}else if(Ve!==gt)return!1}for(const Q of ce)if(!G.includes(Q))return!1;return!0}function Fr(B){return null!==B&&"object"==typeof B}function Hi(B){const L=[];for(const[G,ce]of Object.entries(B))Array.isArray(ce)?ce.forEach(Q=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(ce));return L.length?"&"+L.join("&"):""}function Lr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Q,Ve]=ce.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(Ve)}}),L}function us(B){const L=B.indexOf("?");if(!L)return"";const G=B.indexOf("#",L);return B.substring(L,G>0?G:void 0)}function ut(B,L){const G=new Gr(B,L);return G.subscribe.bind(G)}class Gr{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(ce=>{this.error(ce)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,ce){let Q;if(void 0===L&&void 0===G&&void 0===ce)throw new Error("Missing Observer.");Q=function Wn(B,L){if("object"!=typeof B||null===B)return!1;for(const G of L)if(G in B&&"function"==typeof B[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:ce},void 0===Q.next&&(Q.next=li),void 0===Q.error&&(Q.error=li),void 0===Q.complete&&(Q.complete=li);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(gt){}}),this.observers.push(Q),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function li(){}function lo(B,L=1e3,G=2){const ce=L*Math.pow(G,B),Q=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Q)}function ct(B){return B&&B._delegate?B._delegate:B}function Ir(B,L){return new Promise((G,ce)=>{B.onsuccess=Q=>{G(Q.target.result)},B.onerror=Q=>{var Ve;ce(`${L}: ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Bt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,G){return new Ke(this._db.transaction.call(this._db,L,G))}createObjectStore(L,G){return new Ce(this._db.createObjectStore(L,G))}close(){this._db.close()}}class Ke{constructor(L){this._transaction=L,this.complete=new Promise((G,ce)=>{this._transaction.oncomplete=function(){G()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new Ye(this._store.index(L))}createIndex(L,G,ce){return new Ye(this._store.createIndex(L,G,ce))}get(L){return Ir(this._store.get(L),"Error reading from IndexedDB")}put(L,G){return Ir(this._store.put(L,G),"Error writing to IndexedDB")}delete(L){return Ir(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return Ir(this._store.clear(),"Error clearing IndexedDB object store")}}class Ye{constructor(L){this._index=L}get(L){return Ir(this._index.get(L),"Error reading from IndexedDB")}}function dt(B,L,G){return new Promise((ce,Q)=>{try{const Ve=indexedDB.open(B,L);Ve.onsuccess=gt=>{ce(new Bt(gt.target.result))},Ve.onerror=gt=>{var Zt;Q(`Error opening indexedDB: ${null===(Zt=gt.target.error)||void 0===Zt?void 0:Zt.message}`)},Ve.onupgradeneeded=gt=>{G(new Bt(Ve.result),gt.oldVersion,gt.newVersion,new Ke(Ve.transaction))}}catch(Ve){Q(`Error opening indexedDB: ${Ve.message}`)}})}function jt(B){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(B){return new Promise((L,G)=>{try{const ce=indexedDB.deleteDatabase(B);ce.onsuccess=()=>{L()},ce.onerror=Q=>{var Ve;G(`Error deleting indexedDB database "${B}": ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(ce){G(`Error deleting indexedDB database "${B}": ${ce.message}`)}})})).apply(this,arguments)}},8032:(ot,Te,P)=>{var m=P(5e3);let Y=null;function O(){return Y}const re=new m.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ue(){return(0,m.LFG)($)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let $=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){J()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){J()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ge(){return new $((0,m.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function we(n){const e=(0,m.LFG)(re).location;return new We((0,m.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Xe=new m.OlP("appBaseHref");let We=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(Xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(Xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re($e(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ae,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,m.LFG)(he),(0,m.LFG)(de))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var ge=(()=>((ge=ge||{})[ge.Format=0]="Format",ge[ge.Standalone=1]="Standalone",ge))(),ie=(()=>((ie=ie||{})[ie.Narrow=0]="Narrow",ie[ie.Abbreviated=1]="Abbreviated",ie[ie.Wide=2]="Wide",ie[ie.Short=3]="Short",ie))(),Ne=(()=>((Ne=Ne||{})[Ne.Short=0]="Short",Ne[Ne.Medium=1]="Medium",Ne[Ne.Long=2]="Long",Ne[Ne.Full=3]="Full",Ne))(),oe=(()=>((oe=oe||{})[oe.Decimal=0]="Decimal",oe[oe.Group=1]="Group",oe[oe.List=2]="List",oe[oe.PercentSign=3]="PercentSign",oe[oe.PlusSign=4]="PlusSign",oe[oe.MinusSign=5]="MinusSign",oe[oe.Exponential=6]="Exponential",oe[oe.SuperscriptingExponent=7]="SuperscriptingExponent",oe[oe.PerMille=8]="PerMille",oe[oe.Infinity=9]="Infinity",oe[oe.NaN=10]="NaN",oe[oe.TimeSeparator=11]="TimeSeparator",oe[oe.CurrencyDecimal=12]="CurrencyDecimal",oe[oe.CurrencyGroup=13]="CurrencyGroup",oe))();function sn(n,e){return Xn((0,m.cg1)(n)[m.wAp.DateFormat],e)}function as(n,e){return Xn((0,m.cg1)(n)[m.wAp.TimeFormat],e)}function Xt(n,e){return Xn((0,m.cg1)(n)[m.wAp.DateTimeFormat],e)}function qt(n,e){const t=(0,m.cg1)(n),r=t[m.wAp.NumberSymbols][e];if(void 0===r){if(e===oe.CurrencyDecimal)return t[m.wAp.NumberSymbols][oe.Decimal];if(e===oe.CurrencyGroup)return t[m.wAp.NumberSymbols][oe.Group]}return r}function us(n){if(!n[m.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[m.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Xn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Wn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const er=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ps={},Aa=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var zt=(()=>((zt=zt||{})[zt.Short=0]="Short",zt[zt.ShortGMT=1]="ShortGMT",zt[zt.Long=2]="Long",zt[zt.Extended=3]="Extended",zt))(),rt=(()=>((rt=rt||{})[rt.FullYear=0]="FullYear",rt[rt.Month=1]="Month",rt[rt.Date=2]="Date",rt[rt.Hours=3]="Hours",rt[rt.Minutes=4]="Minutes",rt[rt.Seconds=5]="Seconds",rt[rt.FractionalSeconds=6]="FractionalSeconds",rt[rt.Day=7]="Day",rt))(),vt=(()=>((vt=vt||{})[vt.DayPeriods=0]="DayPeriods",vt[vt.Days=1]="Days",vt[vt.Months=2]="Months",vt[vt.Eras=3]="Eras",vt))();function ur(n,e,t,r){let o=function Zt(n){if(Wt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,c=1]=n.split("-").map(g=>+g);return Gi(o,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(er))return function Dr(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,g=Number(n[5]||0)-r,v=Number(n[6]||0),I=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,g,v,I),e}(r)}const e=new Date(n);if(!Wt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ht(t,e)||e;let g,c=[];for(;e;){if(g=Aa.exec(e),!g){c.push(e);break}{c=c.concat(g.slice(1));const S=c.pop();if(!S)break;e=S}}let v=o.getTimezoneOffset();r&&(v=Q(r,v),o=function gt(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function Ve(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,o)-o))}(o,r,!0));let I="";return c.forEach(S=>{const x=function ce(n){if(G[n])return G[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bt(vt.Eras,ie.Abbreviated);break;case"GGGG":e=Bt(vt.Eras,ie.Wide);break;case"GGGGG":e=Bt(vt.Eras,ie.Narrow);break;case"y":e=ct(rt.FullYear,1,0,!1,!0);break;case"yy":e=ct(rt.FullYear,2,0,!0,!0);break;case"yyy":e=ct(rt.FullYear,3,0,!1,!0);break;case"yyyy":e=ct(rt.FullYear,4,0,!1,!0);break;case"Y":e=L(1);break;case"YY":e=L(2,!0);break;case"YYY":e=L(3);break;case"YYYY":e=L(4);break;case"M":case"L":e=ct(rt.Month,1,1);break;case"MM":case"LL":e=ct(rt.Month,2,1);break;case"MMM":e=Bt(vt.Months,ie.Abbreviated);break;case"MMMM":e=Bt(vt.Months,ie.Wide);break;case"MMMMM":e=Bt(vt.Months,ie.Narrow);break;case"LLL":e=Bt(vt.Months,ie.Abbreviated,ge.Standalone);break;case"LLLL":e=Bt(vt.Months,ie.Wide,ge.Standalone);break;case"LLLLL":e=Bt(vt.Months,ie.Narrow,ge.Standalone);break;case"w":e=B(1);break;case"ww":e=B(2);break;case"W":e=B(1,!0);break;case"d":e=ct(rt.Date,1);break;case"dd":e=ct(rt.Date,2);break;case"c":case"cc":e=ct(rt.Day,1);break;case"ccc":e=Bt(vt.Days,ie.Abbreviated,ge.Standalone);break;case"cccc":e=Bt(vt.Days,ie.Wide,ge.Standalone);break;case"ccccc":e=Bt(vt.Days,ie.Narrow,ge.Standalone);break;case"cccccc":e=Bt(vt.Days,ie.Short,ge.Standalone);break;case"E":case"EE":case"EEE":e=Bt(vt.Days,ie.Abbreviated);break;case"EEEE":e=Bt(vt.Days,ie.Wide);break;case"EEEEE":e=Bt(vt.Days,ie.Narrow);break;case"EEEEEE":e=Bt(vt.Days,ie.Short);break;case"a":case"aa":case"aaa":e=Bt(vt.DayPeriods,ie.Abbreviated);break;case"aaaa":e=Bt(vt.DayPeriods,ie.Wide);break;case"aaaaa":e=Bt(vt.DayPeriods,ie.Narrow);break;case"b":case"bb":case"bbb":e=Bt(vt.DayPeriods,ie.Abbreviated,ge.Standalone,!0);break;case"bbbb":e=Bt(vt.DayPeriods,ie.Wide,ge.Standalone,!0);break;case"bbbbb":e=Bt(vt.DayPeriods,ie.Narrow,ge.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bt(vt.DayPeriods,ie.Abbreviated,ge.Format,!0);break;case"BBBB":e=Bt(vt.DayPeriods,ie.Wide,ge.Format,!0);break;case"BBBBB":e=Bt(vt.DayPeriods,ie.Narrow,ge.Format,!0);break;case"h":e=ct(rt.Hours,1,-12);break;case"hh":e=ct(rt.Hours,2,-12);break;case"H":e=ct(rt.Hours,1);break;case"HH":e=ct(rt.Hours,2);break;case"m":e=ct(rt.Minutes,1);break;case"mm":e=ct(rt.Minutes,2);break;case"s":e=ct(rt.Seconds,1);break;case"ss":e=ct(rt.Seconds,2);break;case"S":e=ct(rt.FractionalSeconds,1);break;case"SS":e=ct(rt.FractionalSeconds,2);break;case"SSS":e=ct(rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ce(zt.Short);break;case"ZZZZZ":e=Ce(zt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ce(zt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ce(zt.Long);break;default:return null}return G[n]=e,e}(S);I+=x?x(o,t,v):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),I}function Gi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ht(n,e){const t=function Jt(n){return(0,m.cg1)(n)[m.wAp.LocaleId]}(n);if(Ps[t]=Ps[t]||{},Ps[t][e])return Ps[t][e];let r="";switch(e){case"shortDate":r=sn(n,Ne.Short);break;case"mediumDate":r=sn(n,Ne.Medium);break;case"longDate":r=sn(n,Ne.Long);break;case"fullDate":r=sn(n,Ne.Full);break;case"shortTime":r=as(n,Ne.Short);break;case"mediumTime":r=as(n,Ne.Medium);break;case"longTime":r=as(n,Ne.Long);break;case"fullTime":r=as(n,Ne.Full);break;case"short":const o=Ht(n,"shortTime"),u=Ht(n,"shortDate");r=lo(Xt(n,Ne.Short),[o,u]);break;case"medium":const c=Ht(n,"mediumTime"),g=Ht(n,"mediumDate");r=lo(Xt(n,Ne.Medium),[c,g]);break;case"long":const v=Ht(n,"longTime"),I=Ht(n,"longDate");r=lo(Xt(n,Ne.Long),[v,I]);break;case"full":const S=Ht(n,"fullTime"),x=Ht(n,"fullDate");r=lo(Xt(n,Ne.Full),[S,x])}return r&&(Ps[t][e]=r),r}function lo(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function br(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ct(n,e,t=0,r=!1,o=!1){return function(u,c){let g=function Ir(n,e){switch(n){case rt.FullYear:return e.getFullYear();case rt.Month:return e.getMonth();case rt.Date:return e.getDate();case rt.Hours:return e.getHours();case rt.Minutes:return e.getMinutes();case rt.Seconds:return e.getSeconds();case rt.FractionalSeconds:return e.getMilliseconds();case rt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||g>-t)&&(g+=t),n===rt.Hours)0===g&&-12===t&&(g=12);else if(n===rt.FractionalSeconds)return function lr(n,e){return br(n,3).substr(0,e)}(g,e);const v=qt(c,oe.MinusSign);return br(g,e,v,r,o)}}function Bt(n,e,t=ge.Format,r=!1){return function(o,u){return function Ke(n,e,t,r,o,u){switch(t){case vt.Months:return function pt(n,e,t){const r=(0,m.cg1)(n),u=Xn([r[m.wAp.MonthsFormat],r[m.wAp.MonthsStandalone]],e);return Xn(u,t)}(e,o,r)[n.getMonth()];case vt.Days:return function at(n,e,t){const r=(0,m.cg1)(n),u=Xn([r[m.wAp.DaysFormat],r[m.wAp.DaysStandalone]],e);return Xn(u,t)}(e,o,r)[n.getDay()];case vt.DayPeriods:const c=n.getHours(),g=n.getMinutes();if(u){const I=function ls(n){const e=(0,m.cg1)(n);return us(e),(e[m.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Wn(r):[Wn(r[0]),Wn(r[1])])}(e),S=function ut(n,e,t){const r=(0,m.cg1)(n);us(r);const u=Xn([r[m.wAp.ExtraData][0],r[m.wAp.ExtraData][1]],e)||[];return Xn(u,t)||[]}(e,o,r),x=I.findIndex(V=>{if(Array.isArray(V)){const[H,z]=V,ye=c>=H.hours&&g>=H.minutes,Fe=c<z.hours||c===z.hours&&g<z.minutes;if(H.hours<z.hours){if(ye&&Fe)return!0}else if(ye||Fe)return!0}else if(V.hours===c&&V.minutes===g)return!0;return!1});if(-1!==x)return S[x]}return function Rn(n,e,t){const r=(0,m.cg1)(n),u=Xn([r[m.wAp.DayPeriodsFormat],r[m.wAp.DayPeriodsStandalone]],e);return Xn(u,t)}(e,o,r)[c<12?0:1];case vt.Eras:return function ln(n,e){return Xn((0,m.cg1)(n)[m.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function Ce(n){return function(e,t,r){const o=-1*r,u=qt(t,oe.MinusSign),c=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case zt.Short:return(o>=0?"+":"")+br(c,2,u)+br(Math.abs(o%60),2,u);case zt.ShortGMT:return"GMT"+(o>=0?"+":"")+br(c,1,u);case zt.Long:return"GMT"+(o>=0?"+":"")+br(c,2,u)+":"+br(Math.abs(o%60),2,u);case zt.Extended:return 0===r?"Z":(o>=0?"+":"")+br(c,2,u)+":"+br(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Lt(n){return Gi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function B(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();o=1+Math.floor((c+u)/7)}else{const u=Lt(t),c=function jt(n){const e=Gi(n,0,1).getDay();return Gi(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),g=u.getTime()-c.getTime();o=1+Math.round(g/6048e5)}return br(o,n,qt(r,oe.MinusSign))}}function L(n,e=!1){return function(t,r){return br(Lt(t).getFullYear(),n,qt(r,oe.MinusSign),e)}}const G={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Wt(n){return n instanceof Date&&!isNaN(n.valueOf())}let Ls=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Vs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Vs(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),ds(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ds(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ds(n,e){n.context.$implicit=e.item}function jn(n,e){return new m.vHH(2100,"")}class rd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Wp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const fs=new Wp,Kp=new rd;let mu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,m.QGY)(t))return fs;if((0,m.F4k)(t))return Kp;throw jn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.sBO,16))},n.\u0275pipe=m.Yjl({name:"async",type:n,pure:!1}),n})();const Yp=new m.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Lh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",o,u){var c;if(null==t||""===t||t!=t)return null;try{return ur(t,r,u||this.locale,null!==(c=null!=o?o:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(g){throw jn()}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.soG,16),m.Y36(Yp,24))},n.\u0275pipe=m.Yjl({name:"date",type:n,pure:!0}),n})(),Wr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function dr(n){return"server"===n}let wu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new bu((0,m.LFG)(re),window)}),n})();class bu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ra(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ps(this.window.history)||ps(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ps(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Hs extends class $o extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new Hs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ud(){return un=un||document.querySelector("base"),un?un.getAttribute("href"):null}();return null==t?null:function go(n){po=po||document.createElement("a"),po.setAttribute("href",n);const e=po.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){un=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Uo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let po,un=null;const Cr=new m.OlP("TRANSITION_ID"),Oa=[{provide:m.ip1,useFactory:function Pn(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Cr,re,m.zs3],multi:!0}];class Mi{static init(){(0,m.VLi)(new Mi)}addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const g=function(v){c=c||v,u--,0==u&&r(c)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Tr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Gs=new m.OlP("EventManagerPlugins");let gs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Gs),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Iu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),qs=(()=>{class n extends Zr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zs))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function zs(n){O().remove(n)}const ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Du=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?be(n,o,t):(o=o.replace(Du,n),t.push(o))}return t}function Vt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _n=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ho(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Tl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new Al(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gs),m.LFG(qs),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ho{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ht[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ht[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ht[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vt(r)):this.eventManager.addEventListener(e,t,Vt(r))}}class Tl extends Ho{constructor(e,t,r,o){super(e),this.component=r;const u=be(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Il(n){return"_ngcontent-%COMP%".replace(Du,n)}(o+"-"+r.id),this.hostAttr=function Dl(n){return"_nghost-%COMP%".replace(Du,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Al extends Ho{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=be(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ld=(()=>{class n extends Iu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=["alt","control","meta","shift"],Ws={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mu=(()=>{class n extends Iu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Sl.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),c+=v+".")}),c+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=c,g}static getEventFullKey(t){let r="",o=function Ks(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&hr.hasOwnProperty(e)&&(e=hr[e]))}return Ws[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Sl.forEach(u=>{u!=o&&fi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const xl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function xi(){Hs.makeCurrent(),Mi.init()},multi:!0},{provide:re,useFactory:function xu(){return(0,m.RDi)(document),document},deps:[]}]),ka=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Ml(){return new m.qLn},deps:[]},{provide:Gs,useClass:ld,multi:!0,deps:[re,m.R0b,m.Lbi]},{provide:Gs,useClass:Mu,multi:!0,deps:[re]},{provide:_n,useClass:_n,deps:[gs,qs,m.AFp]},{provide:m.FYo,useExisting:_n},{provide:Zr,useExisting:qs},{provide:qs,useClass:qs,deps:[re]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:gs,useClass:gs,deps:[Gs,m.R0b]},{provide:class mn{},useClass:Tr,deps:[]}];let mo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Cr,useExisting:m.AFp},Oa]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:ka,imports:[Wr,m.hGG]}),n})();"undefined"!=typeof window&&window;var kn=P(8996),Fn=P(7669);function mt(...n){const e=(0,Fn.yG)(n);return(0,kn.D)(n,e)}var fr=P(7579);class Qr extends fr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Jr=P(8306);const{isArray:zo}=Array,{getPrototypeOf:_d,prototype:gn,keys:jh}=Object;function Ni(n){if(1===n.length){const e=n[0];if(zo(e))return{args:e,keys:null};if(function Ou(n){return n&&"object"==typeof n&&_d(n)===gn}(e)){const t=jh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var pi=P(4671),kt=P(4004);const{isArray:vd}=Array;function Ed(n){return(0,kt.U)(e=>function Vl(n,e){return vd(e)?n(...e):n(e)}(n,e))}function wo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Hn=P(5403),_s=P(9672);function Qs(n,e,t){n?(0,_s.f)(t,n,e):e()}var La=P(576);function zi(n,e){const t=(0,La.m)(n)?n:()=>n,r=o=>o.error(t());return new Jr.y(e?o=>e.schedule(r,0,o):r)}const Js=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Wi=P(8189);function wd(...n){return function Bl(){return(0,Wi.J)(1)}()((0,kn.D)(n,(0,Fn.yG)(n)))}var Ko=P(8421);function Ri(n){return new Jr.y(e=>{(0,Ko.Xf)(n()).subscribe(e)})}var Zo=P(515),Va=P(727),Vr=P(4482);function Oi(){return(0,Vr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class bd extends Jr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Va.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Va.w0.EMPTY)}return e}refCount(){return Oi()(this)}}function Ln(n,e){return(0,Vr.e)((t,r)=>{let o=null,u=0,c=!1;const g=()=>c&&!o&&r.complete();t.subscribe((0,Hn.x)(r,v=>{null==o||o.unsubscribe();let I=0;const S=u++;(0,Ko.Xf)(n(v,S)).subscribe(o=(0,Hn.x)(r,x=>r.next(e?e(v,x,S,I++):x),()=>{o=null,g()}))},()=>{c=!0,g()}))})}var Yo=P(5698);function Pi(...n){const e=(0,Fn.yG)(n);return(0,Vr.e)((t,r)=>{(e?wd(n,t,e):wd(n,t)).subscribe(r)})}function Qo(n,e,t,r,o){return(u,c)=>{let g=t,v=e,I=0;u.subscribe((0,Hn.x)(c,S=>{const x=I++;v=g?n(v,S,x):(g=!0,S),r&&c.next(v)},o&&(()=>{g&&c.next(v),c.complete()})))}}function Sr(n,e){return(0,Vr.e)(Qo(n,e,arguments.length>=2,!0))}function vs(n,e){return(0,Vr.e)((t,r)=>{let o=0;t.subscribe((0,Hn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Ki(n){return(0,Vr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,c=>{u=(0,Ko.Xf)(n(c,Ki(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Tn=P(5577);function Xs(n,e){return(0,La.m)(e)?(0,Tn.z)(n,e,1):(0,Tn.z)(n,1)}function Id(n){return n<=0?()=>Zo.E:(0,Vr.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function An(n=eg){return(0,Vr.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function eg(){return new Js}function tg(n){return(0,Vr.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function eo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vs((o,u)=>n(o,u,r)):pi.y,(0,Yo.q)(1),t?tg(e):An(()=>new Js))}var Xr=P(8505);class to{constructor(e,t){this.id=e,this.url=t}}class Es extends to{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pu extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wn extends to{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jl extends to{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jo extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ig extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $l extends to{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mr extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mi extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ws{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ki{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ua{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ql{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class zl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zn(n){return new zl(n)}const Wl="ngNavigationCancelingError";function no(n){const e=Error("NavigationCancelingError: "+n);return e[Wl]=!0,e}function bo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))o[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Yi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Fu(n[o],e[o]))return!1;return!0}function Fu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Qi(n){return Array.prototype.concat.apply([],n)}function Cd(n){return n.length>0?n[n.length-1]:null}function Yn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yi(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,kn.D)(Promise.resolve(n)):mt(n)}const Io={exact:function C(n,e,t){if(!Rt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:F},Xo={exact:function D(n,e){return Yi(n,e)},subset:function N(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fu(n[t],e[t]))},ignored:()=>!0};function Lu(n,e,t){return Io[t.paths](n.root,e.root,t.matrixParams)&&Xo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return K(n,e,e.segments,t)}function K(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Rt(o,t)||e.hasChildren()||!ee(o,t,r))}if(n.segments.length===t.length){if(!Rt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Rt(n.segments,o)&&ee(n.segments,o,r)&&n.children[Ft])&&K(n.children[Ft],e,u,r)}}function ee(n,e,t){return e.every((r,o)=>Xo[t](n[o].parameters,r.parameters))}class Se{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return ea.serialize(this)}}class Me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Do(this)}}class Ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zn(this.parameters)),this._parameterMap}toString(){return Ba(this)}}function Rt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Gn{}class Sn{parse(e){const t=new Ad(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ur(e.root,!0)}`,r=function yy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fi(t)}=${Fi(o)}`).join("&"):`${Fi(t)}=${Fi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Co(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ea=new Sn;function Do(n){return n.segments.map(e=>Ba(e)).join("/")}function Ur(n,e){if(!n.hasChildren())return Do(n);if(e){const t=n.children[Ft]?Ur(n.children[Ft],!1):"",r=[];return Yn(n.children,(o,u)=>{u!==Ft&&r.push(`${u}:${Ur(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return Yn(n.children,(r,o)=>{o===Ft&&(t=t.concat(e(r,o)))}),Yn(n.children,(r,o)=>{o!==Ft&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ft?[Ur(n.children[Ft],!1)]:[`${o}:${Ur(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${Do(n)}/${t[0]}`:`${Do(n)}/(${t.join("//")})`}}function _i(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fi(n){return _i(n).replace(/%3B/gi,";")}function Td(n){return _i(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zl(n){return decodeURIComponent(n)}function Yl(n){return Zl(n.replace(/\+/g,"%20"))}function Ba(n){return`${Td(n.path)}${function sg(n){return Object.keys(n).map(e=>`;${Td(e)}=${Td(n[e])}`).join("")}(n.parameters)}`}const _y=/^[^\/()?;=#]+/;function bs(n){const e=n.match(_y);return e?e[0]:""}const Ql=/^[^=?&#]+/,Ey=/^[^&#]+/;class Ad{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new Me(e,t)),r}parseSegment(){const e=bs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ze(Zl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=bs(this.remaining);o&&(r=o,this.capture(r))}e[Zl(t)]=Zl(r)}parseQueryParam(e){const t=function vy(n){const e=n.match(Ql);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function og(n){const e=n.match(Ey);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Yl(t),u=Yl(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bs(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ft);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ft]:new Me([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class wy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$h(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$h(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Hh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Hh(e,this._root).map(t=>t.value)}}function $h(n,e){if(n===e.value)return e;for(const t of e.children){const r=$h(n,t);if(r)return r}return null}function Hh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Hh(n,t);if(r.length)return r.unshift(e),r}return[]}class To{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ao(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Sd extends wy{constructor(e,t){super(e),this.snapshot=t,xd(this,e)}toString(){return this.snapshot.toString()}}function ja(n,e){const t=function by(n,e){const c=new Vu([],{},{},"",{},Ft,e,null,n.root,-1,{});return new Gh("",new To(c,[]))}(n,e),r=new Qr([new Ze("",{})]),o=new Qr({}),u=new Qr({}),c=new Qr({}),g=new Qr(""),v=new ta(r,o,c,g,u,Ft,e,t.root);return v.snapshot=t.root,new Sd(new To(v,[]),t)}class ta{constructor(e,t,r,o,u,c,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=g,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(e=>Zn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(e=>Zn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Iy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Md(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Vu{constructor(e,t,r,o,u,c,g,v,I,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=g,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gh extends wy{constructor(e,t){super(t),this.url=e,xd(this,t)}toString(){return Nd(this._root)}}function xd(n,e){e.value._routerState=n,e.children.forEach(t=>xd(n,t))}function Nd(n){const e=n.children.length>0?` { ${n.children.map(Nd).join(", ")} } `:"";return`${n.value}${e}`}function Rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yi(e.params,t.params)||n.params.next(t.params),function ku(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function qh(n,e){const t=Yi(n.params,e.params)&&function wt(n,e){return Rt(n,e)&&n.every((t,r)=>Yi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qh(n.parent,e.parent))}function Jl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function zh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Jl(n,r,o);return Jl(n,r)})}(n,e,t);return new To(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>Jl(n,g)),c}}const r=function Cy(n){return new ta(new Qr(n.url),new Qr(n.params),new Qr(n.queryParams),new Qr(n.fragment),new Qr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Jl(n,u));return new To(r,o)}}function na(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uu(n){return"object"==typeof n&&null!=n&&n.outlets}function ag(n,e,t,r,o){let u={};if(r&&Yn(r,(g,v)=>{u[v]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),n===e)return new Se(t,u,o);const c=Wh(n,e,t);return new Se(c,u,o)}function Wh(n,e,t){const r={};return Yn(n.children,(o,u)=>{r[u]=o===e?t:Wh(o,e,t)}),new Me(n.segments,r)}class Ty{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&na(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Uu);if(o&&o!==Cd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function xy(n,e,t){if(n||(n=new Me([],{})),0===n.segments.length&&n.hasChildren())return io(n,e,t);const r=function l0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],g=t[r];if(Uu(g))break;const v=`${g}`,I=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!Li(v,I,c))return u;r+=2}else{if(!Li(v,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Me(n.segments.slice(0,r.pathIndex),{});return u.children[Ft]=new Me(n.segments.slice(r.pathIndex),n.children),io(u,0,o)}return r.match&&0===o.length?new Me(n.segments,{}):r.match&&!n.hasChildren()?Zh(n,e,t):r.match?io(n,0,o):Zh(n,e,t)}function io(n,e,t){if(0===t.length)return new Me(n.segments,{});{const r=function My(n){return Uu(n[0])?n[0].outlets:{[Ft]:n}}(t),o={};return Yn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=xy(n.children[c],e,u))}),Yn(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Me(n.segments,o)}}function Zh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Uu(u)){const v=Bu(u.outlets);return new Me(r,v)}if(0===o&&na(t[0])){r.push(new Ze(n.segments[e].path,Yh(t[0]))),o++;continue}const c=Uu(u)?u.outlets[Ft]:`${u}`,g=o<t.length-1?t[o+1]:null;c&&g&&na(g)?(r.push(new Ze(c,Yh(g))),o+=2):(r.push(new Ze(c,{})),o++)}return new Me(r,{})}function Bu(n){const e={};return Yn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Zh(new Me([],{}),0,t))}),e}function Yh(n){const e={};return Yn(n,(t,r)=>e[r]=`${t}`),e}function Li(n,e,t){return n==t.path&&Yi(e,t.parameters)}class lg{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ao(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),Yn(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ao(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ao(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ao(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Gl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Zi(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Rd(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),Rd(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=function Od(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=g?g.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=v,c.outlet&&c.outlet.activateWith(o,v),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Pd{constructor(e,t){this.routes=e,this.module=t}}function $a(n){return"function"==typeof n}function ju(n){return n instanceof Se}const ec=Symbol("INITIAL_VALUE");function ra(){return Ln(n=>function Wo(...n){const e=(0,Fn.yG)(n),t=(0,Fn.jO)(n),{args:r,keys:o}=Ni(n);if(0===r.length)return(0,kn.D)([],e);const u=new Jr.y(function gi(n,e,t=pi.y){return r=>{Qs(e,()=>{const{length:o}=n,u=new Array(o);let c=o,g=o;for(let v=0;v<o;v++)Qs(e,()=>{const I=(0,kn.D)(n[v],e);let S=!1;I.subscribe((0,Hn.x)(r,x=>{u[v]=x,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,o?c=>wo(o,c):pi.y));return t?u.pipe(Ed(t)):u}(n.map(e=>e.pipe((0,Yo.q)(1),Pi(ec)))).pipe(Sr((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==ec?o:(u===ec&&(r=!0),r||!1!==u&&c!==t.length-1&&!ju(u)?o:u),e)},ec),vs(e=>e!==ec),(0,kt.U)(e=>ju(e)?e:!0===e),(0,Yo.q)(1)))}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tc,this.attachRef=null}}class tc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let nc=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=u||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,v=new ef(t,g,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(tc),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ef{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ta?this.route:e===tc?this.childContexts:this.parent.get(e,t)}}let tf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[nc],encapsulation:2}),n})();function rc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];kd(r,nf(e,r))}}function kd(n,e){n.children&&rc(n.children,e)}function nf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function rf(n){const e=n.children&&n.children.map(rf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=tf),t}function nn(n){return n.outlet||Ft}function sf(n,e){const t=n.filter(r=>nn(r)===e);return t.push(...n.filter(r=>nn(r)!==e)),t}const dg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $u(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},dg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||bo)(t,n,e);if(!u)return Object.assign({},dg);const c={};Yn(u.posParams,(v,I)=>{c[I]=v.path});const g=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function ic(n,e,t,r,o="corrected"){if(t.length>0&&function Oy(n,e,t){return t.some(r=>Ld(n,e,r)&&nn(r)!==Ft)}(n,t,r)){const c=new Me(e,function Fd(n,e,t,r){const o={};o[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&nn(u)!==Ft){const c=new Me([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[nn(u)]=c}return o}(n,e,r,new Me(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function hg(n,e,t){return t.some(r=>Ld(n,e,r))}(n,t,r)){const c=new Me(n.segments,function Ry(n,e,t,r,o,u){const c={};for(const g of r)if(Ld(n,t,g)&&!o[nn(g)]){const v=new Me([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[nn(g)]=v}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Me(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ld(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Py(n,e,t,r){return!!(nn(n)===r||r!==Ft&&Ld(e,t,n))&&("**"===n.path||$u(e,n,t).matched)}function ky(n,e,t){return 0===e.length&&!n.children[t]}class ia{constructor(e){this.segmentGroup=e||null}}class xr{constructor(e){this.urlTree=e}}function So(n){return zi(new ia(n))}function sc(n){return zi(new xr(n))}class af{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=ic(this.urlTree.root,[],[],this.config).segmentGroup,t=new Me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ft).pipe((0,kt.U)(u=>this.createUrlTree(Ga(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ki(u=>{if(u instanceof xr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ia?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ft).pipe((0,kt.U)(o=>this.createUrlTree(Ga(o),e.queryParams,e.fragment))).pipe(Ki(o=>{throw o instanceof ia?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Me([],{[Ft]:e}):e;return new Se(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,kt.U)(u=>new Me([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,kn.D)(o).pipe(Xs(u=>{const c=r.children[u],g=sf(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,kt.U)(v=>({segment:v,outlet:u})))}),Sr((u,c)=>(u[c.outlet]=c.segment,u),{}),function ng(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vs((o,u)=>n(o,u,r)):pi.y,Id(1),t?tg(e):An(()=>new Js))}())}expandSegment(e,t,r,o,u,c){return(0,kn.D)(r).pipe(Xs(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,c).pipe(Ki(I=>{if(I instanceof ia)return mt(null);throw I}))),eo(g=>!!g),Ki((g,v)=>{if(g instanceof Js||"EmptyError"===g.name)return ky(t,o,u)?mt(new Me([],{})):So(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,c,g){return Py(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):So(t):So(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sc(u):this.lineralizeSegments(r,u).pipe((0,Tn.z)(c=>{const g=new Me(c,{});return this.expandSegment(e,g,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:g,consumedSegments:v,remainingSegments:I,positionalParamSegments:S}=$u(t,o,u);if(!g)return So(t);const x=this.applyRedirectCommands(v,o.redirectTo,S);return o.redirectTo.startsWith("/")?sc(x):this.lineralizeSegments(o,x).pipe((0,Tn.z)(V=>this.expandSegment(e,t,r,V.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,kt.U)(x=>(r._loadedConfig=x,new Me(o,{})))):mt(new Me(o,{}));const{matched:c,consumedSegments:g,remainingSegments:v}=$u(t,r,o);return c?this.getChildConfig(e,r,o).pipe((0,Tn.z)(S=>{const x=S.module,V=S.routes,{segmentGroup:H,slicedSegments:z}=ic(t,g,v,V),ye=new Me(H.segments,H.children);if(0===z.length&&ye.hasChildren())return this.expandChildren(x,V,ye).pipe((0,kt.U)(Ut=>new Me(g,Ut)));if(0===V.length&&0===z.length)return mt(new Me(g,{}));const Fe=nn(r)===u;return this.expandSegment(x,ye,V,z,Fe?Ft:u,!0).pipe((0,kt.U)(ze=>new Me(g.concat(ze.segments),ze.children)))})):So(t)}getChildConfig(e,t,r){return t.children?mt(new Pd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Tn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,kt.U)(u=>(t._loadedConfig=u,u))):function Br(n){return zi(no(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new Pd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?mt(o.map(c=>{const g=e.get(c);let v;if(function Qh(n){return n&&$a(n.canLoad)}(g))v=g.canLoad(t,r);else{if(!$a(g))throw new Error("Invalid CanLoad guard");v=g(t,r)}return yi(v)})).pipe(ra(),(0,Xr.b)(c=>{if(!ju(c))return;const g=no(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw g.url=c,g}),(0,kt.U)(c=>!0===c)):mt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return mt(r);if(o.numberOfChildren>1||!o.children[Ft])return zi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Se(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return Yn(t.children,(g,v)=>{c[v]=this.createSegmentGroup(e,g,r,o)}),new Me(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Ga(n){const e={};for(const r of Object.keys(n.children)){const u=Ga(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Vi(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Me(n.segments.concat(e.segments),e.children)}return n}(new Me(n.segments,e))}class fg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qa{constructor(e,t){this.component=e,this.route=t}}function lf(n,e,t){const r=n._root;return vi(r,e?e._root:null,t,[r.value])}function oc(n,e,t){const r=function Fy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function vi(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ao(e);return n.children.forEach(c=>{(function gg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function Ly(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rt(n.url,e.url)||!Yi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qh(n,e)||!Yi(n.queryParams,e.queryParams);default:return!qh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new fg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),vi(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new qa(g.outlet.component,c))}else c&&za(e,g,o),o.canActivateChecks.push(new fg(r)),vi(n,null,u.component?g?g.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),Yn(u,(c,g)=>za(c,t.getContext(g),o)),o}function za(n,e,t){const r=Ao(n),o=n.value;Yn(r,(u,c)=>{za(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new qa(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class hf{}function ff(n){return new Jr.y(e=>e.error(n))}class pf{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=ic(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ft);if(null===t)return null;const r=new Vu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new To(r,t),u=new Gh(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Iy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],g=sf(e,u),v=this.processSegmentGroup(g,c,u);if(null===v)return null;r.push(...v)}const o=yg(r);return function jy(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return ky(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Py(e,t,r,o))return null;let u,c=[],g=[];if("**"===e.path){const H=r.length>0?Cd(r).parameters:{};u=new Vu(r,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),nn(e),e.component,e,h(t),p(t)+r.length,A(e))}else{const H=$u(t,e,r);if(!H.matched)return null;c=H.consumedSegments,g=H.remainingSegments,u=new Vu(c,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),nn(e),e.component,e,h(t),p(t)+c.length,A(e))}const v=function $y(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:S}=ic(t,c,g,v.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);if(0===S.length&&I.hasChildren()){const H=this.processChildren(v,I);return null===H?null:[new To(u,H)]}if(0===v.length&&0===S.length)return[new To(u,[])];const x=nn(e)===o,V=this.processSegment(v,I,S,x?Ft:o);return null===V?null:[new To(u,V)]}}function Hy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function yg(n){const e=[],t=new Set;for(const r of n){if(!Hy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=yg(r.children);e.push(new To(r.value,o))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function p(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function A(n){return n.resolve||{}}function Qe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function it(n){return Ln(e=>{const t=n(e);return t?(0,kn.D)(t).pipe((0,kt.U)(()=>e)):mt(e)})}class uc extends class Xi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Hu=new m.OlP("ROUTES");class Gu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,kt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Pd(Qi(c.injector.get(Hu,void 0,m.XFs.Self|m.XFs.Optional)).map(rf),c)}),Ki(u=>{throw t._loader$=void 0,u}));return t._loader$=new bd(o,()=>new fr.x).pipe(Oi()),t._loader$}loadModuleFactory(e){return yi(e()).pipe((0,Tn.z)(t=>t instanceof m.YKP?mt(t):(0,kn.D)(this.compiler.compileModuleAsync(t))))}}class Gy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sa(n){throw n}function Vd(n,e,t){return e.parse("/")}function Ud(n,e){return mt(null)}const mf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class n{constructor(t,r,o,u,c,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new fr.x,this.errorHandler=sa,this.malformedUriErrorHandler=Vd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ud,afterPreactivation:Ud},this.urlHandlingStrategy=new Gy,this.routeReuseStrategy=new uc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const x=c.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Kl(){return new Se(new Me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gu(c,g,V=>this.triggerEvent(new Hl(V)),V=>this.triggerEvent(new ws(V))),this.routerState=ja(this.currentUrlTree,this.rootComponentType),this.transitions=new Qr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(vs(o=>0!==o.id),(0,kt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ln(o=>{let u=!1,c=!1;return mt(o).pipe((0,Xr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ln(g=>{const v=this.browserUrlTree.toString(),I=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return _g(g.source)&&(this.browserUrlTree=g.extractedUrl),mt(g).pipe(Ln(x=>{const V=this.transitions.getValue();return r.next(new Es(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),V!==this.transitions.getValue()?Zo.E:Promise.resolve(x)}),function uf(n,e,t,r){return Ln(o=>function Ha(n,e,t,r,o){return new af(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,kt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function R(n,e,t,r,o){return(0,Tn.z)(u=>function By(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new pf(n,e,t,r,o,u).recognize();return null===c?ff(new hf):mt(c)}catch(c){return ff(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,kt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(H,x)}this.browserUrlTree=x.urlAfterRedirects}const V=new Jo(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(V)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:H,source:z,restoredState:ye,extras:Fe}=g,ft=new Es(V,this.serializeUrl(H),z,ye);r.next(ft);const ze=ja(H,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},g),{targetSnapshot:ze,urlAfterRedirects:H,extras:Object.assign(Object.assign({},Fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Zo.E}),it(g=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:H}}=g;return this.hooks.beforePreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!H})}),(0,Xr.b)(g=>{const v=new ig(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,kt.U)(g=>Object.assign(Object.assign({},g),{guards:lf(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Vy(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function mg(n,e,t,r){return(0,kn.D)(n).pipe((0,Tn.z)(o=>function ac(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(g=>{const v=oc(g,e,o);let I;if(function c0(n){return n&&$a(n.canDeactivate)}(v))I=yi(v.canDeactivate(n,e,t,r));else{if(!$a(v))throw new Error("Invalid CanDeactivate guard");I=yi(v(n,e,t,r))}return I.pipe(eo())})).pipe(ra()):mt(!0)}(o.component,o.route,t,e,r)),eo(o=>!0!==o,!0))}(c,r,o,n).pipe((0,Tn.z)(g=>g&&function cg(n){return"boolean"==typeof n}(g)?function Nr(n,e,t,r){return(0,kn.D)(e).pipe(Xs(o=>wd(function df(n,e){return null!==n&&e&&e(new ki(n)),mt(!0)}(o.route.parent,r),function cf(n,e){return null!==n&&e&&e(new Ua(n)),mt(!0)}(o.route,r),function Mo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function pg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ri(()=>mt(c.guards.map(v=>{const I=oc(v,c.node,t);let S;if(function Xh(n){return n&&$a(n.canActivateChild)}(I))S=yi(I.canActivateChild(r,n));else{if(!$a(I))throw new Error("Invalid CanActivateChild guard");S=yi(I(r,n))}return S.pipe(eo())})).pipe(ra())));return mt(u).pipe(ra())}(n,o.path,t),function Uy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const o=r.map(u=>Ri(()=>{const c=oc(u,e,t);let g;if(function Jh(n){return n&&$a(n.canActivate)}(c))g=yi(c.canActivate(e,n));else{if(!$a(c))throw new Error("Invalid CanActivate guard");g=yi(c(e,n))}return g.pipe(eo())}));return mt(o).pipe(ra())}(n,o.route,t))),eo(o=>!0!==o,!0))}(r,u,n,e):mt(g)),(0,kt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Xr.b)(g=>{if(ju(g.guardsResult)){const I=no(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw I.url=g.guardsResult,I}const v=new $l(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),vs(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),it(g=>{if(g.guards.canActivateChecks.length)return mt(g).pipe((0,Xr.b)(v=>{const I=new Mr(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),Ln(v=>{let I=!1;return mt(v).pipe(function q(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return mt(t);let u=0;return(0,kn.D)(o).pipe(Xs(c=>function se(n,e,t,r){return function Ue(n,e,t,r){const o=Qe(n);if(0===o.length)return mt({});const u={};return(0,kn.D)(o).pipe((0,Tn.z)(c=>function yt(n,e,t,r){const o=oc(n,e,r);return yi(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,Xr.b)(g=>{u[c]=g}))),Id(1),(0,Tn.z)(()=>Qe(u).length===o.length?mt(u):Zo.E))}(n._resolve,n,e,r).pipe((0,kt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Iy(n,t).resolve),null)))}(c.route,r,n,e)),(0,Xr.b)(()=>u++),Id(1),(0,Tn.z)(c=>u===o.length?mt(t):Zo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xr.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Xr.b)(v=>{const I=new mi(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),it(g=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:H}}=g;return this.hooks.afterPreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!H})}),(0,kt.U)(g=>{const v=function Dy(n,e,t){const r=Jl(n,e._root,t?t._root:void 0);return new Sd(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:v})}),(0,Xr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,kt.U)(r=>(new lg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Xr.b)({next(){u=!0},complete(){u=!0}}),function rg(n){return(0,Vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||c||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Ki(g=>{if(c=!0,function Dd(n){return n&&n[Wl]}(g)){const v=ju(g.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const I=new wn(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(I),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_g(o.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new jl(o.id,this.serializeUrl(o.extractedUrl),g);r.next(v);try{o.resolve(this.errorHandler(g))}catch(I){o.reject(I)}}return Zo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},c=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(c){const v=Object.assign({},c);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){rc(t),this.config=t.map(rf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:v}=r,I=o||this.routerState.root,S=v?this.currentUrlTree.fragment:c;let x=null;switch(g){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function ro(n,e,t,r,o){if(0===t.length)return ag(e.root,e.root,e.root,r,o);const u=function Ay(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ty(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Yn(u.outlets,(v,I)=>{g[I]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new Ty(t,e,r)}(t);if(u.toRoot())return ag(e.root,e.root,new Me([],{}),r,o);const c=function ug(n,e,t){if(n.isAbsolute)return new Kh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Kh(u,u===e.root,0)}const r=na(n.commands[0])?0:1;return function Sy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Kh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=c.processChildren?io(c.segmentGroup,c.index,u.commands):xy(c.segmentGroup,c.index,u.commands);return ag(e.root,c.segmentGroup,g,r,o)}(I,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ju(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function yf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},mf):!1===r?Object.assign({},Bd):r,ju(t))return Lu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Lu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var g,v;if(this.disposed)return Promise.resolve(!1);let I,S,x;c?(I=c.resolve,S=c.reject,x=c.promise):x=new Promise((z,ye)=>{I=z,S=ye});const V=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),H=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):H=0,this.setTransition({id:V,targetPageId:H,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:S,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new wn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function _g(n){return"imperative"!==n}let _f=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new fr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:jd(this.skipLocationChange),replaceUrl:jd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ui),m.Y36(ta),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function jd(n){return""===n||!!n}class Wy{}class h0{preload(e,t){return mt(null)}}let f0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Gu(o,r,v=>t.triggerEvent(new Hl(v)),v=>t.triggerEvent(new ws(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(vs(t=>t instanceof Pu),Xs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,kn.D)(o).pipe((0,Wi.J)(),(0,kt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Tn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ui),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(Wy))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),vg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Es?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ql&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ql(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Is=new m.OlP("ROUTER_CONFIGURATION"),Zy=new m.OlP("ROUTER_FORROOT_GUARD"),p0=[_e,{provide:Gn,useClass:Sn},{provide:Ui,useFactory:function Qy(n,e,t,r,o,u,c={},g,v){const I=new Ui(null,n,e,t,r,o,Qi(u));return g&&(I.urlHandlingStrategy=g),v&&(I.routeReuseStrategy=v),function y0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),c.enableTracing&&I.events.subscribe(S=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),I},deps:[Gn,tc,_e,m.zs3,m.Sil,Hu,Is,[class gf{},new m.FiY],[class Mn{},new m.FiY]]},tc,{provide:ta,useFactory:function Eg(n){return n.routerState.root},deps:[Ui]},f0,h0,class Ky{preload(e,t){return t().pipe(Ki(()=>mt(null)))}},{provide:Is,useValue:{enableTracing:!1}}];function nD(){return new m.PXZ("Router",Ui)}let Wa=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[p0,Yy(t),{provide:Zy,useFactory:m0,deps:[[Ui,new m.FiY,new m.tp0]]},{provide:Is,useValue:r||{}},{provide:he,useFactory:g0,deps:[de,[new m.tBr(Xe),new m.FiY],Is]},{provide:vg,useFactory:rD,deps:[Ui,wu,Is]},{provide:Wy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:h0},{provide:m.PXZ,multi:!0,useFactory:nD},[$d,{provide:m.ip1,multi:!0,useFactory:_0,deps:[$d]},{provide:Xy,useFactory:Jy,deps:[$d]},{provide:m.tb,multi:!0,useExisting:Xy}]]}}static forChild(t){return{ngModule:n,providers:[Yy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Zy,8),m.LFG(Ui,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function rD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new vg(n,e,t)}function g0(n,e,t={}){return t.useHash?new De(n,e):new We(n,e)}function m0(n){return"guarded"}function Yy(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:Hu,multi:!0,useValue:n}]}let $d=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new fr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(Ui),c=this.injector.get(Is);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Is),o=this.injector.get(f0),u=this.injector.get(vg),c=this.injector.get(Ui),g=this.injector.get(m.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function _0(n){return n.appInitializer.bind(n)}function Jy(n){return n.bootstrapListener.bind(n)}const Xy=new m.OlP("Router Initializer");let iD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-home"]],decls:8,vars:0,consts:[[1,"d-flex","justify-content-center","pt-5"],[1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-center","py-5"],["routerLink","/addTask","type","button"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h2"),m._uU(2,"Get a clear view of the day ahead"),m.qZA()(),m.TgZ(3,"div",1),m._uU(4,"All your tasks that are due today will show up there."),m.qZA(),m.TgZ(5,"div",2)(6,"button",3),m._uU(7,"Tasks"),m.qZA()())},directives:[_f],encapsulation:2,changeDetection:0}),n})(),v0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home-page"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"lib-home")},directives:[iD],encapsulation:2,changeDetection:0}),n})(),sD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Wr,Wa]]}),n})(),oD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Wr,Wa.forChild([{path:"",component:v0}]),sD]]}),n})();const t_=new m.OlP("GETS_ALL_ADD_TASK_DTO"),bg=new m.OlP("SETS_ADD_TASK_DTO");let aD=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),qu=(()=>{class n extends aD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const oa=new m.OlP("NgValueAccessor"),uD={provide:oa,useExisting:(0,m.Gpc)(()=>vf),multi:!0},lD=new m.OlP("CompositionEventMode");let vf=(()=>{class n extends aD{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xo(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(lD,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[m._Bn([uD]),m.qOj]}),n})();const Ei=new m.OlP("NgValidators"),Wu=new m.OlP("NgAsyncValidators");function xt(n){return function zu(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function wf(n){return null}function A0(n){return null!=n}function Ig(n){const e=(0,m.QGY)(n)?(0,kn.D)(n):n;return(0,m.CqO)(e),e}function aa(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Dg(n,e){return e.map(t=>t(n))}function Cg(n){return n.map(e=>function S0(n){return!n.validate}(e)?e:t=>e.validate(t))}function Tg(n){return null!=n?function cD(n){if(!n)return null;const e=n.filter(A0);return 0==e.length?null:function(t){return aa(Dg(t,e))}}(Cg(n)):null}function Hd(n){return null!=n?function dD(n){if(!n)return null;const e=n.filter(A0);return 0==e.length?null:function(t){return function E0(...n){const e=(0,Fn.jO)(n),{args:t,keys:r}=Ni(n),o=new Jr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let v=c,I=c;for(let S=0;S<c;S++){let x=!1;(0,Ko.Xf)(t[S]).subscribe((0,Hn.x)(u,V=>{x||(x=!0,I--),g[S]=V},()=>v--,void 0,()=>{(!v||!x)&&(I||u.next(r?wo(r,g):g),u.complete())}))}});return e?o.pipe(Ed(e)):o}(Dg(t,e).map(Ig)).pipe((0,kt.U)(aa))}}(Cg(n)):null}function bf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ag(n){return n._rawValidators}function Sg(n){return n._rawAsyncValidators}function If(n){return n?Array.isArray(n)?n:[n]:[]}function s_(n,e){return Array.isArray(n)?n.includes(e):n===e}function M0(n,e){const t=If(e);return If(n).forEach(o=>{s_(t,o)||t.push(o)}),t}function x0(n,e){return If(e).filter(t=>!s_(n,t))}class N0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Tg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ku extends N0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wi extends N0{get formDirective(){return null}get path(){return null}}class hD{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let o_=(()=>{class n extends hD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ku,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})(),Mg=(()=>{class n extends hD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(wi,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[m.qOj]}),n})();function zd(n,e){Ng(n,e),e.valueAccessor.writeValue(n.value),function l_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&c_(n,e)})}(n,e),function gD(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function pD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&c_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Zu(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Wd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ng(n,e){const t=Ag(n);null!==e.validator?n.setValidators(bf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Sg(n);null!==e.asyncValidator?n.setAsyncValidators(bf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();xg(e._rawValidators,o),xg(e._rawAsyncValidators,o)}function Rg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Ag(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Sg(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return xg(e._rawValidators,r),xg(e._rawAsyncValidators,r),t}function c_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Tf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Qu="VALID",Fg="INVALID",cc="PENDING",Lg="DISABLED";function Vg(n){return(Bg(n)?n.validators:n)||null}function L0(n){return Array.isArray(n)?Tg(n):n||null}function Ug(n,e){return(Bg(e)?e.asyncValidators:n)||null}function V0(n){return Array.isArray(n)?Hd(n):n||null}function Bg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const es=n=>n instanceof jg,f_=n=>n instanceof dc;function _D(n){return es(n)?n.value:n.getRawValue()}function vD(n,e){const t=f_(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function p_(n,e){f_(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new m.vHH(1002,"")})}class U0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=L0(this._rawValidators),this._composedAsyncValidatorFn=V0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qu}get invalid(){return this.status===Fg}get pending(){return this.status==cc}get disabled(){return this.status===Lg}get enabled(){return this.status!==Lg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=L0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=V0(e)}addValidators(e){this.setValidators(M0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(M0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(x0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(x0(e,this._rawAsyncValidators))}hasValidator(e){return s_(this._rawValidators,e)}hasAsyncValidator(e){return s_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lg,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qu||this.status===cc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lg:Qu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator=!0;const t=Ig(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function F0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=f_(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof B0)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?Lg:this.errors?Fg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(Fg)?Fg:Qu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class jg extends U0{constructor(e=null,t,r){super(Vg(t),Ug(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bg(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Tf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Tf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class dc extends U0{constructor(e,t,r){super(Vg(t),Ug(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){p_(this,e),Object.keys(e).forEach(r=>{vD(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=_D(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class B0 extends U0{constructor(e,t,r){super(Vg(t),Ug(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){p_(this,e),e.forEach((r,o)=>{vD(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>_D(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let __=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),H0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const Kd=new m.OlP("NgModelWithFormControlWarning"),E_={provide:wi,useExisting:(0,m.Gpc)(()=>hc)};let hc=(()=>{class n extends wi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return zd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Wd(t.control||null,t,!1),Tf(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function h_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Wd(r||null,t),es(o)&&(zd(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function P0(n,e){Ng(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Df(n,e){return Rg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ng(this.form,this),this._oldForm&&Rg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ei,10),m.Y36(Wu,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([E_]),m.qOj,m.TTD]}),n})();const MD={provide:Ku,useExisting:(0,m.Gpc)(()=>Gg)};let Gg=(()=>{class n extends Ku{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Pg(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===vf?t=u:function mD(n){return Object.getPrototypeOf(n.constructor)===qu}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Yu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function qd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(m.Y36(wi,13),m.Y36(Ei,10),m.Y36(Wu,10),m.Y36(oa,10),m.Y36(Kd,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([MD]),m.qOj,m.TTD]}),n})(),Ya=(()=>{class n{constructor(){this._validator=wf}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,features:[m.TTD]}),n})();const D_={provide:Ei,useExisting:(0,m.Gpc)(()=>Kg),multi:!0};let Kg=(()=>{class n extends Ya{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function xf(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>xt}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&m.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[m._Bn([D_]),m.qOj]}),n})(),A_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[H0]]}),n})(),sw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[A_]}),n})(),S_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kd,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[A_]}),n})();const kD=function(n){return{"bg-success":n}},FD=function(n){return{"text-decoration-line-through":n}};function ow(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"li",2)(1,"input",3),m.NdJ("click",function(){const u=m.CHM(t).$implicit;return m.oxw().onItemClicked(u)}),m.qZA(),m.TgZ(2,"p",4),m._uU(3),m.qZA(),m.TgZ(4,"a"),m.O4$(),m.TgZ(5,"svg",5),m._UZ(6,"path",6),m.qZA()()()}if(2&n){const t=e.$implicit;m.xp6(1),m.Q6J("ngClass",m.VKq(4,kD,!0===t.isChecked))("checked",t.isChecked),m.xp6(1),m.Q6J("ngClass",m.VKq(6,FD,!0===t.isChecked)),m.xp6(1),m.hij(" ",t.task," ")}}let RS=(()=>{class n{constructor(t,r){this._getsAllAddTaskDto=t,this._setsAddTaskDto=r,this.displayTask$=this._getsAllAddTaskDto.getAll(),this.setTask=new dc({setTask:new jg})}onItemClicked(t){this._setsAddTaskDto.set(!1===t.isChecked?{id:t.id,isChecked:!0}:{id:t.id,isChecked:!1})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(t_),m.Y36(bg))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-display-task"]],decls:4,vars:4,consts:[[3,"formGroup"],["class","list-unstyled",4,"ngFor","ngForOf"],[1,"list-unstyled"],["type","checkbox","id","checkboxNoLabel",1,"form-check-input","rounded-circle",3,"ngClass","checked","click"],[1,"d-inline",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-three-dots"],["d","M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"]],template:function(t,r){1&t&&(m.TgZ(0,"form",0)(1,"ul"),m.YNc(2,ow,7,8,"li",1),m.ALo(3,"async"),m.qZA()()),2&t&&(m.Q6J("formGroup",r.setTask),m.xp6(2),m.Q6J("ngForOf",m.lcZ(3,2,r.displayTask$)))},directives:[__,Mg,hc,nr,Ls],pipes:[mu],encapsulation:2,changeDetection:0}),n})();const M_=new m.OlP("ADDS_ADD_TASK_DTO");let LD=(()=>{class n{constructor(t){this._addsAddTaskDto=t,this.task=new dc({task:new jg})}onAddTaskSubmited(t){var r;this._addsAddTaskDto.add({task:null===(r=t.get("task"))||void 0===r?void 0:r.value}),this.task.reset()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(M_))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-add-task"]],decls:6,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Task","ngModel","","required","",1,"d-block"],["type","submit",3,"disabled"],["type","button",1,"bg-secondary","m-3"]],template:function(t,r){1&t&&(m.TgZ(0,"form",0),m.NdJ("ngSubmit",function(){return r.onAddTaskSubmited(r.task)}),m._UZ(1,"input",1),m.TgZ(2,"button",2),m._uU(3,"Add Task"),m.qZA(),m.TgZ(4,"button",3),m._uU(5,"Cancel"),m.qZA()()),2&t&&(m.Q6J("formGroup",r.task),m.xp6(2),m.Q6J("disabled",r.task.invalid))},directives:[__,Mg,hc,vf,o_,Gg,Kg],encapsulation:2,changeDetection:0}),n})(),VD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-add-task-page"]],decls:10,vars:0,consts:[[1,"container","p-0"],[1,"row","gx-5"],[1,"col"],[1,"p-3"],[1,"container","ps-4"],[1,"ps-4"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"lib-display-task"),m.qZA()()()(),m.TgZ(5,"div",4)(6,"div",1)(7,"div",2)(8,"div",5),m._UZ(9,"lib-add-task"),m.qZA()()()())},directives:[RS,LD],encapsulation:2,changeDetection:0}),n})(),OS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Wr,S_,Wa]]}),n})();var PS=P(4986),Rr=P(5813);function x_(){return(0,Vr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function uw(n,e){return n===e}var Je,la=P(2011),kS=(P(4087),P(3942)),ve=P(5861),Ju=P(9681),Nf=P(4859),Qa=P(1877),Kt=P(2090),FS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},da={},N_=N_||{},At=FS||self;function Zg(){}function R_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var O_="closure_uid_"+(1e9*Math.random()>>>0),BD=0;function Yg(n,e,t){return n.call.apply(n.bind,arguments)}function Qd(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ei(n,e,t){return(ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yg:Qd).apply(null,arguments)}function Xu(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ti(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[o].apply(r,c)}}function el(){this.s=this.s,this.o=this.o}var ha={};el.prototype.s=!1,el.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function UD(n){return Object.prototype.hasOwnProperty.call(n,O_)&&n[O_]||(n[O_]=++BD)}(this);delete ha[n]}},el.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ni=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Of(n){return Array.prototype.concat.apply([],arguments)}function ts(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Xd(n){return/^[\s\xa0]*$/.test(n)}var gr,pc=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pr(n,e){return-1!=n.indexOf(e)}function tl(n,e){return n<e?-1:n>e?1:0}e:{var gc=At.navigator;if(gc){var mc=gc.userAgent;if(mc){gr=mc;break e}}gr=""}function nl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function yc(n){const e={};for(const t in n)e[t]=n[t];return e}var _c="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<_c.length;u++)t=_c[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qg(n){return Qg[" "](n),n}Qg[" "]=Zg;var Pf,n,cw=pr(gr,"Opera"),vc=pr(gr,"Trident")||pr(gr,"MSIE"),F_=pr(gr,"Edge"),Jg=F_||vc,L_=pr(gr,"Gecko")&&!(pr(gr.toLowerCase(),"webkit")&&!pr(gr,"Edge"))&&!(pr(gr,"Trident")||pr(gr,"MSIE"))&&!pr(gr,"Edge"),dw=pr(gr.toLowerCase(),"webkit")&&!pr(gr,"Edge");function hw(){var n=At.document;return n?n.documentMode:void 0}e:{var V_="",U_=(n=gr,L_?/rv:([^\);]+)(\)|;)/.exec(n):F_?/Edge\/([\d\.]+)/.exec(n):vc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dw?/WebKit\/(\S+)/.exec(n):cw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(U_&&(V_=U_?U_[1]:""),vc){var Xg=hw();if(null!=Xg&&Xg>parseFloat(V_)){Pf=String(Xg);break e}}Pf=V_}var jD={};var pw=At.document&&vc&&(hw()||parseInt(Pf,10))||void 0,HD=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",Zg,e),At.removeEventListener("test",Zg,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function tm(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(L_){e:{try{Qg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:GD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tm.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},ti(tm,bi);var GD={2:"touch",3:"pen",4:"mouse"};tm.prototype.h=function(){tm.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ec="closure_listenable_"+(1e6*Math.random()|0),B_=0;function qD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++B_,this.ca=this.fa=!1}function j_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $_(n){this.src=n,this.g={},this.h=0}function gw(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Jd(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(j_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function H_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}$_.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=H_(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new qD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var nm="closure_lm_"+(1e6*Math.random()|0),mw={};function yw(n,e,t,r,o){if(r&&r.once)return G_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)yw(n,e[u],t,r,o);return null}return t=z_(t),n&&n[Ec]?n.N(e,t,Rf(r)?!!r.capture:!!r,o):wc(n,e,t,!1,r,o)}function wc(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=Rf(o)?!!o.capture:!!o,g=im(n);if(g||(n[nm]=g=new $_(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function zD(){var e=WD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)HD||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(kf(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function G_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)G_(n,e[u],t,r,o);return null}return t=z_(t),n&&n[Ec]?n.O(e,t,Rf(r)?!!r.capture:!!r,o):wc(n,e,t,!0,r,o)}function _w(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)_w(n,e[u],t,r,o);else r=Rf(r)?!!r.capture:!!r,t=z_(t),n&&n[Ec]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=H_(u=n.g[e],t,r,o))&&(j_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=im(n))&&(e=n.g[e.toString()],n=-1,e&&(n=H_(e,t,r,o)),(t=-1<n?e[n]:null)&&rm(t))}function rm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ec])gw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(kf(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=im(e))?(gw(t,n),0==t.h&&(t.src=null,e[nm]=null)):j_(n)}}}function kf(n){return n in mw?mw[n]:mw[n]="on"+n}function WD(n,e){if(n.ca)n=!0;else{e=new tm(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&rm(n),n=t.call(r,e)}return n}function im(n){return(n=n[nm])instanceof $_?n:null}var q_="__closure_events_fn_"+(1e9*Math.random()>>>0);function z_(n){return"function"==typeof n?n:(n[q_]||(n[q_]=function(e){return n.handleEvent(e)}),n[q_])}function jr(){el.call(this),this.i=new $_(this),this.P=this,this.I=null}function ri(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var o=e;k_(e=new bi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=sm(c,r,!0,e)&&o}if(o=sm(c=e.g=n,r,!0,e)&&o,o=sm(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=sm(c=e.g=t[u],r,!1,e)&&o}function sm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,v=c.ia||c.src;c.fa&&gw(n.i,c),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}ti(jr,el),jr.prototype[Ec]=!0,jr.prototype.removeEventListener=function(n,e,t,r){_w(this,n,e,t,r)},jr.prototype.M=function(){if(jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)j_(t[r]);delete n.g[e],n.h--}}this.I=null},jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var om=At.JSON.stringify;function KD(){var n=Y_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Z_,W_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new K_,n=>n.reset());class K_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function LS(n){At.setTimeout(()=>{throw n},0)}function Ff(n,e){Z_||function VS(){var n=At.Promise.resolve(void 0);Z_=function(){n.then(Q_)}}(),bc||(Z_(),bc=!0),Y_.add(n,e)}var bc=!1,Y_=new class vw{constructor(){this.h=this.g=null}add(e,t){const r=W_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Q_(){for(var n;n=KD();){try{n.h.call(n.g)}catch(t){LS(t)}var e=W_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bc=!1}function eh(n,e){jr.call(this),this.h=n||1,this.g=e||At,this.j=ei(this.kb,this),this.l=Date.now()}function J_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function th(n,e,t){if("function"==typeof n)t&&(n=ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function Lf(n){n.g=th(()=>{n.g=null,n.i&&(n.i=!1,Lf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ti(eh,jr),(Je=eh.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ri(this,"tick"),this.da&&(J_(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){eh.Z.M.call(this),J_(this),delete this.g};class X_ extends el{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lf(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function am(n){el.call(this),this.h=n,this.g={}}ti(am,el);var Ew=[];function um(n,e,t,r){Array.isArray(t)||(t&&(Ew[0]=t.toString()),t=Ew);for(var o=0;o<t.length;o++){var u=yw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function lm(n){nl(n.g,function(e,t){this.g.hasOwnProperty(t)&&rm(e)},n),n.g={}}function Vf(){this.g=!0}function Ic(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return om(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}am.prototype.M=function(){am.Z.M.call(this),lm(this)},am.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vf.prototype.Aa=function(){this.g=!1},Vf.prototype.info=function(){};var rl={},Iw=null;function Uf(){return Iw=Iw||new jr}function nv(n){bi.call(this,rl.Ma,n)}function Dc(n){const e=Uf();ri(e,new nv(e,n))}function rv(n,e){bi.call(this,rl.STAT_EVENT,n),this.stat=e}function Bi(n){const e=Uf();ri(e,new rv(e,n))}function Dw(n,e){bi.call(this,rl.Na,n),this.size=e}function Bf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}rl.Ma="serverreachability",ti(nv,bi),rl.STAT_EVENT="statevent",ti(rv,bi),rl.Na="timingevent",ti(Dw,bi);var jf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function dm(){}function sv(){}dm.prototype.h=null;var pm,nh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hm(){bi.call(this,"d")}function fm(){bi.call(this,"c")}function $f(){}function gm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new am(this),this.P=ZD,this.W=new eh(n=Jg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Cw}function Cw(){this.i=null,this.g="",this.h=!1}ti(hm,bi),ti(fm,bi),ti($f,dm),$f.prototype.g=function(){return new XMLHttpRequest},$f.prototype.i=function(){return{}},pm=new $f;var ZD=45e3,mm={},ym={};function rr(n,e,t){n.K=1,n.v=vm(Ja(e)),n.s=t,n.U=!0,ov(n,null)}function ov(n,e){n.F=Date.now(),Hf(n),n.A=Ja(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),fv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Cw,n.g=Kw(n.l,t?e:null,!n.s),0<n.O&&(n.L=new X_(ei(n.Ia,n,n.g),n.O)),um(n.V,n.g,"readystatechange",n.gb),e=n.H?yc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Dc(1),function ww(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),v=0;v<g.length;v++){var I=g[v].split("=");if(1<I.length){var S=I[0];I=I[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+I+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Tw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Aw(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Sw(n,t),o==ym){4==e&&(n.o=4,Bi(14),r=!1),Ic(n.j,n.m,null,"[Incomplete Response]");break}if(o==mm){n.o=4,Bi(15),Ic(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ic(n.j,n.m,o,null),uv(n,o)}Tw(n)&&o!=ym&&o!=mm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Sv(e),e.L=!0,Bi(11))):(Ic(n.j,n.m,t,"[Invalid Chunked Response]"),Cc(n),fa(n))}function Sw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ym:(t=Number(e.substring(t,r)),isNaN(t)?mm:(r+=1)+t>e.length?ym:(e=e.substr(r,t),n.C=r+t,e))}function Hf(n){n.Y=Date.now()+n.P,av(n,n.P)}function av(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Bf(ei(n.eb,n),e)}function Gf(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function fa(n){0==n.l.G||n.I||Xf(n.l,n)}function Cc(n){Gf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,J_(n.W),lm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function uv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Em(t.i,n)))if(t.I=n.N,!n.J&&Em(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Bf(ei(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Tm(t),eu(t)}Av(t),Bi(18)}if(1>=mv(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else vn(t,11)}else if((n.J||t.g==n)&&Tm(t),!Xd(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let I=o[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const V=I[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(pr(z,"spdy")||pr(z,"quic")||pr(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(wm(u,u.h),u.h=null))}if(r.D){const ye=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,xn(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Mv(r,r.H?r.la:null,r.W),c.J){Vw(r.i,c);var g=c,v=r.K;v&&g.setTimeout(v),g.B&&(Gf(g),Hf(g)),r.g=c}else Ww(r);0<t.l.length&&Cv(t)}else"stop"!=I[0]&&"close"!=I[0]||vn(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?vn(t,7):Dv(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}Dc(4)}catch(I){}}function lv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(R_(n)||"string"==typeof n)ni(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(R_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Mw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(R_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Tc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Tc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function xw(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];il(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)il(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function il(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=gm.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==ga(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const S=ga(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||Jg||this.g&&(this.h.h||this.g.ga()||Iv(this.g)))){this.I||4!=S||7==e||Dc(8==e||0>=x?3:2),Gf(this);var t=this.g.ba();this.N=t;t:if(Tw(this)){var r=Iv(this.g);n="";var o=r.length,u=4==ga(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cc(this),fa(this);var c="";break t}this.h.i=new At.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function ev(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xd(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Bi(12),Cc(this),fa(this);break e}Ic(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uv(this,t)}this.U?(Aw(this,S,c),Jg&&this.i&&3==S&&(um(this.V,this.W,"tick",this.fb),this.W.start())):(Ic(this.j,this.m,c,null),uv(this,c)),4==S&&Cc(this),this.i&&!this.I&&(4==S?Xf(this.l,this):(this.i=!1,Hf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Bi(12)):(this.o=0,Bi(13)),Cc(this),fa(this)}}}catch(S){}},Je.fb=function(){if(this.g){var n=ga(this.g),e=this.g.ga();this.C<e.length&&(Gf(this),Aw(this,n,e),this.i&&4!=n&&Hf(this))}},Je.cancel=function(){this.I=!0,Cc(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function bw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Dc(3),Bi(17)),Cc(this),this.o=2,fa(this)):av(this,this.Y-n)},(Je=Tc.prototype).R=function(){xw(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return xw(this),this.g.concat()},Je.get=function(n,e){return il(this.h,n)?this.h[n]:e},Je.set=function(n,e){il(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var _m=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ac(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ac){this.g=void 0!==e?e:n.g,Ds(this,n.j),this.s=n.s,ns(this,n.i),rs(this,n.m),this.l=n.l,e=n.h;var t=new sl;t.i=e.i,e.g&&(t.g=new Tc(e.g),t.h=e.h),cv(this,t),this.o=n.o}else n&&(t=String(n).match(_m))?(this.g=!!e,Ds(this,t[1]||"",!0),this.s=qf(t[2]||""),ns(this,t[3]||"",!0),rs(this,t[4]),this.l=qf(t[5]||"",!0),cv(this,t[6]||"",!0),this.o=qf(t[7]||"")):(this.g=!!e,this.h=new sl(null,this.g))}function Ja(n){return new Ac(n)}function Ds(n,e,t){n.j=t?qf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ns(n,e,t){n.i=t?qf(e,!0):e}function rs(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function cv(n,e,t){e instanceof sl?(n.h=e,function kw(n,e){e&&!n.j&&(ol(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(dv(this,r),fv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Sc(e,Ow)),n.h=new sl(e,n.g))}function xn(n,e,t){n.h.set(e,t)}function vm(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ac.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sc(e,Nw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sc(e,Nw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sc(t,"/"==t.charAt(0)?JD:Rw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sc(t,Pw)),n.join("")};var Nw=/[#\/\?@]/g,Rw=/[#\?:]/g,JD=/[#\?]/g,Ow=/[#\?@]/g,Pw=/#/g;function sl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ol(n){n.g||(n.g=new Tc,n.h=0,n.i&&function pa(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function dv(n,e){ol(n),e=Xa(n,e),il(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,il((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&xw(n)))}function hv(n,e){return ol(n),e=Xa(n,e),il(n.g.h,e)}function fv(n,e,t){dv(n,e),0<t.length&&(n.i=null,n.g.set(Xa(n,e),ts(t)),n.h+=t.length)}function Xa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function pv(n){this.l=n||Lw,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=sl.prototype).add=function(n,e){ol(this),this.i=null,n=Xa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){ol(this),this.g.forEach(function(t,r){ni(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){ol(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){ol(this);var e=[];if("string"==typeof n)hv(this,n)&&(e=Of(e,this.g.get(Xa(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Of(e,n[t])}return e},Je.set=function(n,e){return ol(this),this.i=null,hv(this,n=Xa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Lw=10;function gv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mv(n){return n.h?1:n.g?n.g.size:0}function Em(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wm(n,e){n.g?n.g.add(e):n.h=e}function Vw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Uw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ts(n.i)}function yv(){}function XD(){this.g=new yv}function eC(n,e,t){const r=t||"";try{lv(n,function(o,u){let c=o;Rf(o)&&(c=om(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function bm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Wf(n){this.l=n.$b||null,this.j=n.ib||!1}function Im(n,e){jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_v,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pv.prototype.cancel=function(){if(this.i=Uw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yv.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},yv.prototype.parse=function(n){return At.JSON.parse(n,void 0)},ti(Wf,dm),Wf.prototype.g=function(){return new Im(this.l,this.j)},Wf.prototype.i=function(n){return function(){return n}}({}),ti(Im,jr);var _v=0;function Bw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Kf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zf(n)}function Zf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=Im.prototype).open=function(n,e){if(this.readyState!=_v)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zf(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kf(this)),this.readyState=_v},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zf(this)),this.g&&(this.readyState=3,Zf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kf(this):Zf(this),3==this.readyState&&Bw(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,Kf(this))},Je.Ta=function(n){this.g&&(this.response=n,Kf(this))},Je.ha=function(){this.g&&Kf(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Im.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nC=At.JSON.parse;function mr(n){jr.call(this),this.headers=new Tc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jw,this.K=this.L=!1}ti(mr,jr);var jw="",rC=/^https?$/i,iC=["POST","PUT"];function Hw(n){return"content-type"==n.toLowerCase()}function vv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ev(n),Yf(n)}function Ev(n){n.D||(n.D=!0,ri(n,"complete"),ri(n,"error"))}function wv(n){if(n.h&&void 0!==N_&&(!n.C[1]||4!=ga(n)||2!=n.ba()))if(n.v&&4==ga(n))th(n.Fa,0,n);else if(ri(n,"readystatechange"),4==ga(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(_m)[1]||null;if(!o&&At.self&&At.self.location){var u=At.self.location.protocol;o=u.substr(0,u.length-1)}r=!rC.test(o?o.toLowerCase():"")}t=r}if(t)ri(n,"complete"),ri(n,"success");else{n.m=6;try{var c=2<ga(n)?n.g.statusText:""}catch(v){c=""}n.j=c+" ["+n.ba()+"]",Ev(n)}}finally{Yf(n)}}}function Yf(n,e){if(n.g){bv(n);const t=n.g,r=n.C[0]?Zg:null;n.g=null,n.C=null,e||ri(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function bv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function ga(n){return n.g?n.g.readyState:0}function Iv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Dm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Gw(n){let e="";return nl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function Ro(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qw(n){this.za=0,this.l=[],this.h=new Vf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ro("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ro("baseRetryDelayMs",5e3,n),this.$a=Ro("retryDelaySeedMs",1e4,n),this.Ya=Ro("forwardChannelMaxRetries",2,n),this.ra=Ro("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new pv(n&&n.concurrentRequestLimit),this.Ca=new XD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Dv(n){if(sC(n),3==n.G){var e=n.V++,t=Ja(n.F);xn(t,"SID",n.J),xn(t,"RID",e),xn(t,"TYPE","terminate"),Cm(n,t),(e=new gm(n,n.h,e,void 0)).K=2,e.v=vm(Ja(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=Kw(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hf(e)}oC(n)}function eu(n){n.g&&(Sv(n),n.g.cancel(),n.g=null)}function sC(n){eu(n),n.u&&(At.clearTimeout(n.u),n.u=null),Tm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function Qf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Cv(n)}function Cv(n){gv(n.i)||n.m||(n.m=!0,Ff(n.Ha,n),n.C=0)}function Tv(n,e){var t;t=e?e.m:n.V++;const r=Ja(n.F);xn(r,"SID",n.J),xn(r,"RID",t),xn(r,"AID",n.U),Cm(n,r),n.o&&n.s&&Dm(r,n.o,n.s),t=new gm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_t(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),wm(n.i,t),rr(t,r,e)}function Cm(n,e){n.j&&lv({},function(t,r){xn(e,r,t)})}function _t(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ei(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let I=o[v].h;const S=o[v].g;if(I-=u,0>I)u=Math.max(0,o[v].h-100),g=!1;else try{eC(S,c,"req"+I+"_")}catch(x){r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Ww(n){n.g||n.u||(n.Y=1,Ff(n.Ga,n),n.A=0)}function Av(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Bf(ei(n.Ga,n),ep(n,n.A)),n.A++,0))}function Sv(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Jf(n){n.g=new gm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ja(n.oa);xn(e,"RID","rpc"),xn(e,"SID",n.J),xn(e,"CI",n.N?"0":"1"),xn(e,"AID",n.U),Cm(n,e),xn(e,"TYPE","xmlhttp"),n.o&&n.s&&Dm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=vm(Ja(e)),t.s=null,t.U=!0,ov(t,n)}function Tm(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Xf(n,e){var t=null;if(n.g==e){Tm(n),Sv(n),n.g=null;var r=2}else{if(!Em(n.i,e))return;t=e.D,Vw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ri(r=Uf(),new Dw(r,t,e,o)),Cv(n)}else Ww(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function zw(n,e){return!(mv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Bf(ei(n.Ha,n,e),ep(n,n.C)),n.C++,0)))}(n,e)||2==r&&Av(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:vn(n,5);break;case 4:vn(n,10);break;case 3:vn(n,6);break;default:vn(n,2)}}function ep(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function vn(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ei(n.jb,n);t||(t=new Ac("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Ds(t,"https"),vm(t)),function tC(n,e){const t=new Vf;if(At.Image){const r=new Image;r.onload=Xu(bm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xu(bm,t,r,"TestLoadImage: error",!1,e),r.onabort=Xu(bm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xu(bm,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bi(2);n.G=0,n.j&&n.j.va(e),oC(n),sC(n)}function oC(n){n.G=0,n.I=-1,n.j&&((0!=Uw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ts(n.l),n.l.length=0),n.j.ua())}function Mv(n,e,t){let r=function YD(n){return n instanceof Ac?Ja(n):new Ac(n,void 0)}(t);if(""!=r.i)e&&ns(r,e+"."+r.i),rs(r,r.m);else{const o=At.location;r=function QD(n,e,t,r){var o=new Ac(null,void 0);return n&&Ds(o,n),e&&ns(o,e),t&&rs(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&nl(n.aa,function(o,u){xn(r,u,o)}),t=n.sa,(e=n.D)&&t&&xn(r,e,t),xn(r,"VER",n.ma),Cm(n,r),r}function Kw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ba&&!n.qa?new Wf({ib:!0}):n.qa)).L=n.H,e}function Zw(){}function tp(){if(vc&&!(10<=Number(pw)))throw Error("Environmental error: no available transport.")}function is(n,e){jr.call(this),this.g=new qw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Xd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rh(this)}function xv(n){hm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Nv(){fm.call(this),this.status=1}function rh(n){this.g=n}(Je=mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pm.g(),this.C=function iv(n){return n.h||(n.h=n.i())}(this.u?this.u:pm),this.g.onreadystatechange=ei(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void vv(this,u)}n=t||"";const o=new Tc(this.headers);r&&lv(r,function(u,c){o.set(c,u)}),r=function fc(n){e:{var e=Hw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=At.FormData&&n instanceof At.FormData,!(0<=Jd(iC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bv(this),0<this.B&&((this.K=function $w(n){return vc&&function $D(){return function lw(n){var e=jD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pc(String(Pf)).split("."),t=pc("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=tl(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||tl(0==o[2].length,0==u[2].length)||tl(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ei(this.pa,this)):this.A=th(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){vv(this,u)}},Je.pa=function(){void 0!==N_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ri(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ri(this,"complete"),ri(this,"abort"),Yf(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yf(this,!0)),mr.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?wv(this):this.cb())},Je.cb=function(){wv(this)},Je.ba=function(){try{return 2<ga(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nC(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=qw.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new gm(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=yc(u),k_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_t(this,o,e),xn(t=Ja(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),Cm(this,t),this.o&&u&&Dm(t,this.o,u),wm(this.i,o),this.Ra&&xn(t,"TYPE","init"),this.ja?(xn(t,"$req",e),xn(t,"SID","null"),o.$=!0,rr(o,t,null)):rr(o,t,e),this.G=2}}else 3==this.G&&(n?Tv(this,n):0==this.l.length||gv(this.i)||Tv(this))},Je.Ga=function(){if(this.u=null,Jf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Bf(ei(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Bi(10),eu(this),Jf(this))},Je.ab=function(){null!=this.v&&(this.v=null,eu(this),Av(this),Bi(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Bi(2)):(this.h.info("Failed to ping google.com"),Bi(1))},(Je=Zw.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},tp.prototype.g=function(n,e){return new is(n,e)},ti(is,jr),is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ff(ei(n.hb,n,e))),Bi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Mv(n,null,n.W),Cv(n)},is.prototype.close=function(){Dv(this.g)},is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Qf(this.g,e)}else this.v?((e={}).__data__=om(n),Qf(this.g,e)):Qf(this.g,n)},is.prototype.M=function(){this.g.j=null,delete this.j,Dv(this.g),delete this.g,is.Z.M.call(this)},ti(xv,hm),ti(Nv,fm),ti(rh,Zw),rh.prototype.xa=function(){ri(this.g,"a")},rh.prototype.wa=function(n){ri(this.g,new xv(n))},rh.prototype.va=function(n){ri(this.g,new Nv(n))},rh.prototype.ua=function(){ri(this.g,"b")},tp.prototype.createWebChannel=tp.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,cm.COMPLETE="complete",sv.EventType=nh,nh.OPEN="a",nh.CLOSE="b",nh.ERROR="c",nh.MESSAGE="d",jr.prototype.listen=jr.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.La,mr.prototype.getLastErrorCode=mr.prototype.Da,mr.prototype.getStatus=mr.prototype.ba,mr.prototype.getResponseJson=mr.prototype.Qa,mr.prototype.getResponseText=mr.prototype.ga,mr.prototype.send=mr.prototype.ea;var aC=da.createWebChannelTransport=function(){return new tp},uC=da.getStatEventTarget=function(){return Uf()},Mc=da.ErrorCode=jf,lC=da.EventType=cm,cC=da.Event=rl,Yw=da.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Am=da.FetchXmlHttpFactory=Wf,np=da.WebChannel=sv,Qw=da.XhrIo=mr;const Rv="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let ma="9.6.10";const oo=new Qa.Yd("@firebase/firestore");function Ov(){return oo.logLevel}function Pe(n,...e){if(oo.logLevel<=Qa.in.DEBUG){const t=e.map(Sm);oo.debug(`Firestore (${ma}): ${n}`,...t)}}function ir(n,...e){if(oo.logLevel<=Qa.in.ERROR){const t=e.map(Sm);oo.error(`Firestore (${ma}): ${n}`,...t)}}function ih(n,...e){if(oo.logLevel<=Qa.in.WARN){const t=e.map(Sm);oo.warn(`Firestore (${ma}): ${n}`,...t)}}function Sm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+n;throw ir(e),new Error(e)}function Ct(n,e){n||tt()}function qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Kt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class Mm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pC{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=I=>this.i!==o?(o=this.i,t(I)):Promise.resolve();let c=new si;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new si,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=c;e.enqueueRetryable((0,ve.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new si)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new fC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new ii(e)}}class gC{constructor(e,t,r){this.type="FirstParty",this.user=ii.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Xw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new sh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function yC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Cs.A=-1;class eb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=yC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function oh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function tb(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new bn(0,0))}static max(){return new bt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Pv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class rp{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends rp{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const _C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends rp{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return _C.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(c=!c,o++):"."!==g||c?(r+=g,o++):(u(),o++)}if(u(),c)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class ah{constructor(e){this.fields=e,e.sort(yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function al(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=vC.exec(n);if(Ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tu(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Fv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lv(n){const e=n.mapValue.fields.__previous_value__;return Fv(e)?Lv(e):e}function ip(n){const e=al(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}class EC{constructor(e,t,r,o,u,c,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}function Nc(n){return null==n}function sp(n){return 0===n&&1/n==-1/0}function rb(n){return"number"==typeof n&&Number.isInteger(n)&&!sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(Qt.fromString(e))}static fromName(e){return new je(Qt.fromString(e).popFirst(5))}static empty(){return new je(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Qt(e.slice()))}}const ib={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vv={nullValue:"NULL_VALUE"};function ul(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fv(n)?4:ab(n)?9:10:tt()}function ya(n,e){if(n===e)return!0;const t=ul(n);if(t!==ul(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ip(n).isEqual(ip(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=al(r.timestampValue),c=al(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,tu(n.bytesValue).isEqual(tu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Qn(r.geoPointValue.latitude)===Qn(o.geoPointValue.latitude)&&Qn(r.geoPointValue.longitude)===Qn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Qn(r.integerValue)===Qn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Qn(r.doubleValue),c=Qn(o.doubleValue);return u===c?sp(u)===sp(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return oh(n.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Pv(u)!==Pv(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!ya(u[g],c[g])))return!1;return!0}(n,e);default:return tt()}var o}function op(n,e){return void 0!==(n.values||[]).find(t=>ya(t,e))}function ru(n,e){if(n===e)return 0;const t=ul(n),r=ul(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Qn(o.integerValue||o.doubleValue),g=Qn(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return sb(n.timestampValue,e.timestampValue);case 4:return sb(ip(n),ip(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=tu(o),g=tu(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),g=u.split("/");for(let v=0;v<c.length&&v<g.length;v++){const I=Gt(c[v],g[v]);if(0!==I)return I}return Gt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Gt(Qn(o.latitude),Qn(u.latitude));return 0!==c?c:Gt(Qn(o.longitude),Qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],g=u.values||[];for(let v=0;v<c.length&&v<g.length;++v){const I=ru(c[v],g[v]);if(I)return I}return Gt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const c=o.fields||{},g=Object.keys(c),v=u.fields||{},I=Object.keys(v);g.sort(),I.sort();for(let S=0;S<g.length&&S<I.length;++S){const x=Gt(g[S],I[S]);if(0!==x)return x;const V=ru(c[g[S]],v[I[S]]);if(0!==V)return V}return Gt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw tt()}}function sb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=al(n),r=al(e),o=Gt(t.seconds,r.seconds);return 0!==o?o:Gt(t.nanos,r.nanos)}function uh(n){return Uv(n)}function Uv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=al(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tu(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=Uv(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${Uv(r.fields[g])}`;return u+"}"}(n.mapValue):tt();var e}function ll(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ap(n){return!!n&&"integerValue"in n}function lh(n){return!!n&&"arrayValue"in n}function xm(n){return!!n&&"nullValue"in n}function ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nm(n){return!!n&&"mapValue"in n}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ab(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bv(n,e){return void 0===n?e:void 0===e||ru(n,e)>0?n:e}function ub(n,e){return void 0===n?e:void 0===e||ru(n,e)<0?n:e}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=yr.emptyPath(),r={},o=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}c?r[g.lastSegment()]=Rc(c):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Nm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Nm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){xc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new oi(Rc(this.value))}}function lb(n){const e=[];return xc(n.fields,(t,r)=>{const o=new yr([t]);if(Nm(r)){const u=lb(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new ah(e)}class In{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new In(e,0,bt.min(),bt.min(),oi.empty(),0)}static newFoundDocument(e,t,r){return new In(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new In(e,2,t,bt.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,bt.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jv{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function $v(n){return n.fields.find(e=>2===e.kind)}function iu(n){return n.fields.filter(e=>2!==e.kind)}jv.UNKNOWN_ID=-1;class Rm{constructor(e,t){this.fieldPath=e,this.kind=t}}class _a{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _a(0,cl.min())}}function ch(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new cl(o,je.empty(),e)}function wC(n){return new cl(n.readTime,n.key,-1)}class cl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cl(bt.min(),je.empty(),-1)}static max(){return new cl(bt.max(),je.empty(),-1)}}function cb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class bC{constructor(e,t=null,r=[],o=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=g,this.P=null}}function db(n,e=null,t=[],r=[],o=null,u=null,c=null){return new bC(n,e,t,r,o,u,c)}function Oc(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+uh(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uh(r)).join(",")),e.P=t}return e.P}function dh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!SC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ya(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qv(n.startAt,e.startAt)&&qv(n.endAt,e.endAt)}function up(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function hh(n,e){return n.filters.filter(t=>t instanceof vr&&t.field.isEqual(e))}class vr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new lp(e,t,r):"array-contains"===t?new CC(e,r):"in"===t?new TC(e,r):"not-in"===t?new Gv(e,r):"array-contains-any"===t?new AC(e,r):new vr(e,t,r)}static V(e,t,r){return"in"===t?new DC(e,r):new hb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ru(t,this.value)):null!==t&&ul(this.value)===ul(t)&&this.v(ru(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lp extends vr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class DC extends vr{constructor(e,t){super(e,"in",t),this.keys=Hv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hb extends vr{constructor(e,t){super(e,"not-in",t),this.keys=Hv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class CC extends vr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lh(t)&&op(t.arrayValue,this.value)}}class TC extends vr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&op(this.value.arrayValue,t)}}class Gv extends vr{constructor(e,t){super(e,"not-in",t)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!op(this.value.arrayValue,t)}}class AC extends vr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>op(this.value.arrayValue,r))}}class Pc{constructor(e,t){this.position=e,this.inclusive=t}}class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function SC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function kc(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):ru(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function qv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ya(n.position[t],e.position[t]))return!1;return!0}class ss{constructor(e,t=null,r=[],o=[],u=null,c="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=v,this.D=null,this.C=null}}function MC(n,e,t,r,o,u,c,g){return new ss(n,e,t,r,o,u,c,g)}function Fc(n){return new ss(n)}function Om(n){return!Nc(n.limit)&&"F"===n.limitType}function zv(n){return!Nc(n.limit)&&"L"===n.limitType}function Pm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fb(n){for(const e of n.filters)if(e.S())return e.field;return null}function km(n){return null!==n.collectionGroup}function dl(n){const e=qe(n);if(null===e.D){e.D=[];const t=fb(e),r=Pm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new fh(t)),e.D.push(new fh(yr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new fh(yr.keyField(),u))}}}return e.D}function ao(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=db(e.path,e.collectionGroup,dl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of dl(e))t.push(new fh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Pc(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Pc(e.startAt.position,!e.startAt.inclusive):null;e.C=db(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Wv(n,e,t){return new ss(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cp(n,e){return dh(ao(n),ao(e))&&n.limitType===e.limitType}function pb(n){return`${Oc(ao(n))}|lt:${n.limitType}`}function Kv(n){return`Query(target=${function IC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uh(r.value)}`;var r}).join(", ")}]`),Nc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>uh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>uh(t)).join(",")),`Target(${e})`}(ao(n))}; limitType=${n.limitType})`}function Zv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const g=kc(o,u,c);return o.inclusive?g<=0:g<0}(t.startAt,dl(t),r)||t.endAt&&!function(o,u,c){const g=kc(o,u,c);return o.inclusive?g>=0:g>0}(t.endAt,dl(t),r)));var t,r}function gb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mb(n){return(e,t)=>{let r=!1;for(const o of dl(n)){const u=xC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function xC(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,c){const g=u.data.field(o),v=c.data.field(o);return null!==g&&null!==v?ru(g,v):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function yb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function ph(n){return{integerValue:""+n}}function Yv(n,e){return rb(e)?ph(e):yb(n,e)}class dp{constructor(){this._=void 0}}function _b(n,e,t){return n instanceof Lc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Vc?Jv(n,e):n instanceof Uc?Eb(n,e):function(r,o){const u=Qv(r,o),c=wb(u)+wb(r.k);return ap(u)&&ap(r.k)?ph(c):yb(r.M,c)}(n,e)}function vb(n,e,t){return n instanceof Vc?Jv(n,e):n instanceof Uc?Eb(n,e):t}function Qv(n,e){return n instanceof gh?ap(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lc extends dp{}class Vc extends dp{constructor(e){super(),this.elements=e}}function Jv(n,e){const t=mh(e);for(const r of n.elements)t.some(o=>ya(o,r))||t.push(r);return{arrayValue:{values:t}}}class Uc extends dp{constructor(e){super(),this.elements=e}}function Eb(n,e){let t=mh(e);for(const r of n.elements)t=t.filter(o=>!ya(o,r));return{arrayValue:{values:t}}}class gh extends dp{constructor(e,t){super(),this.M=e,this.k=t}}function wb(n){return Qn(n.integerValue||n.doubleValue)}function mh(n){return lh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hp{constructor(e,t){this.field=e,this.transform=t}}class va{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hl{}function NC(n,e,t){n instanceof gp?function(r,o,u){const c=r.value.clone(),g=nE(r.fieldTransforms,o,u.transformResults);c.setAll(g),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Bc?function(r,o,u){if(!yh(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=nE(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(tE(r)),g.setAll(c),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function eE(n,e,t){var o;n instanceof gp?function(r,o,u){if(!yh(r.precondition,o))return;const c=r.value.clone(),g=Fm(r.fieldTransforms,u,o);c.setAll(g),o.convertToFoundDocument(pp(o),c).setHasLocalMutations()}(n,e,t):n instanceof Bc?function(r,o,u){if(!yh(r.precondition,o))return;const c=Fm(r.fieldTransforms,u,o),g=o.data;g.setAll(tE(r)),g.setAll(c),o.convertToFoundDocument(pp(o),g).setHasLocalMutations()}(n,e,t):yh(n.precondition,o=e)&&o.convertToNoDocument(bt.min())}function RC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Qv(r.transform,o||null);null!=u&&(null==t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function fp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&oh(t,r,(o,u)=>function Xv(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vc&&r instanceof Vc||t instanceof Uc&&r instanceof Uc?oh(t.elements,r.elements,ya):t instanceof gh&&r instanceof gh?ya(t.k,r.k):t instanceof Lc&&r instanceof Lc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function pp(n){return n.isFoundDocument()?n.version:bt.min()}class gp extends hl{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Bc extends hl{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function tE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nE(n,e,t){const r=new Map;Ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,g=e.data.field(u.field);r.set(u.field,vb(c,g,t[o]))}return r}function Fm(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,_b(u,c,e))}return r}class _h extends hl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class rE extends hl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class OC{constructor(e){this.count=e}}var Or,Yt;function Lm(n){switch(n){default:return tt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function iE(n){if(void 0===n)return ir("GRPC error has no .code"),le.UNKNOWN;switch(n){case Or.OK:return le.OK;case Or.CANCELLED:return le.CANCELLED;case Or.UNKNOWN:return le.UNKNOWN;case Or.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Or.INTERNAL:return le.INTERNAL;case Or.UNAVAILABLE:return le.UNAVAILABLE;case Or.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Or.NOT_FOUND:return le.NOT_FOUND;case Or.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Or.ABORTED:return le.ABORTED;case Or.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Or.DATA_LOSS:return le.DATA_LOSS;default:return tt()}}(Yt=Or||(Or={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}class qn{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vm(this.root,e,this.comparator,!0)}}class Vm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ai.RED,this.left=null!=o?o:ai.EMPTY,this.right=null!=u?u:ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ai(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ai.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1,ai.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ai(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bb(this.data.getIterator())}getIteratorFrom(e){return new bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jc(n){return n.hasNext()?n.getNext():void 0}const sE=new qn(je.comparator);function Ts(){return sE}const PC=new qn(je.comparator);function Um(){return PC}function vh(){return new Ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const kC=new qn(je.comparator),Ib=new Nn(je.comparator);function dn(...n){let e=Ib;for(const t of n)e=e.add(t);return e}const FC=new Nn(Gt);function mp(){return FC}class yp{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Pr.createSynthesizedTargetChangeForCurrentChange(e,t)),new yp(bt.min(),r,mp(),Ts(),dn())}}class Pr{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pr(_r.EMPTY_BYTE_STRING,t,dn(),dn(),dn())}}class su{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Db{constructor(e,t){this.targetId=e,this.$=t}}class Cb{constructor(e,t,r=_r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class LC{constructor(){this.B=0,this.L=Bm(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=dn(),t=dn(),r=dn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Pr(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=Bm()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class _p{constructor(e){this.nt=e,this.st=new Map,this.it=Ts(),this.rt=Tb(),this.ot=new Nn(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(up(u))if(0===r){const c=new je(u.path);this.ct(t,c,In.newNoDocument(c,bt.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const g=this.wt(c);if(g){if(u.current&&up(g.target)){const v=new je(g.target.path);null!==this.it.get(v)||this.It(c,v)||this.ct(c,v,In.newNoDocument(v,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=dn();this.rt.forEach((u,c)=>{let g=!0;c.forEachWhile(v=>{const I=this.wt(v);return!I||2===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new yp(e,t,this.ot,this.it,r);return this.it=Ts(),this.rt=Tb(),this.ot=new Nn(Gt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new LC,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Nn(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new LC),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Tb(){return new qn(je.comparator)}function Bm(){return new qn(je.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},Ab={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class UC{constructor(e,t){this.databaseId=e,this.N=t}}function vp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jm(n,e){return n.N?e.toBase64():e.toUint8Array()}function Sb(n,e){return vp(n,e.toTimestamp())}function kr(n){return Ct(!!n),bt.fromTimestamp(function(e){const t=al(e);return new bn(t.seconds,t.nanos)}(n))}function Eh(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $m(n){const e=Qt.fromString(n);return Ct(Vb(e)),e}function Hm(n,e){return Eh(n.databaseId,e.path)}function Oo(n,e){const t=$m(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(uE(t))}function oE(n,e){return Eh(n.databaseId,e)}function aE(n){const e=$m(n);return 4===e.length?Qt.emptyPath():uE(e)}function fl(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uE(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Mb(n,e,t){return{name:Hm(n,e),fields:t.value.mapValue.fields}}function Gm(n,e,t){const r=Oo(n,e.name),o=kr(e.updateTime),u=new oi({mapValue:{fields:e.fields}}),c=In.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Ep(n,e){let t;if(e instanceof gp)t={update:Mb(n,e.key,e.value)};else if(e instanceof _h)t={delete:Hm(n,e.key)};else if(e instanceof Bc)t={update:Mb(n,e.key,e.data),updateMask:Lb(e.fieldMask)};else{if(!(e instanceof rE))return tt();t={verify:Hm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Lc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Uc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Sb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function cE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Er.updateTime(kr(o.updateTime)):void 0!==o.exists?Er.exists(o.exists):Er.none():Er.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let g=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),g=new Lc):"appendMissingElements"in c?g=new Vc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new Uc(c.removeAllFromArray.values||[]):"increment"in c?g=new gh(u,c.increment):tt();const v=yr.fromServerFormat(c.fieldPath);return new hp(v,g)}(n,o)):[];var o;if(e.update){const o=Oo(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ah((e.updateMask.fieldPaths||[]).map(I=>yr.fromServerFormat(I)));return new Bc(o,u,c,t,r)}return new gp(o,u,t,r)}if(e.delete){const o=Oo(n,e.delete);return new _h(o,t)}if(e.verify){const o=Oo(n,e.verify);return new rE(o,t)}return tt()}function dE(n,e){return{documents:[oE(n,e.path)]}}function Nb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const I=v.map(S=>function(x){if("=="===x.op){if(ob(x.value))return{unaryFilter:{field:wh(x.field),op:"IS_NAN"}};if(xm(x.value))return{unaryFilter:{field:wh(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(ob(x.value))return{unaryFilter:{field:wh(x.field),op:"IS_NOT_NAN"}};if(xm(x.value))return{unaryFilter:{field:wh(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wh(x.field),op:Pb(x.op),value:x.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:wh((S=I).field),direction:BC(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.N||Nc(I)?I:{value:I});var I,g,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function hE(n){let e=aE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ct(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Ob(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new fh($c((x=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let g=null;t.limit&&(g=function(S){let x;return x="object"==typeof S?S.value:S,Nc(x)?null:x}(t.limit));let v=null;var S;t.startAt&&(v=new Pc((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new Pc(S.values||[],!S.before)}(t.endAt)),MC(e,o,c,u,g,"F",v,I)}function Ob(n){return n?void 0!==n.unaryFilter?[Fb(n)]:void 0!==n.fieldFilter?[kb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ob(e)).reduce((e,t)=>e.concat(t)):tt():[]}function BC(n){return VC[n]}function Pb(n){return Ab[n]}function wh(n){return{fieldPath:n.canonicalString()}}function $c(n){return yr.fromServerFormat(n.fieldPath)}function kb(n){return vr.create($c(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Fb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=$c(n.unaryFilter.field);return vr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=$c(n.unaryFilter.field);return vr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$c(n.unaryFilter.field);return vr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$c(n.unaryFilter.field);return vr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function Lb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Vb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $r(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fE(e)),e=jS(n.get(t),e);return fE(e)}function jS(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function fE(n){return n+"\x01\x01"}function wa(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&tt(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:tt()}u=c+2}return new Qt(r)}const jC=["userId","batchId"];function pE(n,e){return[n,$r(e)]}function $C(n,e,t){return[n,$r(e),t]}const $S={},HS=["prefixPath","collectionGroup","readTime","documentId"],GS=["prefixPath","collectionGroup","documentId"],qS=["collectionGroup","readTime","prefixPath","documentId"],qm=["canonicalId","targetId"],zS=["targetId","path"],Ub=["path","targetId"],gE=["collectionId","parent"],Bb=["indexId","uid"],jb=["uid","sequenceNumber"],WS=["indexId","uid","arrayValue","directionalValue","documentKey"],mE=["indexId","uid","documentKey"],$b=["userId","collectionPath","documentId"],Hb=["userId","collectionPath","largestBatchId"],Gb=["userId","collectionGroup","largestBatchId"],HC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qb=[...HC,"documentOverlays"],zb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yE=[...zb,"indexConfiguration","indexState","indexEntries"],Wb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,u=0,c=!1;e.forEach(g=>{++o,g.next(()=>{++u,c&&u===o&&t()},v=>r(v))}),c=!0,u===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class _E{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new si,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new wp(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=As(r.target.error);this.At.reject(new wp(e,o))}}static open(e,t,r,o){try{return new _E(t,e.transaction(o,r))}catch(u){throw new wp(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zC(t)}}class Po{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Po.Vt((0,Kt.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),ou(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Kt.hl)())return!1;if(Po.St())return!0;const e=(0,Kt.z$)(),t=Po.Vt(e),r=0<t&&t<10,o=Po.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new wp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;o("VersionError"===g.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new wp(e,g))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const v=_E.open(u.db,e,c?"readonly":"readwrite",r),I=o(v).next(S=>(v.bt(),S)).catch(S=>(v.abort(S),fe.reject(S))).toPromise();return I.catch(()=>{}),yield v.Rt,I}catch(v){const I="FirebaseError"!==v.name&&g<3;if(Pe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),u.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qC{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ou(this.Ft.delete())}}class wp extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bh(n){return"IndexedDbTransactionError"===n.name}class zC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ou(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),ou(this.store.add(e))}get(e){return ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),ou(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),ou(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Gt(o,(c,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new fe((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(u,c,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=u=>{const c=As(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new fe((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void o();const v=new qC(g),I=t(g.primaryKey,g.value,v);if(I instanceof fe){const S=I.catch(x=>(v.done(),fe.reject(x)));r.push(S)}v.isDone?o():null===v.Lt?g.continue():g.continue(v.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ou(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=As(r.target.error);t(o)}})}let Kb=!1;function As(n){const e=Po.Vt((0,Kt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kb||(Kb=!0,setTimeout(()=>{throw r},0)),r}}return n}class Zb extends GC{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function wr(n,e){const t=qe(n);return Po.xt(t.Ht,e)}class vE{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&NC(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&eE(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&eE(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,(t,r)=>fp(t,r))&&oh(this.baseMutations,e.baseMutations,(t,r)=>fp(t,r))}}class EE{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ct(e.mutations.length===r.length);let o=kC;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new EE(e,t,r,o)}}class bp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class au{constructor(e,t,r,o,u=bt.min(),c=bt.min(),g=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wE{constructor(e){this.Jt=e}}function bE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ip(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hm(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:vp(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hc(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Hc(e.version)}}var o,u;return r}function Ip(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gc(n){const e=new bn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function pl(n,e){const t=(e.baseMutations||[]).map(u=>cE(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>cE(n.Jt,u)),o=bn.fromMillis(e.localWriteTimeMs);return new vE(e.batchId,o,t,r)}function ji(n){const e=Gc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Gc(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(Ct(1===(o=n.query).documents.length),r=ao(Fc(aE(o.documents[0])))):r=ao(hE(n.query)),new au(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function Yb(n,e){const t=Hc(e.snapshotVersion),r=Hc(e.lastLimboFreeSnapshotVersion);let o;o=up(e.target)?dE(n.Jt,e.target):Nb(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Qb(n){const e=hE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wv(e,e.limit,"L"):e}function IE(n,e){return new bp(e.largestBatchId,cE(n.Jt,e.overlayMutation))}function DE(n,e){const t=e.path.lastSegment();return[n,$r(e.path.popLast()),t]}class KC{getBundleMetadata(e,t){return Jb(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Gc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Jb(e).put({bundleId:(r=t).id,createTime:Hc(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return CE(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Qb(o.bundledQuery),readTime:Gc(o.readTime)};var o})}saveNamedQuery(e,t){return CE(e).put({name:(r=t).name,readTime:Hc(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Jb(n){return wr(n,"bundles")}function CE(n){return wr(n,"namedQueries")}class TE{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new TE(e,t.uid||"")}getOverlay(e,t){return zm(e).get(DE(this.userId,t)).next(r=>r?IE(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const g=new bp(t,c);o.push(this.Xt(e,g))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add($r(c.getCollectionPath())));const u=[];return o.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(zm(e).Qt("collectionPathOverlayIndex",g))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=vh(),u=$r(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return zm(e).qt("collectionPathOverlayIndex",c).next(g=>{for(const v of g){const I=IE(this.M,v);o.set(I.getKey(),I)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=vh();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zm(e).Wt({index:"collectionGroupOverlayIndex",range:g},(v,I,S)=>{const x=IE(this.M,I);u.size()<o||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return zm(e).put(function(r,o,u){const[c,g,v]=DE(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ep(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function zm(n){return wr(n,"documentOverlays")}class qc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Qn(e.integerValue));else if("doubleValue"in e){const r=Qn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),sp(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(tu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?ab(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Xb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function eI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Xb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}qc.fe=new qc;class ZC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=eI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=eI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class tI{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class AE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ih{constructor(){this.De=new ZC,this.Ce=new tI(this.De),this.xe=new AE(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class uu{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new uu(this.indexId,this.documentKey,this.arrayValue,r)}}function zc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=SE(n.arrayValue,e.arrayValue),0!==t?t:(t=SE(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function SE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=$v(e);if(void 0!==t&&!this.Be(t))return!1;const r=iu(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class YC{constructor(){this.qe=new ME}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class ME{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Nn(Qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Nn(Qt.comparator)).toArray()}}const xE=new Uint8Array(0);class KS{constructor(e){this.user=e,this.Ge=new ME,this.Ke=new Ea(t=>Oc(t),(t,r)=>dh(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:$r(o)};return NE(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[tb(t),""],!1,!0);return NE(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(wa(c.parent))}return r})}addFieldIndex(e,t){const r=Wm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Wm(e),o=Km(e),u=Dp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Dp(e);let o=!0;const u=new Map;return fe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(g=>{o&&(o=!!g),u.set(c,g)})).next(()=>{if(o){let c=dn();return fe.forEach(u,(g,v)=>{var I;Pe("IndexedDbIndexManager",`Using index ${I=g,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(ze=>`${ze.fieldPath}:${ze.kind}`).join(",")}`} to execute ${Oc(t)}`);const S=function(ze,Ut){const nt=$v(Ut);if(void 0===nt)return null;for(const Ot of hh(ze,nt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(v,g),x=function(ze,Ut){const nt=new Map;for(const Ot of iu(Ut))for(const Tt of hh(ze,Ot.fieldPath))switch(Tt.op){case"==":case"in":nt.set(Ot.fieldPath.canonicalString(),Tt.value);break;case"not-in":case"!=":return nt.set(Ot.fieldPath.canonicalString(),Tt.value),Array.from(nt.values())}return null}(v,g),V=function(ze,Ut){const nt=[];let Ot=!0;for(const Vn of iu(Ut)){let sr,$i=!0;for(const En of hh(ze,Vn.fieldPath)){let Un,Ta=!0;switch(En.op){case"<":case"<=":Un="nullValue"in(Tt=En.value)?Vv:"booleanValue"in Tt?{booleanValue:!1}:"integerValue"in Tt||"doubleValue"in Tt?{doubleValue:NaN}:"timestampValue"in Tt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Tt?{stringValue:""}:"bytesValue"in Tt?{bytesValue:""}:"referenceValue"in Tt?ll(nu.empty(),je.empty()):"geoPointValue"in Tt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Tt?{arrayValue:{}}:"mapValue"in Tt?{mapValue:{}}:tt();break;case"==":case"in":case">=":Un=En.value;break;case">":Un=En.value,Ta=!1;break;case"!=":case"not-in":Un=Vv}Bv(sr,Un)===Un&&(sr=Un,$i=Ta)}if(null!==ze.startAt)for(let En=0;En<ze.orderBy.length;++En)if(ze.orderBy[En].field.isEqual(Vn.fieldPath)){const Un=ze.startAt.position[En];Bv(sr,Un)===Un&&(sr=Un,$i=ze.startAt.inclusive);break}if(void 0===sr)return null;nt.push(sr),Ot&&(Ot=$i)}var Tt;return new Pc(nt,Ot)}(v,g),H=function(ze,Ut){const nt=[];let Ot=!0;for(const Vn of iu(Ut)){let sr,$i=!0;for(const En of hh(ze,Vn.fieldPath)){let Un,Ta=!0;switch(En.op){case">=":case">":Un="nullValue"in(Tt=En.value)?{booleanValue:!1}:"booleanValue"in Tt?{doubleValue:NaN}:"integerValue"in Tt||"doubleValue"in Tt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Tt?{stringValue:""}:"stringValue"in Tt?{bytesValue:""}:"bytesValue"in Tt?ll(nu.empty(),je.empty()):"referenceValue"in Tt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Tt?{arrayValue:{}}:"arrayValue"in Tt?{mapValue:{}}:"mapValue"in Tt?ib:tt(),Ta=!1;break;case"==":case"in":case"<=":Un=En.value;break;case"<":Un=En.value,Ta=!1;break;case"!=":case"not-in":Un=ib}ub(sr,Un)===Un&&(sr=Un,$i=Ta)}if(null!==ze.endAt)for(let En=0;En<ze.orderBy.length;++En)if(ze.orderBy[En].field.isEqual(Vn.fieldPath)){const Un=ze.endAt.position[En];ub(sr,Un)===Un&&(sr=Un,$i=ze.endAt.inclusive);break}if(void 0===sr)return null;nt.push(sr),Ot&&(Ot=$i)}var Tt;return new Pc(nt,Ot)}(v,g),z=this.je(g,v,V),ye=this.je(g,v,H),Fe=this.We(g,v,x),ft=this.ze(g.indexId,S,z,!!V&&V.inclusive,ye,!!H&&H.inclusive,Fe);return fe.forEach(ft,ze=>r.Kt(ze,t.limit).next(Ut=>{Ut.forEach(nt=>{c=c.add(new je(wa(nt.documentKey)))})}))}).next(()=>c)}return fe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,u,c,g){const v=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),I=v/(null!=t?t.length:1),S=[];for(let x=0;x<v;++x){const V=t?this.He(t[x/I]):xE,H=r?this.Je(e,V,r[x%I],o):this.Ye(e),z=u?this.Xe(e,V,u[x%I],c):this.Ye(e+1);S.push(...this.createRange(H,z,g.map(ye=>this.Je(e,V,ye,!0))))}return S}Je(e,t,r,o){const u=new uu(e,je.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new uu(e,je.empty(),t,r);return o?u.ke():u}Ye(e){return new uu(e,je.empty(),xE,xE)}getFieldIndex(e,t){const r=new nI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const c=u.filter(g=>r.$e(g));return c.sort((g,v)=>v.fields.length-g.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Ih;for(const o of iu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);qc.fe.Zt(u,c)}return r.Se()}He(e){const t=new Ih;return qc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Ih);let u=0;for(const c of iu(e)){const g=r[u++];for(const v of o)if(this.tn(t,c.fieldPath)&&lh(g))o=this.en(o,c,g);else{const I=v.Ne(c.kind);qc.fe.Zt(g,I)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of o){const v=new Ih;v.seed(g.Se()),qc.fe.Zt(c,v.Ne(t.kind)),u.push(v)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof vr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wm(e),o=Km(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return fe.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{c.push(function(I,S){const x=S?new _a(S.sequenceNumber,new cl(Gc(S.readTime),new je(wa(S.documentKey)),S.largestBatchId)):_a.empty(),V=I.fields.map(([H,z])=>new Rm(yr.fromServerFormat(H),z));return new jv(I.indexId,I.collectionGroup,V,x)}(g,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Wm(e),u=Km(e);return this.sn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>fe.forEach(g,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Hc((V=r).readTime),documentKey:$r(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?fe.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),fe.forEach(g,v=>this.rn(e,o,v).next(I=>{const S=this.on(u,v);return I.isEqual(S)?fe.resolve():this.un(e,u,I,S)}))))})}an(e,t,r){return Dp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:$r(t.key.path)})}cn(e,t,r){return Dp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,$r(t.key.path)])}rn(e,t,r){const o=Dp(e);let u=new Nn(zc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,$r(t.path)])},(c,g)=>{u=u.add(new uu(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}on(e,t){let r=new Nn(zc);const o=this.Ze(t,e);if(null==o)return r;const u=$v(t);if(null!=u){const c=e.data.field(u.fieldPath);if(lh(c))for(const g of c.arrayValue.values||[])r=r.add(new uu(t.indexId,e.key,this.He(g),o))}else r=r.add(new uu(t.indexId,e.key,xE,o));return r}un(e,t,r,o){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,g,v,I,S){const x=c.getIterator(),V=g.getIterator();let H=jc(x),z=jc(V);for(;H||z;){let ye=!1,Fe=!1;if(H&&z){const ft=v(H,z);ft<0?Fe=!0:ft>0&&(ye=!0)}else null!=H?Fe=!0:ye=!0;ye?(I(z),z=jc(V)):Fe?(S(H),H=jc(x)):(H=jc(x),z=jc(V))}}(r,o,zc,c=>{u.push(this.an(e,t,c))},c=>{u.push(this.cn(e,t,c))}),fe.waitFor(u)}sn(e){let t=1;return Km(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>zc(c,g)).filter((c,g,v)=>!g||0!==zc(c,v[g-1]));const o=[];o.push(e);for(const c of r){const g=zc(c,e),v=zc(c,t);if(0===g)o[0]=e.ke();else if(g>0&&v<0)o.push(c),o.push(c.ke());else if(v>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,""],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,""]));return u}}function NE(n){return wr(n,"collectionParents")}function Dp(n){return wr(n,"indexEntries")}function Wm(n){return wr(n,"indexConfiguration")}function Km(n){return wr(n,"indexState")}const QC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function JC(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const v=r.Wt({range:c},(S,x,V)=>(g++,V.delete()));u.push(v.next(()=>{Ct(1===g)}));const I=[];for(const S of t.mutations){const x=$C(e,S.key.path,t.batchId);u.push(o.delete(x)),I.push(S.key)}return fe.waitFor(u).next(()=>I)}function RE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class rI{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new rI(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ko(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Dh(e),c=ko(e);return c.add({}).next(g=>{Ct("number"==typeof g);const v=new vE(g,t,r,o),I=function(V,H,z){const ye=z.baseMutations.map(ft=>Ep(V.Jt,ft)),Fe=z.mutations.map(ft=>Ep(V.Jt,ft));return{userId:H,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ye,mutations:Fe}}(this.M,this.userId,v),S=[];let x=new Nn((V,H)=>Gt(V.canonicalString(),H.canonicalString()));for(const V of o){const H=$C(this.userId,V.key.path,g);x=x.add(V.key.path.popLast()),S.push(c.put(I)),S.push(u.put(H,$S))}return x.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.hn[g]=v.keys()}),fe.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return ko(e).get(t).next(r=>r?(Ct(r.userId===this.userId),pl(this.M,r)):null)}ln(e,t){return this.hn[t]?fe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ko(e).Wt({index:"userMutationsIndex",range:o},(c,g,v)=>{g.userId===this.userId&&(Ct(g.batchId>=r),u=pl(this.M,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ko(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ko(e).qt("userMutationsIndex",t).next(r=>r.map(o=>pl(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pE(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Dh(e).Wt({range:o},(c,g,v)=>{const[I,S,x]=c,V=wa(S);if(I===this.userId&&t.path.isEqual(V))return ko(e).get(x).next(H=>{if(!H)throw tt();Ct(H.userId===this.userId),u.push(pl(this.M,H))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Gt);const o=[];return t.forEach(u=>{const c=pE(this.userId,u.path),g=IDBKeyRange.lowerBound(c),v=Dh(e).Wt({range:g},(I,S,x)=>{const[V,H,z]=I,ye=wa(H);V===this.userId&&u.path.isEqual(ye)?r=r.add(z):x.done()});o.push(v)}),fe.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=pE(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new Nn(Gt);return Dh(e).Wt({range:c},(v,I,S)=>{const[x,V,H]=v,z=wa(V);x===this.userId&&r.isPrefixOf(z)?z.length===o&&(g=g.add(H)):S.done()}).next(()=>this.fn(e,g))}fn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ko(e).get(u).next(c=>{if(null===c)throw tt();Ct(c.userId===this.userId),r.push(pl(this.M,c))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return JC(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Dh(e).Wt({range:r},(u,c,g)=>{if(u[0]===this.userId){const v=wa(u[1]);o.push(v)}else g.done()}).next(()=>{Ct(0===o.length)})})}containsKey(e,t){return iI(e,this.userId,t)}_n(e){return sI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iI(n,e,t){const r=pE(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Dh(n).Wt({range:u,jt:!0},(g,v,I)=>{const[S,x,V]=g;S===e&&x===o&&(c=!0),I.done()}).next(()=>c)}function ko(n){return wr(n,"mutations")}function Dh(n){return wr(n,"documentMutations")}function sI(n){return wr(n,"mutationQueues")}class gl{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new gl(0)}static gn(){return new gl(-1)}}class Wc{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new gl(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>bt.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kc(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Kc(e).Wt((c,g)=>{const v=ji(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>fe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Kc(e).Wt((r,o)=>{const u=ji(o);t(u)})}yn(e){return Zm(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}pn(e,t){return Zm(e).put("targetGlobalKey",t)}In(e,t){return Kc(e).put(Yb(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Oc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Kc(e).Wt({range:o,index:"queryTargetsIndex"},(c,g,v)=>{const I=ji(g);dh(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ba(e);return t.forEach(c=>{const g=$r(c.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,c))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=ba(e);return fe.forEach(t,u=>{const c=$r(u.path);return fe.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ba(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ba(e);let u=dn();return o.Wt({range:r,jt:!0},(c,g,v)=>{const I=wa(c[1]),S=new je(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=$r(t.path),o=IDBKeyRange.bound([r],[tb(r)],!1,!0);let u=0;return ba(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,g],v,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return Kc(e).get(t).next(r=>r?ji(r):null)}}function Kc(n){return wr(n,"targets")}function Zm(n){return wr(n,"targetGlobal")}function ba(n){return wr(n,"targetDocuments")}function Zc(n){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,ve.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==Wb)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Cp.apply(this,arguments)}function Ym([n,e],[t,r]){const o=Gt(n,t);return 0===o?Gt(e,r):o}class Qm{constructor(e){this.En=e,this.buffer=new Nn(Ym),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ym(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){bh(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Zc(o)}yield t.vn(e)}))}}class YS{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(Cs.A);const r=new Qm(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(QC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QC):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,u,c,g,v,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),Ov()<=Qa.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${x} documents in `+(I-v)+`ms\nTotal Duration: ${I-S}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class QS{constructor(e,t){this.db=e,this.garbageCollector=new YS(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return OE(e,r)}removeReference(e,t,r){return OE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return OE(e,t)}Mn(e,t){return function(r,o){let u=!1;return sI(r).zt(c=>iI(r,c,o).next(g=>(g&&(u=!0),fe.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.kn(e,(c,g)=>{if(g<=t){const v=this.Mn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),ba(e).delete([0,$r(c.path)])))});o.push(v)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return OE(e,t)}kn(e,t){const r=ba(e);let o,u=Cs.A;return r.Wt({index:"documentTargetsIndex"},([c,g],{path:v,sequenceNumber:I})=>{0===c?(u!==Cs.A&&t(new je(wa(o)),u),u=I,o=v):u=Cs.A}).next(()=>{u!==Cs.A&&t(new je(wa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function OE(n,e){return ba(n).put((r=n.currentSequenceNumber,{targetId:0,path:$r(e.path),sequenceNumber:r}));var r}class PE{constructor(){this.changes=new Ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XC{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yc(e).put(r)}removeEntry(e,t,r){return Yc(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ip(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=In.newInvalidDocument(t);return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ch(t))},(o,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:In.newInvalidDocument(t)};return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ch(t))},(o,u)=>{r={document:this.Fn(t,u),size:RE(u)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.Bn(e,t,(o,u)=>{const c=this.Fn(o,u);r=r.insert(o,c)}).next(()=>r)}Ln(e,t){let r=Ts(),o=new qn(je.comparator);return this.Bn(e,t,(u,c)=>{const g=this.Fn(u,c);r=r.insert(u,g),o=o.insert(u,RE(c))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return fe.resolve();let o=new Nn(FE);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Ch(o.first()),Ch(o.last())),c=o.getIterator();let g=c.getNext();return Yc(e).Wt({index:"documentKeyIndex",range:u},(v,I,S)=>{const x=je.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&FE(g,x)<0;)r(g,null),g=c.getNext();g&&g.isEqual(x)&&(r(g,I),g=c.hasNext()?c.getNext():null),g?S.Ut(Ch(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Ip(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let g=Ts();for(const v of c){const I=this.Fn(je.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(I.key,I)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=Ts();const c=kE(t,r),g=kE(t,cl.max());return Yc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(v,I,S)=>{const x=this.Fn(je.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new eT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oI(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}On(e,t){return oI(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function WC(n,e){let t;if(e.document)t=Gm(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=Gc(e.noDocument.readTime);t=In.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=je.fromSegments(e.unknownDocument.path),o=Gc(e.unknownDocument.version);t=In.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new bn(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return In.newInvalidDocument(e)}}class eT extends PE{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Ea(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Nn((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const v=bE(this.qn.M,c);o=o.add(u.path.popLast()),r+=RE(v)-g.size,t.push(this.qn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=bE(this.qn.M,c.convertToNoDocument(bt.min()));t.push(this.qn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function oI(n){return wr(n,"remoteDocumentGlobal")}function Yc(n){return wr(n,"remoteDocumentsV14")}function Ch(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kE(n,e){const t=e.documentKey.path.toArray();return[n,Ip(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FE(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class tT{constructor(e){this.M=e}kt(e,t,r,o){const u=new _E("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jC,{unique:!0}),g.createObjectStore("documentMutations"),aI(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),aI(e)),c=c.next(()=>function(g){const v=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(g,v){return v.store("mutations").qt().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jC,{unique:!0});const S=v.store("mutations"),x=I.map(V=>S.put(V));return fe.waitFor(x)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Kn(u))),r<6&&o>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&o>=7&&(c=c.next(()=>this.jn(u))),r<8&&o>=8&&(c=c.next(()=>this.Wn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.zn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:$b});v.createIndex("collectionPathOverlayIndex",Hb,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",Gb,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:HS});v.createIndex("documentKeyIndex",GS),v.createIndex("collectionGroupIndex",qS)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Bb}).createIndex("sequenceNumberIndex",jb,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:WS}).createIndex("documentKeyIndex",mE,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=RE(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>fe.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(g=>fe.forEach(g,v=>{Ct(v.userId===u.userId);const I=pl(this.M,v);return JC(e,u.userId,I).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,g)=>{const v=new Qt(c),I=[0,$r(v)];u.push(t.get(I).next(S=>S?fe.resolve():t.put({targetId:0,path:$r(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:gE});const r=t.store("collectionParents"),o=new ME,u=c=>{if(o.add(c)){const g=c.lastSegment(),v=c.popLast();return r.put({collectionId:g,parent:$r(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,g)=>{const v=new Qt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,g,v],I)=>{const S=wa(g);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=ji(o),c=Yb(this.M,u);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const g=t.store("remoteDocumentsV14"),v=(I=c,I.document?new je(Qt.fromString(I.document.name).popFirst(5)):I.noDocument?je.fromSegments(I.noDocument.path):I.unknownDocument?je.fromSegments(I.unknownDocument.path):tt()).path.toArray();var I;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(g.put(S))}).next(()=>fe.waitFor(o))}}function aI(n){n.createObjectStore("targetDocuments",{keyPath:zS}).createIndex("documentTargetsIndex",Ub,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qm,{unique:!0}),n.createObjectStore("targetGlobal")}const Jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tp{constructor(e,t,r,o,u,c,g,v,I,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=c,this.document=g,this.Yn=I,this.Xn=S,this.Zn=x,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=V=>Promise.resolve(),!Tp.vt())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QS(this,o),this.cs=t+"main",this.M=new wE(v),this.hs=new Po(this.cs,this.Zn,new tT(this.M)),this.ls=new Wc(this.referenceDelegate,this.M),this.fs=new XC(this.M),this.ds=new KC,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,Jm);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Cs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ap(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(bh(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Xm(e).get("owner").next(t=>fe.resolve(this.bs(t)))}Ps(e){return Ap(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=wr(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ss(u,18e5),g=u.filter(v=>-1===c.indexOf(v));return fe.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?fe.resolve(!0):Xm(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,Jm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ap(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Zb(t,Cs.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Ap(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return rI.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new KS(e)}getDocumentOverlayCache(e){return TE.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.Zn)?yE:13===c?zb:12===c?qb:11===c?HC:void tt();var c;let g;return this.hs.runTransaction(e,o,u,v=>(g=new Zb(v,this.ts?this.ts.next():Cs.A),"readwrite-primary"===t?this.Ts(g).next(I=>!!I||this.Es(g)).next(I=>{if(!I)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new xe(le.FAILED_PRECONDITION,Wb);return r(g)}).next(I=>this.Rs(g).next(()=>I)):this.Fs(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Fs(e){return Xm(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,Jm)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xm(e).put("owner",t)}static vt(){return Po.vt()}As(e){const t=Xm(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(ir(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Kt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ir("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xm(n){return wr(n,"owner")}function Ap(n){return wr(n,"clientMetadata")}function Sp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nT{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):km(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let o=Um();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let u=Um();return this.indexManager.getCollectionParents(e,o).next(c=>fe.forEach(c,g=>{const v=(I=t,S=g.child(o),new ss(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.Ws(e,v,r).next(I=>{I.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const g of c.mutations){const v=g.key;let I=o.get(v);null==I&&(I=In.newInvalidDocument(v),o=o.insert(v,I)),eE(g,I,c.localWriteTime),I.isFoundDocument()||(o=o.remove(v))}}).next(()=>(o.forEach((u,c)=>{Zv(t,c)||(o=o.remove(u))}),o))}}class LE{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=dn(),o=dn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new LE(e,t.fromCache,r,o)}}class rT{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(bt.min())?this.Zs(e,t):this.Xs.qs(e,o).next(u=>{const c=this.ti(t,u);return(Om(t)||zv(t))&&this.ei(t.limitType,c,o,r)?this.Zs(e,t):(Ov()<=Qa.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kv(t)),this.Xs.Ks(e,t,ch(r,-1)).next(g=>(c.forEach(v=>{g=g.insert(v.key,v)}),g)))});var u}ti(e,t){let r=new Nn(mb(e));return t.forEach((o,u)=>{Zv(e,u)&&(r=r.add(u))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Zs(e,t){return Ov()<=Qa.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Kv(t)),this.Xs.Ks(e,t,cl.min())}}class JS{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new qn(Gt),this.ii=new Ea(u=>Oc(u),dh),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new nT(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function iT(n,e,t,r){return new JS(n,e,t,r)}function uI(n,e){return VE.apply(this,arguments)}function VE(){return VE=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(u=>(o=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let v=dn();for(const I of o){c.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}for(const I of u){g.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}return t.ai.qs(r,v).next(I=>({ci:I,removedBatchIds:c,addedBatchIds:g}))})})}),VE.apply(this,arguments)}function XS(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,g,v,I){const S=v.batch,x=S.keys();let V=fe.resolve();return x.forEach(H=>{V=V.next(()=>I.getEntry(g,H)).next(z=>{const ye=v.docVersions.get(H);Ct(null!==ye),z.version.compareTo(ye)<0&&(S.applyToRemoteDocument(z,v),z.isValidDocument()&&(z.setReadTime(v.commitVersion),I.addEntry(z)))})}),V.next(()=>c.$s.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function sT(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function eM(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const g=[];e.targetChanges.forEach((I,S)=>{const x=o.get(S);if(!x)return;g.push(t.ls.removeMatchingKeys(u,I.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,I.addedDocuments,S)));let V=x.withSequenceNumber(u.currentSequenceNumber);var H,z,ye;e.targetMismatches.has(S)?V=V.withResumeToken(_r.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):I.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(I.resumeToken,r)),o=o.insert(S,V),z=V,ye=I,(0===(H=x).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&g.push(t.ls.updateTargetData(u,V))});let v=Ts();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),g.push(oT(u,c,e.documentUpdates).next(I=>{v=I})),!r.isEqual(bt.min())){const I=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(I)}return fe.waitFor(g).next(()=>c.apply(u)).next(()=>t.ai.Gs(u,v)).next(()=>v)}).then(u=>(t.si=o,u))}function oT(n,e,t){let r=dn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Ts();return t.forEach((c,g)=>{const v=o.get(c);g.isNoDocument()&&g.version.isEqual(bt.min())?(e.removeEntry(c,g.readTime),u=u.insert(c,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(c,g)):Pe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",g.version)}),u})}function tM(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Th(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(u=>u?(o=u,fe.resolve(o)):t.ls.allocateTargetId(r).next(c=>(o=new au(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Mp(n,e,t){return lI.apply(this,arguments)}function lI(){return lI=(0,ve.Z)(function*(n,e,t){const r=qe(n),o=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!bh(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),lI.apply(this,arguments)}function UE(n,e,t){const r=qe(n);let o=bt.min(),u=dn();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,v,I){const S=qe(g),x=S.ii.get(I);return void 0!==x?fe.resolve(S.si.get(x)):S.ls.getTargetData(v,I)}(r,c,ao(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,g.targetId).next(v=>{u=v})}).next(()=>r.ni.Ks(c,e,t?o:bt.min(),t?u:dn())).next(g=>(s(r,gb(e),g),{documents:g,hi:u})))}function aT(n,e){const t=qe(n),r=qe(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function i(n,e){const t=qe(n),r=t.ri.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,ch(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(s(t,e,o),o))}function s(n,e,t){let r=bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function l(){return l=(0,ve.Z)(function*(n,e,t,r){const o=qe(n);let u=dn(),c=Ts();for(const I of t){const S=e.li(I.metadata.name);I.document&&(u=u.add(S));const x=e.fi(I);x.setReadTime(e.di(I.metadata.readTime)),c=c.insert(S,x)}const g=o.oi.newChangeBuffer({trackRemovals:!0}),v=yield Th(o,(I=r,ao(Fc(Qt.fromString(`__bundle__/docs/${I}`)))));var I;return o.persistence.runTransaction("Apply bundle documents","readwrite",I=>oT(I,g,c).next(S=>(g.apply(I),S)).next(S=>o.ls.removeMatchingKeysForTargetId(I,v.targetId).next(()=>o.ls.addMatchingKeys(I,u,v.targetId)).next(()=>o.ai.Gs(I,S)).next(()=>S)))}),l.apply(this,arguments)}function d(n,e){return f.apply(this,arguments)}function f(){return f=(0,ve.Z)(function*(n,e,t=dn()){const r=yield Th(n,ao(Qb(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.ds.saveNamedQuery(u,e);const g=r.withResumeToken(_r.EMPTY_BYTE_STRING,c);return o.si=o.si.insert(g.targetId,g),o.ls.updateTargetData(u,g).next(()=>o.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.ls.addMatchingKeys(u,t,r.targetId)).next(()=>o.ds.saveNamedQuery(u,e))})}),f.apply(this,arguments)}class _{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return fe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Qb(r.bundledQuery),readTime:kr(r.readTime)}),fe.resolve();var r}}class w{constructor(){this.overlays=new qn(je.comparator),this.mi=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=vh(),u=t.length+1,c=new je(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const v=g.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new qn((I,S)=>I-S);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=vh(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const g=vh(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,S)=>g.set(I,S)),!(g.size()>=o)););return fe.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new bp(t,r));let u=this.mi.get(t);void 0===u&&(u=dn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class b{constructor(){this.gi=new Nn(T.yi),this.pi=new Nn(T.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new T(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new T(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new Qt([])),r=new T(t,e),o=new T(t,e+1),u=[];return this.pi.forEachInRange([r,o],c=>{this.Ei(c),u.push(c.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new Qt([])),r=new T(t,e),o=new T(t,e+1);let u=dn();return this.pi.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new T(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class T{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Gt(e.Vi,t.Vi)}static Ii(e,t){return Gt(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class M{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Nn(T.yi)}checkEmpty(e){return fe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const u=this.vi;this.vi++;const c=new vE(u,t,r,o);this.$s.push(c);for(const g of o)this.Si=this.Si.add(new T(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),u=o<0?0:o;return fe.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return fe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new T(t,0),o=new T(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,o],c=>{const g=this.Di(c.Vi);u.push(g)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Gt);return t.forEach(o=>{const u=new T(o,0),c=new T(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,c],g=>{r=r.add(g.Vi)})}),fe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new T(new je(u),0);let g=new Nn(Gt);return this.Si.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===o&&(g=g.add(v.Vi)),!0)},c),fe.resolve(this.xi(g))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ct(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return fe.forEach(t.mutations,o=>{const u=new T(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new T(t,0),o=this.Si.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class k{constructor(e){this.ki=e,this.docs=new qn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():In.newInvalidDocument(o))}),fe.resolve(r)}getAllFromCollection(e,t,r){let o=Ts();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:v}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||cb(wC(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Mi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U(this)}getSize(e){return fe.resolve(this.size)}}class U extends PE{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Z{constructor(e){this.persistence=e,this.Oi=new Ea(t=>Oc(t),dh),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new b,this.targetCount=0,this.Bi=gl.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),fe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new gl(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.In(t),fe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Oi.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Oi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),fe.waitFor(u).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.$i.containsKey(t))}}class me{constructor(e,t){this.Li={},this.overlays={},this.ts=new Cs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Z(this),this.indexManager=new YC,this.fs=new k(r=>this.referenceDelegate.Ui(r)),this.M=new wE(t),this.ds=new _(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new M(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new ke(this.ts.next());return this.referenceDelegate.qi(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e,t){return fe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class ke extends GC{constructor(e){super(),this.currentSequenceNumber=e}}class Be{constructor(e){this.persistence=e,this.Qi=new b,this.ji=null}static Wi(e){return new Be(e)}get zi(){if(this.ji)return this.ji;throw tt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.zi,r=>{const o=je.fromPath(r);return this.Hi(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return fe.or([()=>fe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function et(n,e){return`firestore_clients_${n}_${e}`}function Ie(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lt(n,e){return`firestore_targets_${n}_${e}`}class $t{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new xe(o.error.code,o.error.message))),c?new $t(e,t,o.state,u):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class en{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new en(e,r.state,o):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ii{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=mp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=rb(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Ii(e,u):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lu{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lu(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xp{constructor(){this.activeTargetIds=mp()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Np{constructor(e,t,r,o,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new qn(Gt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=et(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new xp),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const u=e.getItem(et(e.persistenceKey,o));if(u){const c=Ii.Ji(o,u);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(lt(this.persistenceKey,e));if(r){const o=en.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lt(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let c=Cs.A;if(null!=u)try{const g=JSON.parse(u);Ct("number"==typeof g),c=g}catch(g){ir("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);o!==Cs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new $t(this.currentUser,e,t,r),u=Ie(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=Ie(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=lt(this.persistenceKey,e),u=new en(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Ii.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return $t.Ji(new ii(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return en.Ji(o,t)}wr(e){return lu.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),c=[],g=[];return u.forEach(v=>{o.has(v)||c.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Or(c,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=mp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ey{constructor(){this.Fr=new xp,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new xp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BE{Br(e){}shutdown(){}}class ty{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class $E{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class HE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const c=this.oo(e,t);Pe("RestConnection","Sending: ",c,r);const g={};return this.uo(g,o,u),this.ao(e,c,g,r).then(v=>(Pe("RestConnection","Received: ",v),v),v=>{throw ih("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}co(e,t,r,o,u){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ma,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${jE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((u,c)=>{const g=new Qw;g.listenOnce(lC.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Mc.NO_ERROR:const I=g.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Mc.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const S=g.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const x=g.getResponseJson().error;if(x&&x.status&&x.message){const V=function(H){const z=H.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(z)>=0?z:le.UNKNOWN}(x.status);c(new xe(V,x.message))}else c(new xe(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new xe(le.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=aC(),c=uC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Am({})),this.uo(g.initMessageHeaders,t,r),(0,Kt.uI)()||(0,Kt.b$)()||(0,Kt.d)()||(0,Kt.w1)()||(0,Kt.Mn)()||(0,Kt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");Pe("Connection","Creating WebChannel: "+v,g);const I=u.createWebChannel(v,g);let S=!1,x=!1;const V=new $E({jr:z=>{x?Pe("Connection","Not sending because WebChannel is closed:",z):(S||(Pe("Connection","Opening WebChannel transport."),I.open(),S=!0),Pe("Connection","WebChannel sending:",z),I.send(z))},Wr:()=>I.close()}),H=(z,ye,Fe)=>{z.listen(ye,ft=>{try{Fe(ft)}catch(ze){setTimeout(()=>{throw ze},0)}})};return H(I,np.EventType.OPEN,()=>{x||Pe("Connection","WebChannel transport opened.")}),H(I,np.EventType.CLOSE,()=>{x||(x=!0,Pe("Connection","WebChannel transport closed"),V.eo())}),H(I,np.EventType.ERROR,z=>{x||(x=!0,ih("Connection","WebChannel transport errored:",z),V.eo(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),H(I,np.EventType.MESSAGE,z=>{var ye;if(!x){const Fe=z.data[0];Ct(!!Fe);const ft=Fe,ze=ft.error||(null===(ye=ft[0])||void 0===ye?void 0:ye.error);if(ze){Pe("Connection","WebChannel received error:",ze);const Ut=ze.status;let nt=function(Tt){const Vn=Or[Tt];if(void 0!==Vn)return iE(Vn)}(Ut),Ot=ze.message;void 0===nt&&(nt=le.INTERNAL,Ot="Unknown error status: "+Ut+" with message "+ze.message),x=!0,V.eo(new xe(nt,Ot)),I.close()}else Pe("Connection","WebChannel received:",Fe),V.no(Fe)}}),H(c,cC.STAT_EVENT,z=>{z.stat===Yw.PROXY?Pe("Connection","Detected buffering proxy"):z.stat===Yw.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.Zr()},0),V}}function ny(){return"undefined"!=typeof window?window:null}function cI(){return"undefined"!=typeof document?document:null}function GE(n){return new UC(n,!0)}class uT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class nM{constructor(e,t,r,o,u,c,g,v){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new uT(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uR extends nM{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function BS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:tt(),o=e.targetChange.targetIds||[],u=function(v,I){return v.N?(Ct(void 0===I||"string"==typeof I),_r.fromBase64String(I||"")):(Ct(void 0===I||I instanceof Uint8Array),_r.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(v){const I=void 0===v.code?le.UNKNOWN:iE(v.code);return new xe(I,v.message||"")}(c);t=new Cb(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Oo(n,r.document.name),u=kr(r.document.updateTime),c=new oi({mapValue:{fields:r.document.fields}}),g=In.newFoundDocument(o,u,c);t=new su(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Oo(n,r.document),u=r.readTime?kr(r.readTime):bt.min(),c=In.newNoDocument(o,u);t=new su([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=Oo(n,r.document);t=new su([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new OC(r.count||0);t=new Db(r.targetId,u)}}var v;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?kr(u.readTime):bt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=fl(this.M),t.addTarget=function(o,u){let c;const g=u.target;return c=up(g)?{documents:dE(o,g)}:{query:Nb(o,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=jm(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=vp(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function Rb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=fl(this.M),t.removeTarget=e,this.Oo(t)}}class lR extends nM{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function xb(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,o){let u=kr(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=kr(o)),new va(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=fl(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ep(this.M,r))};this.Oo(t)}}class cR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class dR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ir(t),this.su=!1):Pe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class hR{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(g=>{r.enqueueAndForget((0,ve.Z)(function*(){var v;Ah(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ve.Z)(function*(I){const S=qe(I);S.lu.add(4),yield ry(S),S._u.set("Unknown"),S.lu.delete(4),yield qE(S)}),function(I){return v.apply(this,arguments)})(c))}))}),this._u=new dR(r,o)}}function qE(n){return lT.apply(this,arguments)}function lT(){return lT=(0,ve.Z)(function*(n){if(Ah(n))for(const e of n.fu)yield e(!0)}),lT.apply(this,arguments)}function ry(n){return cT.apply(this,arguments)}function cT(){return cT=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),cT.apply(this,arguments)}function dI(n,e){const t=qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),fT(t)?hT(t):sy(t).Co()&&dT(t,e))}function zE(n,e){const t=qe(n),r=sy(t);t.hu.delete(e),r.Co()&&rM(t,e),0===t.hu.size&&(r.Co()?r.ko():Ah(t)&&t._u.set("Unknown"))}function dT(n,e){n.wu.Z(e.targetId),sy(n).Qo(e)}function rM(n,e){n.wu.Z(e),sy(n).jo(e)}function hT(n){n.wu=new _p({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),sy(n).start(),n._u.iu()}function fT(n){return Ah(n)&&!sy(n).Do()&&n.hu.size>0}function Ah(n){return 0===qe(n).lu.size}function iM(n){n.wu=void 0}function fR(n){return pT.apply(this,arguments)}function pT(){return pT=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{dT(n,e)})}),pT.apply(this,arguments)}function pR(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,ve.Z)(function*(n,e){iM(n),fT(n)?(n._u.uu(e),hT(n)):n._u.set("Unknown")}),gT.apply(this,arguments)}function gR(n,e,t){return mT.apply(this,arguments)}function mT(){return mT=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Cb&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const c=u.cause;for(const g of u.targetIds)o.hu.has(g)&&(yield o.remoteSyncer.rejectListen(g,c),o.hu.delete(g),o.wu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hI(n,r)}else if(e instanceof su?n.wu.ut(e):e instanceof Db?n.wu._t(e):n.wu.ht(e),!t.isEqual(bt.min()))try{const r=yield sT(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.wu.yt(u);return c.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const I=o.hu.get(v);I&&o.hu.set(v,I.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const v=o.hu.get(g);if(!v)return;o.hu.set(g,v.withResumeToken(_r.EMPTY_BYTE_STRING,v.snapshotVersion)),rM(o,g);const I=new au(v.target,g,1,v.sequenceNumber);dT(o,I)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield hI(n,r)}var r}),mT.apply(this,arguments)}function hI(n,e,t){return yT.apply(this,arguments)}function yT(){return yT=(0,ve.Z)(function*(n,e,t){if(!bh(e))throw e;n.lu.add(1),yield ry(n),n._u.set("Offline"),t||(t=()=>sT(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield qE(n)}))}),yT.apply(this,arguments)}function sM(n,e){return e().catch(t=>hI(n,t,e))}function iy(n){return _T.apply(this,arguments)}function _T(){return _T=(0,ve.Z)(function*(n){const e=qe(n),t=Sh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;mR(e);)try{const o=yield tM(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,yR(e,o)}catch(o){yield hI(e,o)}oM(e)&&aM(e)}),_T.apply(this,arguments)}function mR(n){return Ah(n)&&n.cu.length<10}function yR(n,e){n.cu.push(e);const t=Sh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function oM(n){return Ah(n)&&!Sh(n).Do()&&n.cu.length>0}function aM(n){Sh(n).start()}function _R(n){return vT.apply(this,arguments)}function vT(){return vT=(0,ve.Z)(function*(n){Sh(n).Xo()}),vT.apply(this,arguments)}function vR(n){return ET.apply(this,arguments)}function ET(){return ET=(0,ve.Z)(function*(n){const e=Sh(n);for(const t of n.cu)e.Ho(t.mutations)}),ET.apply(this,arguments)}function ER(n,e,t){return wT.apply(this,arguments)}function wT(){return wT=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),o=EE.from(r,e,t);yield sM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield iy(n)}),wT.apply(this,arguments)}function wR(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,ve.Z)(function*(n,e){var t;e&&Sh(n).zo&&(yield(t=(0,ve.Z)(function*(r,o){if(Lm(u=o.code)&&u!==le.ABORTED){const c=r.cu.shift();Sh(r).No(),yield sM(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield iy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),oM(n)&&aM(n)}),bT.apply(this,arguments)}function uM(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Ah(t);t.lu.add(3),yield ry(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield qE(t)}),IT.apply(this,arguments)}function DT(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t.lu.delete(2),yield qE(t)):e||(t.lu.add(2),yield ry(t),t._u.set("Unknown"))}),CT.apply(this,arguments)}function sy(n){return n.mu||(n.mu=function(e,t,r){const o=qe(e);return o.tu(),new uR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:fR.bind(null,n),Jr:pR.bind(null,n),Ko:gR.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),fT(n)?hT(n):n._u.set("Unknown")):(yield n.mu.stop(),iM(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Sh(n){return n.gu||(n.gu=function(e,t,r){const o=qe(e);return o.tu(),new lR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:_R.bind(null,n),Jr:wR.bind(null,n),Yo:vR.bind(null,n),Jo:ER.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield iy(n)):(yield n.gu.stop(),n.cu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class TT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,g=new TT(e,t,c,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(n,e){if(ir("AsyncQueue",`${e}: ${n}`),bh(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class ay{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Um(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new ay(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ay)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ay;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lM{constructor(){this.yu=new qn(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class uy{constructor(e,t,r,o,u,c,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new uy(e,t,ay.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class bR{constructor(){this.Iu=void 0,this.listeners=[]}}class IR{constructor(){this.queries=new Ea(e=>pb(e),cp),this.onlineState="Unknown",this.Tu=new Set}}function AT(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new bR),o)try{u.Iu=yield t.onListen(r)}catch(c){const g=oy(c,`Initialization of query '${Kv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&NT(t)}),ST.apply(this,arguments)}function MT(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),xT.apply(this,arguments)}function DR(n,e){const t=qe(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const g of c.listeners)g.Au(o)&&(r=!0);c.Iu=o}}r&&NT(t)}function CR(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function NT(n){n.Tu.forEach(e=>{e.next()})}class RT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new uy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=uy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class TR{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class cM{constructor(e){this.M=e}li(e){return Oo(this.M,e)}fi(e){return e.metadata.exists?Gm(this.M,e.document,!1):In.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return kr(e)}}class AR{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dM(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new cM(this.M);for(const o of e)if(o.metadata.queries){const u=r.li(o.metadata.name);for(const c of o.metadata.queries){const g=(t.get(c)||dn()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function a(n,e,t,r){return l.apply(this,arguments)}(e.localStore,new cM(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield d(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function dM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hM{constructor(e){this.key=e}}class fM{constructor(e){this.key=e}}class pM{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=dn(),this.mutatedKeys=dn(),this.Lu=mb(e),this.Uu=new ay(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new lM,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,g=!1;const v=Om(this.query)&&o.size===this.query.limit?o.last():null,I=zv(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,x)=>{const V=o.get(S),H=Zv(this.query,x)?x:null,z=!!V&&this.mutatedKeys.has(V.key),ye=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Fe=!1;V&&H?V.data.isEqual(H.data)?z!==ye&&(r.track({type:3,doc:H}),Fe=!0):this.Qu(V,H)||(r.track({type:2,doc:H}),Fe=!0,(v&&this.Lu(H,v)>0||I&&this.Lu(H,I)<0)&&(g=!0)):!V&&H?(r.track({type:0,doc:H}),Fe=!0):V&&!H&&(r.track({type:1,doc:V}),Fe=!0,(v||I)&&(g=!0)),Fe&&(H?(c=c.add(H),u=ye?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),Om(this.query)||zv(this.query))for(;c.size>this.query.limit;){const S=Om(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Ku:r,ei:g,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((I,S)=>function(x,V){const H=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return H(x)-H(V)}(I.type,S.type)||this.Lu(I.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,v=g!==this.$u;return this.$u=g,0!==u.length||v?{snapshot:new uy(this.query,e.Uu,o,u,e.mutatedKeys,0===g,v,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new lM,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=dn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new fM(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new hM(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=dn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return uy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class SR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class MR{constructor(e){this.key=e,this.Xu=!1}}class xR{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new Ea(g=>pb(g),cp),this.ea=new Map,this.na=new Set,this.sa=new qn(je.comparator),this.ia=new Map,this.ra=new b,this.oa={},this.ua=new Map,this.aa=gl.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function NR(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ve.Z)(function*(n,e){const t=nA(n);let r,o;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const c=yield Th(t.localStore,ao(e));t.isPrimaryClient&&dI(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield PT(t,e,r,"current"===g)}return o}),OT.apply(this,arguments)}function PT(n,e,t,r){return kT.apply(this,arguments)}function kT(){return kT=(0,ve.Z)(function*(n,e,t,r){n.ha=(S,x,V)=>{return(H=(0,ve.Z)(function*(z,ye,Fe,ft){let ze=ye.view.Gu(Fe);ze.ei&&(ze=yield UE(z.localStore,ye.query,!1).then(({documents:Ot})=>ye.view.Gu(Ot,ze)));const Ut=ft&&ft.targetChanges.get(ye.targetId),nt=ye.view.applyChanges(ze,z.isPrimaryClient,Ut);return qT(z,ye.targetId,nt.zu),nt.snapshot}),function(z,ye,Fe,ft){return H.apply(this,arguments)})(n,S,x,V);var H};const o=yield UE(n.localStore,e,!0),u=new pM(e,o.hi),c=u.Gu(o.documents),g=Pr.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,g);qT(n,t,v.zu);const I=new SR(e,t,u);return n.ta.set(e,I),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),v.snapshot}),kT.apply(this,arguments)}function RR(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(u=>!cp(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zE(t.remoteStore,r.targetId),ly(t,r.targetId)}).catch(Zc))):(ly(t,r.targetId),yield Mp(t.localStore,r.targetId,!0))}),FT.apply(this,arguments)}function LT(){return LT=(0,ve.Z)(function*(n,e,t){const r=rA(n);try{const o=yield function(u,c){const g=qe(u),v=bn.now(),I=c.reduce((x,V)=>x.add(V.key),dn());let S;return g.persistence.runTransaction("Locally write mutations","readwrite",x=>g.ai.qs(x,I).next(V=>{S=V;const H=[];for(const z of c){const ye=RC(z,S.get(z.key));null!=ye&&H.push(new Bc(z.key,ye,lb(ye.value.mapValue),Er.exists(!0)))}return g.$s.addMutationBatch(x,v,H,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,g){let v=u.oa[u.currentUser.toKey()];v||(v=new qn(Gt)),v=v.insert(c,g),u.oa[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Qc(r,o.changes),yield iy(r.remoteStore)}catch(o){const u=oy(o,"Failed to persist write");t.reject(u)}}),LT.apply(this,arguments)}function gM(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield eM(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.ia.get(u);c&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Xu=!0:o.modifiedDocuments.size>0?Ct(c.Xu):o.removedDocuments.size>0&&(Ct(c.Xu),c.Xu=!1))}),yield Qc(t,r,e)}catch(r){yield Zc(r)}}),VT.apply(this,arguments)}function mM(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((u,c)=>{const g=c.view.Eu(e);g.snapshot&&o.push(g.snapshot)}),function(u,c){const g=qe(u);g.onlineState=c;let v=!1;g.queries.forEach((I,S)=>{for(const x of S.listeners)x.Eu(c)&&(v=!0)}),v&&NT(g)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function PR(n,e,t){return UT.apply(this,arguments)}function UT(){return UT=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),u=o&&o.key;if(u){let c=new qn(je.comparator);c=c.insert(u,In.newNoDocument(u,bt.min()));const g=dn().add(u),v=new yp(bt.min(),new Map,new Nn(Gt),c,g);yield gM(r,v),r.sa=r.sa.remove(u),r.ia.delete(e),zT(r)}else yield Mp(r.localStore,e,!1).then(()=>ly(r,e,t)).catch(Zc)}),UT.apply(this,arguments)}function kR(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield XS(t.localStore,e);GT(t,r,null),HT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,o)}catch(o){yield Zc(o)}}),BT.apply(this,arguments)}function FR(n,e,t){return jT.apply(this,arguments)}function jT(){return jT=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,c){const g=qe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return g.$s.lookupMutationBatch(v,c).next(S=>(Ct(null!==S),I=S.keys(),g.$s.removeMutationBatch(v,S))).next(()=>g.$s.performConsistencyCheck(v)).next(()=>g.ai.qs(v,I))})}(r.localStore,e);GT(r,e,t),HT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,o)}catch(o){yield Zc(o)}}),jT.apply(this,arguments)}function $T(){return $T=(0,ve.Z)(function*(n,e){const t=qe(n);Ah(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.$s.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),$T.apply(this,arguments)}function HT(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function GT(n,e,t){const r=qe(n);let o=r.oa[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||yM(n,r)})}function yM(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(zE(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),zT(n))}function qT(n,e,t){for(const r of t)r instanceof hM?(n.ra.addReference(r.key,e),VR(n,r)):r instanceof fM?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||yM(n,r.key)):tt()}function VR(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.na.add(r),zT(n))}function zT(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(Qt.fromString(e)),r=n.aa.next();n.ia.set(r,new MR(t)),n.sa=n.sa.insert(t,r),dI(n.remoteStore,new au(ao(Fc(t.path)),r,2,Cs.A))}}function Qc(n,e,t){return WT.apply(this,arguments)}function WT(){return WT=(0,ve.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],c=[];var g;r.ta.isEmpty()||(r.ta.forEach((g,v)=>{c.push(r.ha(v,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I.fromCache?"not-current":"current"),o.push(I);const S=LE.Js(v.targetId,I);u.push(S)}}))}),yield Promise.all(c),r.Zu.Ko(o),yield(g=(0,ve.Z)(function*(v,I){const S=qe(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>fe.forEach(I,V=>fe.forEach(V.zs,H=>S.persistence.referenceDelegate.addReference(x,V.targetId,H)).next(()=>fe.forEach(V.Hs,H=>S.persistence.referenceDelegate.removeReference(x,V.targetId,H)))))}catch(x){if(!bh(x))throw x;Pe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const V=x.targetId;if(!x.fromCache){const H=S.si.get(V),ye=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);S.si=S.si.insert(V,ye)}}}),function(v,I){return g.apply(this,arguments)})(r.localStore,u))}),WT.apply(this,arguments)}function UR(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield uI(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(c=>{c.forEach(g=>{g.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.ci)}var o}),KT.apply(this,arguments)}function BR(n,e){const t=qe(n),r=t.ia.get(e);if(r&&r.Xu)return dn().add(r.key);{let o=dn();const u=t.ea.get(e);if(!u)return o;for(const c of u){const g=t.ta.get(c);o=o.unionWith(g.view.qu)}return o}}function jR(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield UE(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&qT(t,e.targetId,o.zu),o}),ZT.apply(this,arguments)}function $R(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,ve.Z)(function*(n,e){const t=qe(n);return i(t.localStore,e).then(r=>Qc(t,r))}),YT.apply(this,arguments)}function HR(n,e,t,r){return QT.apply(this,arguments)}function QT(){return QT=(0,ve.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(c,g){const v=qe(c),I=qe(v.$s);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.ln(S,g).next(x=>x?v.ai.qs(S,x):fe.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield iy(o.remoteStore):"acknowledged"===t||"rejected"===t?(GT(o,e,r||null),HT(o,e),g=e,qe(qe(o.localStore).$s).dn(g)):tt(),yield Qc(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),QT.apply(this,arguments)}function JT(){return JT=(0,ve.Z)(function*(n,e){const t=qe(n);if(nA(t),rA(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield _M(t,r.toArray());t.ca=!0,yield DT(t.remoteStore,!0);for(const u of o)dI(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(ly(t,c),Mp(t.localStore,c,!0))),zE(t.remoteStore,c)}),yield o,yield _M(t,r),function(u){const c=qe(u);c.ia.forEach((g,v)=>{zE(c.remoteStore,v)}),c.ra.bi(),c.ia=new Map,c.sa=new qn(je.comparator)}(t),t.ca=!1,yield DT(t.remoteStore,!1)}}),JT.apply(this,arguments)}function _M(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,ve.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const c of e){let g;const v=r.ea.get(c);if(v&&0!==v.length){g=yield Th(r.localStore,ao(v[0]));for(const I of v){const S=r.ta.get(I),x=yield jR(r,S);x.snapshot&&u.push(x.snapshot)}}else{const I=yield aT(r.localStore,c);g=yield Th(r.localStore,I),yield PT(r,vM(I),c,!1)}o.push(g)}return r.Zu.Ko(u),o}),XT.apply(this,arguments)}function vM(n){return MC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qR(n){const e=qe(n);return qe(qe(e.localStore).persistence).Os()}function zR(n,e,t,r){return eA.apply(this,arguments)}function eA(){return eA=(0,ve.Z)(function*(n,e,t,r){const o=qe(n);if(o.ca)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield i(o.localStore,gb(u[0])),g=yp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qc(o,c,g);break}case"rejected":yield Mp(o.localStore,e,!0),ly(o,e,r);break;default:tt()}}),eA.apply(this,arguments)}function WR(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,ve.Z)(function*(n,e,t){const r=nA(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield aT(r.localStore,o),c=yield Th(r.localStore,u);yield PT(r,vM(u),c.targetId,!1),dI(r.remoteStore,c)}for(const o of t)r.ea.has(o)&&(yield Mp(r.localStore,o,!1).then(()=>{zE(r.remoteStore,o),ly(r,o)}).catch(Zc))}}),tA.apply(this,arguments)}function nA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PR.bind(null,e),e.Zu.Ko=DR.bind(null,e.eventManager),e.Zu.la=CR.bind(null,e.eventManager),e}function rA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FR.bind(null,e),e}class EM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=GE(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return iT(this.persistence,new rT,e.initialUser,this.M)}_a(e){return new me(Be.Wi,this.M)}da(e){return new ey}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wM extends EM{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield rA(r.ga.syncEngine),yield iy(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return iT(this.persistence,new rT,e.initialUser,this.M)}wa(e){return new ZS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Sp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new Tp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ny(),cI(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new ey}}class ZR extends wM{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof Np&&(r.sharedClientState.syncEngine={kr:HR.bind(null,o),Mr:zR.bind(null,o),Or:WR.bind(null,o),Os:qR.bind(null,o),Nr:$R.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ve.Z)(function*(c){yield function GR(n,e){return JT.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}da(e){const t=ny();if(!Np.vt(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Sp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Np(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iA{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>mM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=UR.bind(null,r.syncEngine),yield DT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new IR}createDatastore(e){const t=GE(e.databaseInfo.databaseId),r=new HE(e.databaseInfo);return new cR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>mM(this.syncEngine,g,0),c=ty.vt()?new ty:new BE,new hR(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,g,v,I){const S=new xR(r,o,u,c,g,v);return I&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield ry(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bM(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YR{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new si,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new TR(JSON.parse(u),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,c){const g=qe(u),v=fl(g.M)+"/documents",I={documents:c.map(H=>Hm(g.M,H))},S=yield g.co("BatchGetDocuments",v,I),x=new Map;S.forEach(H=>{const z=function lE(n,e){return"found"in e?function(t,r){Ct(!!r.found);const o=Oo(t,r.found.name),u=kr(r.found.updateTime),c=new oi({mapValue:{fields:r.found.fields}});return In.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const o=Oo(t,r.missing),u=kr(r.readTime);return In.newNoDocument(o,u)}(n,e):tt()}(g.M,H);x.set(z.key.toString(),z)});const V=[];return c.forEach(H=>{const z=x.get(H.toString());Ct(!!z),V.push(z)}),V}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _h(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new rE(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const c=qe(o),g=fl(c.M)+"/documents",v={writes:u.map(I=>Ep(c.M,I))};yield c.ro("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Er.updateTime(t):Er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(t)}return Er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JR{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new uT(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new QR(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ca(u)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Nc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Lm(t)}return!1}}class XR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ii.UNAUTHENTICATED,this.clientId=eb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(g){Pe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=oy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function IM(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield uI(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sA.apply(this,arguments)}function DM(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aA(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>uM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>uM(e.remoteStore,u)),n.onlineComponents=e}),oA.apply(this,arguments)}function aA(n){return uA.apply(this,arguments)}function uA(){return uA=(0,ve.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield IM(n,new EM)),n.offlineComponents}),uA.apply(this,arguments)}function pI(n){return lA.apply(this,arguments)}function lA(){return lA=(0,ve.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield DM(n,new iA)),n.onlineComponents}),lA.apply(this,arguments)}function CM(n){return aA(n).then(e=>e.persistence)}function cA(n){return aA(n).then(e=>e.localStore)}function TM(n){return pI(n).then(e=>e.remoteStore)}function dA(n){return pI(n).then(e=>e.syncEngine)}function cy(n){return hA.apply(this,arguments)}function hA(){return hA=(0,ve.Z)(function*(n){const e=yield pI(n),t=e.eventManager;return t.onListen=NR.bind(null,e.syncEngine),t.onUnlisten=RR.bind(null,e.syncEngine),t}),hA.apply(this,arguments)}function AM(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,c,g,v){const I=new fI({next:x=>{u.enqueueAndForget(()=>MT(o,S));const V=x.docs.has(c);!V&&x.fromCache?v.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&g&&"server"===g.source?v.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new RT(Fc(c.path),I,{includeMetadataChanges:!0,Du:!0});return AT(o,S)}(yield cy(n),n.asyncQueue,e,t,r)})),r.promise}function SM(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,c,g,v){const I=new fI({next:x=>{u.enqueueAndForget(()=>MT(o,S)),x.fromCache&&"server"===g.source?v.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new RT(c,I,{includeMetadataChanges:!0,Du:!0});return AT(o,S)}(yield cy(n),n.asyncQueue,e,t,r)})),r.promise}const MM=new Map;function fA(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xM(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NM(n){if(!je.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RM(n){if(je.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gI(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OM(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class PM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class WE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PM({}),this._settingsFrozen=!1,e instanceof nu?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Jw;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Xw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=MM.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),MM.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class ml extends os{constructor(e,t,r){super(e,t,Fc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new je(e))}withConverter(e){return new ml(this.firestore,e,this._path)}}function kM(n,e,...t){if(n=(0,Kt.m9)(n),fA("collection","path",e),n instanceof WE){const r=Qt.fromString(e,...t);return RM(r),new ml(n,null,r)}{if(!(n instanceof zn||n instanceof ml))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return RM(r),new ml(n.firestore,null,r)}}function mI(n,e,...t){if(n=(0,Kt.m9)(n),1===arguments.length&&(e=eb.R()),fA("doc","path",e),n instanceof WE){const r=Qt.fromString(e,...t);return NM(r),new zn(n,null,new je(r))}{if(!(n instanceof zn||n instanceof ml))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return NM(r),new zn(n.firestore,n instanceof ml?n.converter:null,new je(r))}}function FM(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),(n instanceof zn||n instanceof ml)&&(e instanceof zn||e instanceof ml)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LM(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),n instanceof os&&e instanceof os&&n.firestore===e.firestore&&cp(n._query,e._query)&&n.converter===e.converter}class cO{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new uT(this,"async_queue_retry"),this.Ua=()=>{const t=cI();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=cI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=cI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new si;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!bh(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,ir("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=TT.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(o),o}qa(){this.Fa&&tt()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function pA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class dO{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends WE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new cO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||VM(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||VM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new EC(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new XR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function UM(n,e,t){const r=new si;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield IM(n,t),yield DM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function BM(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yl(_r.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yl(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rp{constructor(e){this._methodName=e}}class yI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const wO=/^__.*__$/;class bO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms):new gp(e,this.data,t,this.fieldTransforms)}}class jM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $M(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class _I{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new _I(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return wI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if($M(this.Ya)&&wO.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class IO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||GE(e)}uc(e,t,r,o=!1){return new _I({Ya:e,methodName:t,oc:r,path:yr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Op(n){const e=n._freezeSettings(),t=GE(n._databaseId);return new IO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vI(n,e,t,r,o,u={}){const c=n.uc(u.merge||u.mergeFields?2:0,e,t,o);_A("Data must be an object, but it was:",c,r);const g=qM(r,c);let v,I;if(u.merge)v=new ah(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const V=vA(e,x,t);if(!c.contains(V))throw new xe(le.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);WM(S,V)||S.push(V)}v=new ah(S),I=c.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,I=c.fieldTransforms;return new bO(new oi(g),v,I)}class KE extends Rp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof KE}}function HM(n,e,t){return new _I({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class gA extends Rp{_toFieldTransform(e){return new hp(e.path,new Lc)}isEqual(e){return e instanceof gA}}class DO extends Rp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=HM(this,e,!0),r=this.ac.map(u=>Pp(u,t)),o=new Vc(r);return new hp(e.path,o)}isEqual(e){return this===e}}class CO extends Rp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=HM(this,e,!0),r=this.ac.map(u=>Pp(u,t)),o=new Uc(r);return new hp(e.path,o)}isEqual(e){return this===e}}class TO extends Rp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new gh(e.M,Yv(e.M,this.cc));return new hp(e.path,t)}isEqual(e){return this===e}}function mA(n,e,t,r){const o=n.uc(1,e,t);_A("Data must be an object, but it was:",o,r);const u=[],c=oi.empty();xc(r,(v,I)=>{const S=EI(e,v,t);I=(0,Kt.m9)(I);const x=o.nc(S);if(I instanceof KE)u.push(S);else{const V=Pp(I,x);null!=V&&(u.push(S),c.set(S,V))}});const g=new ah(u);return new jM(c,g,o.fieldTransforms)}function yA(n,e,t,r,o,u){const c=n.uc(1,e,t),g=[vA(e,r,t)],v=[o];if(u.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)g.push(vA(e,u[V])),v.push(u[V+1]);const I=[],S=oi.empty();for(let V=g.length-1;V>=0;--V)if(!WM(I,g[V])){const H=g[V];let z=v[V];z=(0,Kt.m9)(z);const ye=c.nc(H);if(z instanceof KE)I.push(H);else{const Fe=Pp(z,ye);null!=Fe&&(I.push(H),S.set(H,Fe))}}const x=new ah(I);return new jM(S,x,c.fieldTransforms)}function GM(n,e,t,r=!1){return Pp(t,n.uc(r?4:3,e))}function Pp(n,e){if(zM(n=(0,Kt.m9)(n)))return _A("Unsupported field value:",e,n),qM(n,e);if(n instanceof Rp)return function(t,r){if(!$M(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let g=Pp(c,r.sc(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Kt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=bn.fromDate(t);return{timestampValue:vp(r.M,o)}}if(t instanceof bn){const o=new bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vp(r.M,o)}}if(t instanceof yI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yl)return{bytesValue:jm(r.M,t._byteString)};if(t instanceof zn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Eh(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${gI(t)}`)}(n,e)}function qM(n,e){const t={};return kv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xc(n,(r,o)=>{const u=Pp(o,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function zM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof yI||n instanceof yl||n instanceof zn||n instanceof Rp)}function _A(n,e,t){if(!zM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function vA(n,e,t){if((e=(0,Kt.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return EI(n,e);throw wI("Field path arguments must be of type string or ",n,!1,void 0,t)}const AO=new RegExp("[~\\*/\\[\\]]");function EI(n,e,t){if(e.search(AO)>=0)throw wI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch(r){throw wI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wI(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${o}`),v+=")"),new xe(le.INVALID_ARGUMENT,g+n+v)}function WM(n,e){return n.some(t=>t.isEqual(e))}class ZE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SO extends ZE{data(){return super.data()}}function bI(n,e){return"string"==typeof e?EI(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class kp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xc extends ZE{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new YE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class YE extends Xc{data(e={}){return super.data(e)}}class Mh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new kp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new YE(this._firestore,this._userDataWriter,r.key,r,new kp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new YE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new kp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const g=new YE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new kp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:MO(c.type),doc:g,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function KM(n,e){return n instanceof Xc&&e instanceof Xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mh&&e instanceof Mh&&n._firestore===e._firestore&&LM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ZM(n){if(zv(n)&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QE{}function xh(n,...e){for(const t of e)n=t._apply(n);return n}class xO extends QE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Op(e.firestore),r=function(o,u,c,g,v,I,S){let x;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){tx(S,I);const H=[];for(const z of S)H.push(ex(g,o,z));x={arrayValue:{values:H}}}else x=ex(g,o,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||tx(S,I),x=GM(c,"where",S,"in"===I||"not-in"===I);const V=vr.create(v,I,x);return function(H,z){if(z.S()){const Fe=fb(H);if(null!==Fe&&!Fe.isEqual(z.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${z.field.toString()}'`);const ft=Pm(H);null!==ft&&nx(0,z.field,ft)}const ye=function(Fe,ft){for(const ze of Fe.filters)if(ft.indexOf(ze.op)>=0)return ze.op;return null}(H,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ye)throw new xe(le.INVALID_ARGUMENT,ye===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new os(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new ss(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class RO extends QE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new fh(o,u);return function(g,v){if(null===Pm(g)){const I=fb(g);null!==I&&nx(0,I,v.field)}}(r,c),c}(e._query,this.hc,this.dc);return new os(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ss(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YM extends QE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new os(e.firestore,e.converter,Wv(e._query,this._c,this.wc))}}class QM extends QE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=XM(e,this.type,this.mc,this.gc);return new os(e.firestore,e.converter,(o=t,new ss((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class JM extends QE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=XM(e,this.type,this.mc,this.gc);return new os(e.firestore,e.converter,(o=t,new ss((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function XM(n,e,t,r){if(t[0]=(0,Kt.m9)(t[0]),t[0]instanceof ZE)return function(o,u,c,g,v){if(!g)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const S of dl(o))if(S.field.isKeyField())I.push(ll(u,g.key));else{const x=g.data.field(S.field);if(Fv(x))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=S.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}I.push(x)}return new Pc(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Op(n.firestore);return function(u,c,g,v,I,S){const x=u.explicitOrderBy;if(I.length>x.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let H=0;H<I.length;H++){const z=I[H];if(x[H].field.isKeyField()){if("string"!=typeof z)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof z}`);if(!km(u)&&-1!==z.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${z}' contains a slash.`);const ye=u.path.child(Qt.fromString(z));if(!je.isDocumentKey(ye))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const Fe=new je(ye);V.push(ll(c,Fe))}else{const ye=GM(g,v,z);V.push(ye)}}return new Pc(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function ex(n,e,t){if("string"==typeof(t=(0,Kt.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!km(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!je.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ll(n,new je(r))}if(t instanceof zn)return ll(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gI(t)}.`)}function tx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nx(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class EA{convertValue(e,t="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return xc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new yI(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const t=al(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Ct(Vb(r));const o=new nu(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||ir(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function II(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class BO extends EA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class rx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Op(e)}set(e,t,r){this._verifyNotCommitted();const o=Nh(e,this._firestore),u=II(o.converter,t,r),c=vI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Er.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Nh(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Jc?yA(this._dataReader,"WriteBatch.update",u._key,t,r,o):mA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new _h(t._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,Kt.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Fp extends EA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function ix(n,e,t){n=rn(n,zn);const r=rn(n.firestore,Jn),o=II(n.converter,e,t);return dy(r,[vI(Op(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Er.none())])}function sx(n,e,t,...r){n=rn(n,zn);const o=rn(n.firestore,Jn),u=Op(o);let c;return c="string"==typeof(e=(0,Kt.m9)(e))||e instanceof Jc?yA(u,"updateDoc",n._key,e,t,r):mA(u,"updateDoc",n._key,e),dy(o,[c.toMutation(n._key,Er.exists(!0))])}function ox(n,...e){var t,r,o;n=(0,Kt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||pA(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(pA(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let v,I,S;if(n instanceof zn)I=rn(n.firestore,Jn),S=Fc(n._key.path),v={next:x=>{e[c]&&e[c](wA(I,n,x))},error:e[c+1],complete:e[c+2]};else{const x=rn(n,os);I=rn(x.firestore,Jn),S=x._query;const V=new Fp(I);v={next:H=>{e[c]&&e[c](new Mh(I,V,x,H))},error:e[c+1],complete:e[c+2]},ZM(n._query)}return function(x,V,H,z){const ye=new fI(z),Fe=new RT(V,ye,H);return x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return AT(yield cy(x),Fe)})),()=>{ye.pa(),x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return MT(yield cy(x),Fe)}))}}(Hr(I),S,g,v)}function dy(n,e){return function(t,r){const o=new si;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function OR(n,e,t){return LT.apply(this,arguments)}(yield dA(t),r,o)})),o.promise}(Hr(n),e)}function wA(n,e,t){const r=t.docs.get(e._key),o=new Fp(n);return new Xc(n,o,e._key,r,new kp(t.hasPendingWrites,t.fromCache),e.converter)}class YO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Op(e)}get(e){const t=Nh(e,this._firestore),r=new BO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new ZE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ZE(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=Nh(e,this._firestore),u=II(o.converter,t,r),c=vI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=Nh(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Jc?yA(this._dataReader,"Transaction.update",u._key,t,r,o):mA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),r=new Fp(this._firestore);return super.get(e).then(o=>new Xc(this._firestore,r,t._key,o._document,new kp(!1,!1),t.converter))}}function bA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ux(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function lx(){if(!function nb(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ma=Ju.SDK_VERSION,(0,Ju._registerComponent)(new Nf.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Jn(o,new pC(t.getProvider("auth-internal")),new mC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Ju.registerVersion)(Rv,"3.4.7",n),(0,Ju.registerVersion)(Rv,"3.4.7","esm2017")}();class JE{constructor(e){this._delegate=e}static fromBase64String(e){return lx(),new JE(yl.fromBase64String(e))}static fromUint8Array(e){return ux(),new JE(yl.fromUint8Array(e))}toBase64(){return lx(),this._delegate.toBase64()}toUint8Array(){return ux(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IA(n){return function sP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oP{enableIndexedDbPersistence(e,t){return function fO(n,e){BM(n=rn(n,Jn));const t=Hr(n),r=n._freezeSettings(),o=new iA;return UM(t,o,new wM(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pO(n){BM(n=rn(n,Jn));const e=Hr(n),t=n._freezeSettings(),r=new iA;return UM(e,r,new ZR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gO(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Po.vt())return Promise.resolve();const o=r+"main";yield Po.delete(o)}),function(r){return t.apply(this,arguments)})(Sp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ih("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function uO(n,e,t,r={}){var o;const u=(n=rn(n,WE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ih("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=ii.MOCK_USER;else{c=(0,Kt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ii(v)}n._authCredentials=new Mm(new fC(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function yO(n){return function eO(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield CM(n),t=yield TM(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.lu.delete(0),qE(o)}(t)}))}(Hr(n=rn(n,Jn)))}(this._delegate)}disableNetwork(){return function _O(n){return function tO(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield CM(n),t=yield TM(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=qe(o);u.lu.add(0),yield ry(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Hr(n=rn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mO(n){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function LR(n,e){return $T.apply(this,arguments)}(yield dA(e),t)})),t.promise}(Hr(n=rn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function ZO(n,e){return function iO(n,e){const t=new fI(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield cy(n),o=t,qe(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield cy(n),o=t,void qe(r).Tu.delete(o);var r,o}))}}(Hr(n=rn(n,Jn)),pA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hy(this,kM(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ia(this,mI(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function lO(n,e){if(n=rn(n,WE),fA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new os(n,null,(t=e,new ss(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QO(n,e){return function sO(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(o=n,pI(o).then(u=>u.datastore));var o;new JR(n.asyncQueue,r,e,t).run()})),t.promise}(Hr(n=rn(n,Jn)),t=>e(new YO(n,t)))}(this._delegate,t=>e(new dx(this,t)))}batch(){return Hr(this._delegate),new hx(new rx(this._delegate,e=>dy(this._delegate,e)))}loadBundle(e){return function vO(n,e){const t=Hr(n=rn(n,Jn)),r=new dO;return function oO(n,e,t,r){const o=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return bM(v,I);if(v instanceof ArrayBuffer)return bM(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new YR(v,c);var v}(t,GE(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function KR(n,e,t){const r=qe(n);var o;(o=(0,ve.Z)(function*(u,c,g){try{const v=yield c.getMetadata();if(yield function(V,H){const z=qe(V),ye=kr(H.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Fe=>z.ds.getBundleMetadata(Fe,H.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(ye)>=0)}(u.localStore,v))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);g._updateProgress(dM(v));const I=new AR(v,u.localStore,c.M);let S=yield c.fa();for(;S;){const V=yield I.Nu(S);V&&g._updateProgress(V),S=yield c.fa()}const x=yield I.complete();return yield Qc(u,x.Ou,void 0),yield function(V,H){const z=qe(V);return z.persistence.runTransaction("Save bundle","readwrite",ye=>z.ds.saveBundleMetadata(ye,H))}(u.localStore,v),g._completeWith(x.progress),Promise.resolve(x.Mu)}catch(v){return ih("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var V}),function(u,c,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield dA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EO(n,e){return function aO(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.ds.getNamedQuery(u,r))}(yield cA(n),e)}))}(Hr(n=rn(n,Jn)),e).then(t=>t?new os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class DI extends EA{constructor(e){super(),this.firestore=e}convertBytes(e){return new JE(new yl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ia.forKey(t,this.firestore,null)}}class dx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new DI(e)}get(e){const t=Vp(e);return this._delegate.get(t).then(r=>new XE(this._firestore,new Xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Vp(e);return r?(bA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Vp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}}class hx{constructor(e){this._delegate=e}set(e,t,r){const o=Vp(e);return r?(bA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Vp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new YE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new e0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Lp(e,new DI(e),t),o.set(t,u)),u}}Lp.INSTANCES=new WeakMap;class Ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new DI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ia(t,new zn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Ia(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hy(this.firestore,kM(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Kt.m9)(e))instanceof zn&&FM(this._delegate,e)}set(e,t){t=bA("DocumentReference.set",t);try{return t?ix(this._delegate,e,t):ix(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sx(this._delegate,e):sx(this._delegate,e,t,...r)}catch(o){throw Ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function WO(n){return dy(rn(n.firestore,Jn),[new _h(n._key,Er.none())])}(this._delegate)}onSnapshot(...e){const t=fx(e),r=px(e,o=>new XE(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return ox(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $O(n){n=rn(n,zn);const e=rn(n.firestore,Jn),t=Hr(e),r=new Fp(e);return function nO(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,c){try{const g=yield function(v,I){const S=qe(v);return S.persistence.runTransaction("read document","readonly",x=>S.ai.Bs(x,I))}(o,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=oy(g,`Failed to get document '${u} from cache`);c.reject(v)}}),function(o,u,c){return r.apply(this,arguments)})(yield cA(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Xc(e,r,n._key,o,new kp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function HO(n){n=rn(n,zn);const e=rn(n.firestore,Jn);return AM(Hr(e),n._key,{source:"server"}).then(t=>wA(e,n,t))}(this._delegate):function jO(n){n=rn(n,zn);const e=rn(n.firestore,Jn);return AM(Hr(e),n._key).then(t=>wA(e,n,t))}(this._delegate),t.then(r=>new XE(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ia(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function fx(n){for(const e of n)if("object"==typeof e&&!IA(e))return e;return{}}function px(n,e){var t,r;let o;return o=IA(n[0])?n[0]:IA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class XE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return KM(this._delegate,e._delegate)}}class e0 extends XE{data(e){const t=this._delegate.data(e);return function hC(n,e){n||tt()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new DI(e)}where(e,t,r){try{return new xs(this.firestore,xh(this._delegate,function NO(n,e,t){const r=e,o=bI("where",n);return new xO(o,r,t)}(e,t,r)))}catch(o){throw Ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,xh(this._delegate,function OO(n,e="asc"){const t=e,r=bI("orderBy",n);return new RO(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,xh(this._delegate,function PO(n){return OM("limit",n),new YM("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,xh(this._delegate,function kO(n){return OM("limitToLast",n),new YM("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,xh(this._delegate,function FO(...n){return new QM("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,xh(this._delegate,function LO(...n){return new QM("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,xh(this._delegate,function VO(...n){return new JM("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,xh(this._delegate,function UO(...n){return new JM("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return LM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function qO(n){n=rn(n,os);const e=rn(n.firestore,Jn),t=Hr(e),r=new Fp(e);return function rO(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,c){try{const g=yield UE(o,u,!0),v=new pM(u,g.hi),I=v.Gu(g.documents),S=v.applyChanges(I,!1);c.resolve(S.snapshot)}catch(g){const v=oy(g,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(o,u,c){return r.apply(this,arguments)})(yield cA(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Mh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function zO(n){n=rn(n,os);const e=rn(n.firestore,Jn),t=Hr(e),r=new Fp(e);return SM(t,n._query,{source:"server"}).then(o=>new Mh(e,r,n,o))}(this._delegate):function GO(n){n=rn(n,os);const e=rn(n.firestore,Jn),t=Hr(e),r=new Fp(e);return ZM(n._query),SM(t,n._query).then(o=>new Mh(e,r,n,o))}(this._delegate),t.then(r=>new DA(this.firestore,new Mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fx(e),r=px(e,o=>new DA(this.firestore,new Mh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return ox(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}class uP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new e0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new e0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new e0(this._firestore,r))})}isEqual(e){return KM(this._delegate,e._delegate)}}class hy extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ia(this.firestore,e):null}doc(e){try{return new Ia(this.firestore,void 0===e?mI(this._delegate):mI(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function KO(n,e){const t=rn(n.firestore,Jn),r=mI(n),o=II(n.converter,e);return dy(t,[vI(Op(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ia(this.firestore,t))}isEqual(e){return FM(this._delegate,e._delegate)}withConverter(e){return new hy(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Vp(n){return rn(n,zn)}class CA{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new CA(yr.keyField().canonicalString())}isEqual(e){return(e=(0,Kt.m9)(e))instanceof Jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function XO(){return new gA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function JO(){return new KE("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function eP(...n){return new DO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function tP(...n){return new CO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function nP(n){return new TO("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lP={Firestore:cx,GeoPoint:yI,Timestamp:bn,Blob:JE,Transaction:dx,WriteBatch:hx,DocumentReference:Ia,DocumentSnapshot:XE,Query:xs,QueryDocumentSnapshot:e0,QuerySnapshot:DA,CollectionReference:hy,FieldPath:CA,FieldValue:Up,setLogLevel:function aP(n){!function dC(n){oo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function dP(n){(function cP(n,e){n.INTERNAL.registerComponent(new Nf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lP)))})(n,(e,t)=>new cx(e,t,new oP)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(kS.Z);var hP=P(6451),CI=P(5363),fP=P(6063);class pP extends fr.x{constructor(e=1/0,t=1/0,r=fP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!o&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const c=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)g=v;g&&r.splice(0,g+1)}}}var gP=P(3099);function gx(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,gP.B)({connector:()=>new pP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function mx(n,e){return(0,La.m)(e)?Ln(()=>n,e):Ln(()=>n)}var TA=P(9468);P(5867);const _x=new Map,EP={activated:!1,tokenObservers:[]},wP={initialized:!1,enabled:!1};function Di(n){return _x.get(n)||EP}function cu(n,e){_x.set(n,e)}function AI(){return wP}class TP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Kt.BH,yield function AP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Kt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ns=new Kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ex(n){if(!Di(n).activated)throw Ns.create("use-before-activation",{appName:n.name})}function xA(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(x){throw Ns.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw Ns.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(x){throw Ns.create("fetch-parse-error",{originalErrorMessage:x.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(v[1]),S=Date.now();return{token:g.attestationToken,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),NA.apply(this,arguments)}function RP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const t0="firebase-app-check-store";let xI=null;function bx(){return xI||(xI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ns.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(t0,{keyPath:"compositeKey"})}}catch(t){e(Ns.create("storage-open",{originalErrorMessage:t.message}))}}),xI)}function RA(){return RA=(0,ve.Z)(function*(n,e){const r=(yield bx()).transaction(t0,"readwrite"),u=r.objectStore(t0).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var I;g(Ns.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),RA.apply(this,arguments)}const n0=new Qa.Yd("@firebase/app-check");function Tx(n,e){return(0,Kt.hl)()?function FP(n,e){return function Ix(n,e){return RA.apply(this,arguments)}(function Cx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{n0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ax(){return AI().enabled}function Sx(){return FA.apply(this,arguments)}function FA(){return FA=(0,ve.Z)(function*(){const n=AI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FA.apply(this,arguments)}const $P={error:"UNKNOWN_ERROR"};function HP(n){return Kt.US.encodeString(JSON.stringify(n),!1)}function NI(n){return LA.apply(this,arguments)}function LA(){return LA=(0,ve.Z)(function*(n,e=!1){const t=n.app;Ex(t);const r=Di(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&RI(v)&&(o=v)}if(!e&&o&&RI(o))return{token:o.token};let g,c=!1;if(Ax()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xA(RP(t,yield Sx()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const v=yield r.exchangeTokenPromise;return yield Tx(t,v),cu(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?n0.warn(v.message):n0.error(v),u=v}return o?(g={token:o.token},cu(t,Object.assign(Object.assign({},r),{token:o})),yield Tx(t,o)):g=qP(u),c&&xx(t,g),g}),LA.apply(this,arguments)}function UA(n,e){const t=Di(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),cu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Mx(n){const{app:e}=n,t=Di(e);let r=t.tokenRefresher;r||(r=function GP(n){const{app:e}=n;return new TP((0,ve.Z)(function*(){let r;if(r=Di(e).token?yield NI(n,!0):yield NI(n),r.error)throw r.error}),()=>!0,()=>{const t=Di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),cu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xx(n,e){const t=Di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function RI(n){return n.expireTimeMillis-Date.now()>0}function qP(n){return{token:HP($P),error:n}}class zP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Di(this.app);for(const t of e)UA(this.app,t.next);return Promise.resolve()}}const Vx="app-check-internal";!function ok(){(0,Ju._registerComponent)(new Nf.wA("app-check",n=>function WP(n,e){return new zP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Vx).initialize()})),(0,Ju._registerComponent)(new Nf.wA(Vx,n=>function KP(n){return{getToken:e=>NI(n,e),addTokenListener:e=>function VA(n,e,t,r){const{app:o}=n,u=Di(o),c={next:t,error:r,type:e};if(cu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&RI(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),Mx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Mx(n))}(n,"INTERNAL",e),removeTokenListener:e=>UA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ju.registerVersion)("@firebase/app-check","0.5.5")}();class HA{constructor(){return(0,Rr.vb)("app-check")}}"undefined"!=typeof window&&window;var dk=P(127);const Bx=new m.OlP("angularfire2.auth.use-emulator"),jx=new m.OlP("angularfire2.auth.settings"),$x=new m.OlP("angularfire2.auth.tenant-id"),Hx=new m.OlP("angularfire2.auth.langugage-code"),Gx=new m.OlP("angularfire2.auth.use-device-language"),qx=new m.OlP("angularfire.auth.persistence"),zx=(n,e,t,r,o,u,c,g)=>(0,la.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),c)for(const[I,S]of Object.entries(c))v.settings[I]=S;return g&&v.setPersistence(g),v},[t,r,o,u,c,g]);let Wx=(()=>{class n{constructor(t,r,o,u,c,g,v,I,S,x,V,H){const z=new fr.x,ye=mt(void 0).pipe((0,CI.Q)(c.outsideAngular),Ln(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,4087)))),(0,kt.U)(()=>(0,la.on)(t,u,r)),(0,kt.U)(Fe=>zx(Fe,u,g,I,S,x,v,V)),gx({bufferSize:1,refCount:!1}));if(dr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{ye.pipe(eo()).subscribe();const ft=ye.pipe(Ln(nt=>nt.getRedirectResult().then(Ot=>Ot,()=>null)),Rr.iC,gx({bufferSize:1,refCount:!1})),ze=ye.pipe(Ln(nt=>new Jr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>nt.onAuthStateChanged(Tt=>Ot.next(Tt),Tt=>Ot.error(Tt),()=>Ot.complete()))})))),Ut=ye.pipe(Ln(nt=>new Jr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>nt.onIdTokenChanged(Tt=>Ot.next(Tt),Tt=>Ot.error(Tt),()=>Ot.complete()))}))));this.authState=ft.pipe(mx(ze),(0,TA.R)(c.outsideAngular),(0,CI.Q)(c.insideAngular)),this.user=ft.pipe(mx(Ut),(0,TA.R)(c.outsideAngular),(0,CI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ln(nt=>nt?(0,kn.D)(nt.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Ln(nt=>nt?(0,kn.D)(nt.getIdTokenResult()):mt(null))),this.credential=(0,hP.T)(ft,z,this.authState.pipe(vs(nt=>!nt))).pipe((0,kt.U)(nt=>(null==nt?void 0:nt.user)?nt:null),(0,TA.R)(c.outsideAngular),(0,CI.Q)(c.insideAngular))}return(0,la.pX)(this,ye,u,{spy:{apply:(Fe,ft,ze)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&ze.then(Ut=>z.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(la.Dh),m.LFG(la.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Rr.HU),m.LFG(Bx,8),m.LFG(jx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(Gx,8),m.LFG(qx,8),m.LFG(HA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Kx(n,e){return function fk(n,e=PS.z){return new Jr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function qA(n,e){return Kx(n,e).pipe((0,kt.U)(t=>({payload:t,type:"query"})))}function PI(n,e){return qA(n,e).pipe(Pi(void 0),x_(),(0,kt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const v=o.find(S=>S.doc.ref.isEqual(c.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function Zx(n,e,t){return PI(n,t).pipe(Sr((r,o)=>function gk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function aw(n,e=pi.y){return n=null!=n?n:uw,(0,Vr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Hn.x)(r,c=>{const g=e(c);(u||!n(o,g))&&(u=!1,o=g,r.next(c))}))})}(),(0,kt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function zA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Yx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Qx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,kt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Pi(void 0),x_(),vs(([r,o])=>o.length>0||!r),(0,kt.U)(([r,o])=>o),Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Sr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yx(e);return Zx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return qA(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rr.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Rr.iC)}add(e){return this.ref.add(e)}doc(e){return new Jx(this.ref.doc(e),this.afs)}}class Jx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=tN(r,t);return new Qx(o,u,this.afs)}snapshotChanges(){return function pk(n,e){return Kx(n,e).pipe(Pi(void 0),x_(),(0,kt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kn.D)(this.ref.get(e)).pipe(Rr.iC)}}class yk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PI(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vs(t=>t.length>0),Rr.iC):PI(this.query,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Sr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yx(e);return Zx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return qA(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Rr.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Rr.iC)}}const Xx=new m.OlP("angularfire2.enableFirestorePersistence"),eN=new m.OlP("angularfire2.firestore.persistenceSettings"),_k=new m.OlP("angularfire2.firestore.settings"),vk=new m.OlP("angularfire2.firestore.use-emulator");function tN(n,e=(t=>t)){return{query:e(n),ref:n}}let WA=(()=>{class n{constructor(t,r,o,u,c,g,v,I,S,x,V,H,z,ye,Fe,ft,ze){this.schedulers=v;const Ut=(0,la.on)(t,g,r),nt=S;x&&zx(Ut,g,V,z,ye,Fe,H,ft),[this.firestore,this.persistenceEnabled$]=(0,la.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Ot=g.runOutsideAngular(()=>Ut.firestore());if(u&&Ot.settings(u),nt&&Ot.useEmulator(...nt),o&&!dr(c)){const Tt=()=>{try{return(0,kn.D)(Ot.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Vn){return"undefined"!=typeof console&&console.warn(Vn),mt(!1)}};return[Ot,g.runOutsideAngular(Tt)]}return[Ot,mt(!1)]},[u,nt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=tN(o,r),g=this.schedulers.ngZone.run(()=>u);return new Qx(g,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new yk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Jx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(la.Dh),m.LFG(la.xv,8),m.LFG(Xx,8),m.LFG(_k,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Rr.HU),m.LFG(eN,8),m.LFG(vk,8),m.LFG(Wx,8),m.LFG(Bx,8),m.LFG(jx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(Gx,8),m.LFG(qx,8),m.LFG(HA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nN=(()=>{class n{constructor(){dk.Z.registerVersion("angularfire",Rr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Xx,useValue:!0},{provide:eN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[WA]}),n})();const rN=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(o=>((o,u,c)=>void 0===o.find(g=>u[g]!==c[g]))(t,o,e))};let kI=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("add-tasks").add(t)}getAll(t){return this._client.collection("add-tasks").valueChanges({idField:"id"}).pipe((0,kt.U)(r=>rN(r,t)))}set(t){this._client.doc("add-tasks/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(WA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[kI,{provide:M_,useExisting:kI},{provide:t_,useExisting:kI},{provide:bg,useExisting:kI}],imports:[[nN]]}),n})(),wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Wr,S_]]}),n})(),bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Wr,Wa.forChild([{path:"",component:VD}]),OS,Ek,wk]]}),n})();const Ik=[{path:"",loadChildren:()=>oD},{path:"addTask",loadChildren:()=>bk}];let Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Wa.forRoot(Ik)],Wa]}),n})(),iN=(()=>{class n{constructor(){this.todayString=(new Date).toDateString()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-date"]],decls:7,vars:1,consts:[[1,""],[1,"d-flex","align-items-start"],[1,"d-inline-flex","bd-highlight"],[1,"d-inline-flex","p-2","bd-highlight","align-self-center"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m._uU(4,"TODAY"),m.qZA()(),m.TgZ(5,"div",3),m._uU(6),m.qZA()()()),2&t&&(m.xp6(6),m.hij(" ",r.todayString," "))},encapsulation:2,changeDetection:0}),n})();const sN=new m.OlP("GETS_ALL_PHOTOS_DTO");function Ck(n,e){if(1&n&&(m.TgZ(0,"div",3)(1,"div",4),m._UZ(2,"img",5),m.qZA()()),2&n){const t=e.$implicit;m.xp6(2),m.Q6J("src",t.imageUrl,m.LSH)}}let Tk=(()=>{class n{constructor(t){this._getsAllPhotosDto=t,this.photos$=this._getsAllPhotosDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(sN))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-photos"]],decls:4,vars:3,consts:[[1,"container","mt-5"],[1,"row","d-flex","justify-content-center","pt-5"],["class"," col-3 mx-4",4,"ngFor","ngForOf"],[1,"col-3","mx-4"],[1,"me-2"],[1,"img-fluid",3,"src"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1),m.YNc(2,Ck,3,1,"div",2),m.ALo(3,"async"),m.qZA()()),2&t&&(m.xp6(2),m.Q6J("ngForOf",m.lcZ(3,1,r.photos$)))},directives:[nr],pipes:[mu],encapsulation:2,changeDetection:0}),n})(),Ak=(()=>{class n{constructor(){this.title="todo-list"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:16,vars:0,consts:[[1,"header"],[1,"container","px-4","text-light"],[1,"row","gx-5"],[1,"col"],[1,"p-3"],["routerLink","/",1,"mb-0"],[1,"container","px-4"],[1,"container-flex"],[1,"my-4","container"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),m._uU(6,"Todo App"),m.qZA()()()()()(),m.TgZ(7,"div",6)(8,"div",2)(9,"div",3)(10,"div",4),m._UZ(11,"lib-date"),m.TgZ(12,"div",7),m._UZ(13,"hr",8),m.qZA()()()()(),m._UZ(14,"router-outlet")(15,"lib-photos"))},directives:[_f,iN,nc,Tk],styles:[""]}),n})();class oN{}const ed="*";function aN(n,e=null){return{type:2,steps:n,options:e}}function uN(n){return{type:6,styles:n,offset:null}}function lN(n){Promise.resolve(null).then(n)}class r0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){lN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,o=0;const u=this.players.length;0==u?lN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++o==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,g)=>Math.max(c,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const tn=!1;function dN(n){return new m.vHH(3e3,tn)}function u1(){return"undefined"!=typeof window&&void 0!==window.document}function ZA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Rh(n){switch(n.length){case 0:return new r0;case 1:return n[0];default:return new cN(n)}}function hN(n,e,t,r,o={},u={}){const c=[],g=[];let v=-1,I=null;if(r.forEach(S=>{const x=S.offset,V=x==v,H=V&&I||{};Object.keys(S).forEach(z=>{let ye=z,Fe=S[z];if("offset"!==z)switch(ye=e.normalizePropertyName(ye,c),Fe){case"!":Fe=o[z];break;case ed:Fe=u[z];break;default:Fe=e.normalizeStyleValue(z,ye,Fe,c)}H[ye]=Fe}),V||g.push(H),I=H,v=x}),c.length)throw function Qk(n){return new m.vHH(3502,tn)}();return g}function YA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&QA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&QA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&QA(t,"destroy",n)))}}function QA(n,e,t){const r=t.totalTime,u=JA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function JA(n,e,t,r,o="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:o,totalTime:u,disabled:!!c}}function Fo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function fN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let XA=(n,e)=>!1,pN=(n,e,t)=>[],gN=null;function eS(n){const e=n.parentNode||n.host;return e===gN?null:e}(ZA()||"undefined"!=typeof Element)&&(u1()?(gN=(()=>document.documentElement)(),XA=(n,e)=>{for(;e;){if(e===n)return!0;e=eS(e)}return!1}):XA=(n,e)=>n.contains(e),pN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Bp=null,mN=!1;function yN(n){Bp||(Bp=function c1(){return"undefined"!=typeof document?document.body:null}()||{},mN=!!Bp.style&&"WebkitAppearance"in Bp.style);let e=!0;return Bp.style&&!function l1(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bp.style,!e&&mN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Bp.style)),e}const _N=XA,vN=pN;let EN=(()=>{class n{validateStyleProperty(t){return yN(t)}matchesElement(t,r){return!1}containsElement(t,r){return _N(t,r)}getParentElement(t){return eS(t)}query(t,r,o){return vN(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,u,c,g=[],v){return new r0(o,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),tS=(()=>{class n{}return n.NOOP=new EN,n})();const nS="ng-enter",LI="ng-leave",VI="ng-trigger",UI=".ng-trigger",bN="ng-animating",rS=".ng-animating";function jp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:iS(parseFloat(e[1]),e[2])}function iS(n,e){return"s"===e?1e3*n:n}function BI(n,e,t){return n.hasOwnProperty("duration")?n:function f1(n,e,t){let o,u=0,c="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(dN()),{duration:0,delay:0,easing:""};o=iS(parseFloat(g[1]),g[2]);const v=g[3];null!=v&&(u=iS(parseFloat(v),g[4]));const I=g[5];I&&(c=I)}else o=n;if(!t){let g=!1,v=e.length;o<0&&(e.push(function Mk(){return new m.vHH(3100,tn)}()),g=!0),u<0&&(e.push(function xk(){return new m.vHH(3101,tn)}()),g=!0),g&&e.splice(v,0,dN())}return{duration:o,delay:u,easing:c}}(n,e,t)}function fy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Oh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else fy(n,t);return t}function DN(n,e,t){return t?e+":"+t+";":""}function CN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=DN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=DN(0,m1(t),n.style[t]));n.setAttribute("style",e)}function _l(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const o=oS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[o]),n.style[o]=e[r]}),ZA()&&CN(n))}function $p(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=oS(t);n.style[r]=""}),ZA()&&CN(n))}function s0(n){return Array.isArray(n)?1==n.length?n[0]:aN(n):n}const sS=new RegExp("{{\\s*(.+?)\\s*}}","g");function TN(n){let e=[];if("string"==typeof n){let t;for(;t=sS.exec(n);)e.push(t[1]);sS.lastIndex=0}return e}function jI(n,e,t){const r=n.toString(),o=r.replace(sS,(u,c)=>{let g=e[c];return e.hasOwnProperty(c)||(t.push(function Rk(n){return new m.vHH(3003,tn)}()),g=""),g.toString()});return o==r?n:o}function $I(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const g1=/-+([a-z0-9])/g;function oS(n){return n.replace(g1,(...e)=>e[1].toUpperCase())}function m1(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Lo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Ok(n){return new m.vHH(3004,tn)}()}}function AN(n,e){return window.getComputedStyle(n)[e]}function b1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function I1(n,e,t){if(":"==n[0]){const v=function D1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Wk(n){return new m.vHH(3016,tn)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function zk(n){return new m.vHH(3015,tn)}()),e;const o=r[1],u=r[2],c=r[3];e.push(SN(o,c));"<"==u[0]&&!("*"==o&&"*"==c)&&e.push(SN(c,o))}(r,t,e)):t.push(n),t}const zI=new Set(["true","1"]),WI=new Set(["false","0"]);function SN(n,e){const t=zI.has(n)||WI.has(n),r=zI.has(e)||WI.has(e);return(o,u)=>{let c="*"==n||n==o,g="*"==e||e==u;return!c&&t&&"boolean"==typeof o&&(c=o?zI.has(n):WI.has(n)),!g&&r&&"boolean"==typeof u&&(g=u?zI.has(e):WI.has(e)),c&&g}}const C1=new RegExp("s*:selfs*,?","g");function aS(n,e,t,r){return new T1(n).build(e,t,r)}class T1{constructor(e){this._driver=e}build(e,t,r){const o=new M1(t);this._resetContextStyleTimingState(o);const u=Lo(this,s0(e),o);return o.unsupportedCSSPropertiesFound.size&&o.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,o=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function kk(){return new m.vHH(3006,tn)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const v=g,I=v.name;I.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,u.push(this.visitState(v,t))}),v.name=I}else if(1==g.type){const v=this.visitTransition(g,t);r+=v.queryCount,o+=v.depCount,c.push(v)}else t.errors.push(function Fk(){return new m.vHH(3007,tn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:o,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=o||{};r.styles.forEach(g=>{if(KI(g)){const v=g;Object.keys(v).forEach(I=>{TN(v[I]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&($I(u.values()),t.errors.push(function Lk(n,e){return new m.vHH(3008,tn)}()))}return{type:0,name:e.name,style:r,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Lo(this,s0(e.animation),t);return{type:1,matchers:b1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Hp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Lo(this,r,t)),options:Hp(e.options)}}visitGroup(e,t){const r=t.currentTime;let o=0;const u=e.steps.map(c=>{t.currentTime=r;const g=Lo(this,c,t);return o=Math.max(o,t.currentTime),g});return t.currentTime=o,{type:3,steps:u,options:Hp(e.options)}}visitAnimate(e,t){const r=function N1(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return uS(BI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=uS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||BI(r,e),uS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let o,u=e.styles?e.styles:uN({});if(5==u.type)o=this.visitKeyframes(u,t);else{let c=e.styles,g=!1;if(!c){g=!0;const I={};r.easing&&(I.easing=r.easing),c=uN(I)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=g,o=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==ed?r.push(c):t.errors.push(function Vk(n){return new m.vHH(3002,tn)}()):r.push(c)}):r.push(e.styles);let o=!1,u=null;return r.forEach(c=>{if(KI(c)){const g=c,v=g.easing;if(v&&(u=v,delete g.easing),!o)for(let I in g)if(g[I].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let o=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(g=>{if(!this._driver.validateStyleProperty(g))return delete c[g],void t.unsupportedCSSPropertiesFound.add(g);const v=t.collectedStyles[t.currentQuerySelector],I=v[g];let S=!0;I&&(u!=o&&u>=I.startTime&&o<=I.endTime&&(t.errors.push(function Uk(n,e,t,r,o){return new m.vHH(3010,tn)}()),S=!1),u=I.startTime),S&&(v[g]={startTime:u,endTime:o}),t.options&&function p1(n,e,t){const r=e.params||{},o=TN(n);o.length&&o.forEach(u=>{r.hasOwnProperty(u)||t.push(function Nk(n){return new m.vHH(3001,tn)}())})}(c[g],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Bk(){return new m.vHH(3011,tn)}()),r;let u=0;const c=[];let g=!1,v=!1,I=0;const S=e.steps.map(ft=>{const ze=this._makeStyleAst(ft,t);let Ut=null!=ze.offset?ze.offset:function x1(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(KI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(KI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ze.styles),nt=0;return null!=Ut&&(u++,nt=ze.offset=Ut),v=v||nt<0||nt>1,g=g||nt<I,I=nt,c.push(nt),ze});v&&t.errors.push(function jk(){return new m.vHH(3012,tn)}()),g&&t.errors.push(function $k(){return new m.vHH(3200,tn)}());const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push(function Hk(){return new m.vHH(3202,tn)}()):0==u&&(V=1/(x-1));const H=x-1,z=t.currentTime,ye=t.currentAnimateTimings,Fe=ye.duration;return S.forEach((ft,ze)=>{const Ut=V>0?ze==H?1:V*ze:c[ze],nt=Ut*Fe;t.currentTime=z+ye.delay+nt,ye.duration=nt,this._validateStyleAst(ft,t),ft.offset=Ut,r.styles.push(ft)}),r}visitReference(e,t){return{type:8,animation:Lo(this,s0(e.animation),t),options:Hp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Hp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Hp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function A1(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(C1,"")),n=n.replace(/@\*/g,UI).replace(/@\w+/g,t=>UI+"-"+t.substr(1)).replace(/:animating/g,rS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Fo(t.collectedStyles,t.currentQuerySelector,{});const g=Lo(this,s0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:o.limit||0,optional:!!o.optional,includeSelf:c,animation:g,originalSelector:e.selector,options:Hp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Gk(){return new m.vHH(3013,tn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:BI(e.timings,t.errors,!0);return{type:12,animation:Lo(this,s0(e.animation),t),timings:r,options:null}}}class M1{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function KI(n){return!Array.isArray(n)&&"object"==typeof n}function Hp(n){return n?(n=fy(n)).params&&(n.params=function S1(n){return n?fy(n):null}(n.params)):n={},n}function uS(n,e,t){return{duration:n,delay:e,easing:t}}function lS(n,e,t,r,o,u,c=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:o,delay:u,totalTime:o+u,easing:c,subTimeline:g}}class ZI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const P1=new RegExp(":enter","g"),F1=new RegExp(":leave","g");function cS(n,e,t,r,o,u={},c={},g,v,I=[]){return(new L1).buildKeyframes(n,e,t,r,o,u,c,g,v,I)}class L1{buildKeyframes(e,t,r,o,u,c,g,v,I,S=[]){I=I||new ZI;const x=new dS(e,t,I,o,u,S,[]);x.options=v,x.currentTimeline.setStyles([c],null,x.errors,v),Lo(this,r,x);const V=x.timelines.filter(H=>H.containsAnimation());if(Object.keys(g).length){let H;for(let z=V.length-1;z>=0;z--){const ye=V[z];if(ye.element===t){H=ye;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([g],null,x.errors,v)}return V.length?V.map(H=>H.buildKeyframes()):[lS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const o=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,o,o.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?jp(r.duration):null,g=null!=r.delay?jp(r.delay):null;return 0!==c&&e.forEach(v=>{const I=t.appendInstructionToTimeline(v,c,g);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Lo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let o=t;const u=e.options;if(u&&(u.params||u.delay)&&(o=t.createSubContext(u),o.transformIntoNewTimeline(),null!=u.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=YI);const c=jp(u.delay);o.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Lo(this,c,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let o=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?jp(e.options.delay):0;e.steps.forEach(c=>{const g=t.createSubContext(e.options);u&&g.delayNextStep(u),Lo(this,c,g),o=Math.max(o,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return BI(t.params?jI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=o&&o.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,u=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(v=>{g.forwardTime((v.offset||0)*u),g.setStyles(v.styles,v.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(o+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,o=e.options||{},u=o.delay?jp(o.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=YI);let c=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=g.length;let v=null;g.forEach((I,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,I);u&&x.delayNextStep(u),I===t.element&&(v=x.currentTimeline),Lo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,o=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),g=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=g-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const x=S.currentTime;Lo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=o.currentTime-x+(o.startTime-r.currentTimeline.startTime)}}const YI={};class dS{constructor(e,t,r,o,u,c,g,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=u,this.errors=c,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new QI(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let o=this.options;null!=r.duration&&(o.duration=jp(r.duration)),null!=r.delay&&(o.delay=jp(r.delay));const u=r.params;if(u){let c=o.params;c||(c=this.options.params={}),Object.keys(u).forEach(g=>{(!t||!c.hasOwnProperty(g))&&(c[g]=jI(u[g],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return e}createSubContext(e=null,t,r){const o=t||this.element,u=new dS(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=YI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new V1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(u),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,o,u,c){let g=[];if(o&&g.push(this.element),e.length>0){e=(e=e.replace(P1,"."+this._enterClassName)).replace(F1,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),g.push(...I)}return!u&&0==g.length&&c.push(function qk(n){return new m.vHH(3014,tn)}()),g}}class QI{constructor(e,t,r,o){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new QI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||ed,this._currentKeyframe[t]=ed}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,o){t&&(this._previousKeyframe.easing=t);const u=o&&o.params||{},c=function U1(n,e){const t={};let r;return n.forEach(o=>{"*"===o?(r=r||Object.keys(e),r.forEach(u=>{t[u]=ed})):Oh(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(g=>{const v=jI(c[g],u,r);this._pendingStyles[g]=v,this._localTimelineStyles.hasOwnProperty(g)||(this._backFill[g]=this._globalTimelineStyles.hasOwnProperty(g)?this._globalTimelineStyles[g]:ed),this._updateStyle(g,v)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],o=e._styleSummary[t];(!r||o.time>r.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((g,v)=>{const I=Oh(g,!0);Object.keys(I).forEach(S=>{const x=I[S];"!"==x?e.add(S):x==ed&&t.add(S)}),r||(I.offset=v/this.duration),o.push(I)});const u=e.size?$I(e.values()):[],c=t.size?$I(t.values()):[];if(r){const g=o[0],v=fy(g);g.offset=0,v.offset=1,o=[g,v]}return lS(this.element,o,u,c,this.duration,this.startTime,this.easing,!1)}}class V1 extends QI{constructor(e,t,r,o,u,c,g=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=u,this._stretchStartingKeyframe=g,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,g=t/c,v=Oh(e[0],!1);v.offset=0,u.push(v);const I=Oh(e[0],!1);I.offset=NN(g),u.push(I);const S=e.length-1;for(let x=1;x<=S;x++){let V=Oh(e[x],!1);V.offset=NN((t+V.offset*r)/c),u.push(V)}r=c,t=0,o="",e=u}return lS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function NN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class hS{}class B1 extends hS{normalizePropertyName(e,t){return oS(e)}normalizeStyleValue(e,t,r,o){let u="";const c=r.toString().trim();if(j1[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&o.push(function Pk(n,e){return new m.vHH(3005,tn)}())}return c+u}}const j1=(()=>function $1(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function RN(n,e,t,r,o,u,c,g,v,I,S,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:g,queriedElements:v,preStyleProps:I,postStyleProps:S,totalTime:x,errors:V}}const fS={};class ON{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,o){return function H1(n,e,t,r,o){return n.some(u=>u(e,t,r,o))}(this.ast.matchers,e,t,r,o)}buildStyles(e,t,r){const o=this._stateStyles["*"],u=this._stateStyles[e],c=o?o.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,o,u,c,g,v,I,S){const x=[],V=this.ast.options&&this.ast.options.params||fS,z=this.buildStyles(r,g&&g.params||fS,x),ye=v&&v.params||fS,Fe=this.buildStyles(o,ye,x),ft=new Set,ze=new Map,Ut=new Map,nt="void"===o,Ot={params:Object.assign(Object.assign({},V),ye)},Tt=S?[]:cS(e,t,this.ast.animation,u,c,z,Fe,Ot,I,x);let Vn=0;if(Tt.forEach($i=>{Vn=Math.max($i.duration+$i.delay,Vn)}),x.length)return RN(t,this._triggerName,r,o,nt,z,Fe,[],[],ze,Ut,Vn,x);Tt.forEach($i=>{const En=$i.element,Un=Fo(ze,En,{});$i.preStyleProps.forEach(Gp=>Un[Gp]=!0);const Ta=Fo(Ut,En,{});$i.postStyleProps.forEach(Gp=>Ta[Gp]=!0),En!==t&&ft.add(En)});const sr=$I(ft.values());return RN(t,this._triggerName,r,o,nt,z,Fe,Tt,sr,ze,Ut,Vn)}}class G1{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},o=fy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(o[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(g=>{let v=c[g];v.length>1&&(v=jI(v,o,t));const I=this.normalizer.normalizePropertyName(g,t);v=this.normalizer.normalizeStyleValue(g,I,v,t),r[I]=v})}}),r}}class z1{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new G1(o.style,o.options&&o.options.params||{},r)}),PN(this.states,"true","1"),PN(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new ON(e,o,this.states))}),this.fallbackTransition=function W1(n,e,t){return new ON(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,o){return this.transitionFactories.find(c=>c.match(e,t,r,o))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function PN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const K1=new ZI;class Z1{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=aS(this._driver,t,r,[]);if(r.length)throw function Jk(n){return new m.vHH(3503,tn)}();this._animations[e]=u}_buildPlayer(e,t,r){const o=e.element,u=hN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(o,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const o=[],u=this._animations[e];let c;const g=new Map;if(u?(c=cS(this._driver,t,u,nS,LI,{},{},r,K1,o),c.forEach(S=>{const x=Fo(g,S.element,{});S.postStyleProps.forEach(V=>x[V]=null)})):(o.push(function Xk(){return new m.vHH(3300,tn)}()),c=[]),o.length)throw function e1(n){return new m.vHH(3504,tn)}();g.forEach((S,x)=>{Object.keys(S).forEach(V=>{S[V]=this._driver.computeStyle(x,V,ed)})});const I=Rh(c.map(S=>{const x=g.get(S.element);return this._buildPlayer(S,{},x)}));return this._playersById[e]=I,I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function t1(n){return new m.vHH(3301,tn)}();return t}listen(e,t,r,o){const u=JA(t,"","","");return YA(this._getPlayer(e),r,u,o),()=>{}}command(e,t,r,o){if("register"==r)return void this.register(e,o[0]);if("create"==r)return void this.create(e,t,o[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const kN="ng-animate-queued",pS="ng-animate-disabled",eF=[],FN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},tF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Da="__ng_removed";class gS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function sF(n){return null!=n?n:null}(r?e.value:e),r){const u=fy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const o0="void",mS=new gS(o0);class nF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ca(t,this._hostClassName)}listen(e,t,r,o){if(!this._triggers.hasOwnProperty(t))throw function n1(n,e){return new m.vHH(3302,tn)}();if(null==r||0==r.length)throw function r1(n){return new m.vHH(3303,tn)}();if(!function oF(n){return"start"==n||"done"==n}(r))throw function i1(n,e){return new m.vHH(3400,tn)}();const u=Fo(this._elementListeners,e,[]),c={name:t,phase:r,callback:o};u.push(c);const g=Fo(this._engine.statesByElement,e,{});return g.hasOwnProperty(t)||(Ca(e,VI),Ca(e,VI+"-"+t),g[t]=mS),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(c);v>=0&&u.splice(v,1),this._triggers[t]||delete g[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function s1(n){return new m.vHH(3401,tn)}();return t}trigger(e,t,r,o=!0){const u=this._getTrigger(t),c=new yS(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(Ca(e,VI),Ca(e,VI+"-"+t),this._engine.statesByElement.set(e,g={}));let v=g[t];const I=new gS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&I.absorbOptions(v.options),g[t]=I,v||(v=mS),I.value!==o0&&v.value===I.value){if(!function lF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const u=t[o];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,I.params)){const ye=[],Fe=u.matchStyles(v.value,v.params,ye),ft=u.matchStyles(I.value,I.params,ye);ye.length?this._engine.reportError(ye):this._engine.afterFlush(()=>{$p(e,Fe),_l(e,ft)})}return}const V=Fo(this._engine.playersByElement,e,[]);V.forEach(ye=>{ye.namespaceId==this.id&&ye.triggerName==t&&ye.queued&&ye.destroy()});let H=u.matchTransition(v.value,I.value,e,I.params),z=!1;if(!H){if(!o)return;H=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:v,toState:I,player:c,isFallbackTransition:z}),z||(Ca(e,kN),c.onStart(()=>{py(e,kN)})),c.onDone(()=>{let ye=this.players.indexOf(c);ye>=0&&this.players.splice(ye,1);const Fe=this._engine.playersByElement.get(e);if(Fe){let ft=Fe.indexOf(c);ft>=0&&Fe.splice(ft,1)}}),this.players.push(c),V.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,UI,!0);r.forEach(o=>{if(o[Da])return;const u=this._engine.fetchNamespacesByElement(o);u.size?u.forEach(c=>c.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,o){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const g=[];if(Object.keys(u).forEach(v=>{if(c.set(v,u[v].value),this._triggers[v]){const I=this.trigger(e,v,o0,o);I&&g.push(I)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Rh(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const o=new Set;t.forEach(u=>{const c=u.name;if(o.has(c))return;o.add(c);const v=this._triggers[c].fallbackTransition,I=r[c]||mS,S=new gS(o0),x=new yS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:I,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)o=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Da];(!u||u===FN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ca(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(g=>{if(g.name==r.triggerName){const v=JA(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,YA(r.player,g.phase,v,g.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const u=r.transition.ast.depCount,c=o.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class rF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new nF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,o=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let g=this.driver.getParentElement(t);for(;g;){const v=o.get(g);if(v){const I=r.indexOf(v);r.splice(I+1,0,e),c=!0;break}g=this.driver.getParentElement(g)}}else for(let g=u;g>=0;g--)if(this.driver.containsElement(r[g].hostElement,t)){r.splice(g+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return o.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let o=this._namespaceLookup[e];o&&o.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const o=Object.keys(r);for(let u=0;u<o.length;u++){const c=r[o[u]].namespaceId;if(c){const g=this._fetchNamespace(c);g&&t.add(g)}}}return t}trigger(e,t,r,o){if(JI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,o),!0}return!1}insertNode(e,t,r,o){if(!JI(t))return;const u=t[Da];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ca(e,pS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),py(e,pS))}removeNode(e,t,r,o){if(JI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,r,o,u){this.collectedLeaveElements.push(t),t[Da]={namespaceId:e,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,o,u){return JI(t)?this._fetchNamespace(e).listen(t,r,o,u):()=>{}}_buildInstruction(e,t,r,o,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,o,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,UI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,rS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Rh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Da];if(r&&r.setForRemoval){if(e[Da]=FN,r.namespaceId){this.destroyInnerAnimations(e);const o=this._fetchNamespace(r.namespaceId);o&&o.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(pS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ca(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Rh(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(e){throw function o1(n){return new m.vHH(3402,tn)}()}_flushAnimations(e,t){const r=new ZI,o=[],u=new Map,c=[],g=new Map,v=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const Et=this.driver.query(st,".ng-animate-queued",!0);for(let St=0;St<Et.length;St++)S.add(Et[St])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),H=UN(V,this.collectedEnterElements),z=new Map;let ye=0;H.forEach((st,Et)=>{const St=nS+ye++;z.set(Et,St),st.forEach(hn=>Ca(hn,St))});const Fe=[],ft=new Set,ze=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const Et=this.collectedLeaveElements[st],St=Et[Da];St&&St.setForRemoval&&(Fe.push(Et),ft.add(Et),St.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(hn=>ft.add(hn)):ze.add(Et))}const Ut=new Map,nt=UN(V,Array.from(ft));nt.forEach((st,Et)=>{const St=LI+ye++;Ut.set(Et,St),st.forEach(hn=>Ca(hn,St))}),e.push(()=>{H.forEach((st,Et)=>{const St=z.get(Et);st.forEach(hn=>py(hn,St))}),nt.forEach((st,Et)=>{const St=Ut.get(Et);st.forEach(hn=>py(hn,St))}),Fe.forEach(st=>{this.processLeaveNode(st)})});const Ot=[],Tt=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(St=>{const hn=St.player,Ci=St.element;if(Ot.push(hn),this.collectedEnterElements.length){const Rs=Ci[Da];if(Rs&&Rs.setForMove){if(Rs.previousTriggersValues&&Rs.previousTriggersValues.has(St.triggerName)){const qp=Rs.previousTriggersValues.get(St.triggerName),kh=this.statesByElement.get(St.element);kh&&kh[St.triggerName]&&(kh[St.triggerName].value=qp)}return void hn.destroy()}}const vl=!x||!this.driver.containsElement(x,Ci),Vo=Ut.get(Ci),Ph=z.get(Ci),or=this._buildInstruction(St,r,Ph,Vo,vl);if(or.errors&&or.errors.length)return void Tt.push(or);if(vl)return hn.onStart(()=>$p(Ci,or.fromStyles)),hn.onDestroy(()=>_l(Ci,or.toStyles)),void o.push(hn);if(St.isFallbackTransition)return hn.onStart(()=>$p(Ci,or.fromStyles)),hn.onDestroy(()=>_l(Ci,or.toStyles)),void o.push(hn);const XN=[];or.timelines.forEach(Rs=>{Rs.stretchStartingKeyframe=!0,this.disabledNodes.has(Rs.element)||XN.push(Rs)}),or.timelines=XN,r.append(Ci,or.timelines),c.push({instruction:or,player:hn,element:Ci}),or.queriedElements.forEach(Rs=>Fo(g,Rs,[]).push(hn)),or.preStyleProps.forEach((Rs,qp)=>{const kh=Object.keys(Rs);if(kh.length){let zp=v.get(qp);zp||v.set(qp,zp=new Set),kh.forEach(vS=>zp.add(vS))}}),or.postStyleProps.forEach((Rs,qp)=>{const kh=Object.keys(Rs);let zp=I.get(qp);zp||I.set(qp,zp=new Set),kh.forEach(vS=>zp.add(vS))})});if(Tt.length){const st=[];Tt.forEach(Et=>{st.push(function a1(n,e){return new m.vHH(3505,tn)}())}),Ot.forEach(Et=>Et.destroy()),this.reportError(st)}const Vn=new Map,sr=new Map;c.forEach(st=>{const Et=st.element;r.has(Et)&&(sr.set(Et,Et),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,Vn))}),o.forEach(st=>{const Et=st.element;this._getPreviousPlayers(Et,!1,st.namespaceId,st.triggerName,null).forEach(hn=>{Fo(Vn,Et,[]).push(hn),hn.destroy()})});const $i=Fe.filter(st=>jN(st,v,I)),En=new Map;VN(En,this.driver,ze,I,ed).forEach(st=>{jN(st,v,I)&&$i.push(st)});const Ta=new Map;H.forEach((st,Et)=>{VN(Ta,this.driver,new Set(st),v,"!")}),$i.forEach(st=>{const Et=En.get(st),St=Ta.get(st);En.set(st,Object.assign(Object.assign({},Et),St))});const Gp=[],QN=[],JN={};c.forEach(st=>{const{element:Et,player:St,instruction:hn}=st;if(r.has(Et)){if(S.has(Et))return St.onDestroy(()=>_l(Et,hn.toStyles)),St.disabled=!0,St.overrideTotalTime(hn.totalTime),void o.push(St);let Ci=JN;if(sr.size>1){let Vo=Et;const Ph=[];for(;Vo=Vo.parentNode;){const or=sr.get(Vo);if(or){Ci=or;break}Ph.push(Vo)}Ph.forEach(or=>sr.set(or,Ci))}const vl=this._buildAnimation(St.namespaceId,hn,Vn,u,Ta,En);if(St.setRealPlayer(vl),Ci===JN)Gp.push(St);else{const Vo=this.playersByElement.get(Ci);Vo&&Vo.length&&(St.parentPlayer=Rh(Vo)),o.push(St)}}else $p(Et,hn.fromStyles),St.onDestroy(()=>_l(Et,hn.toStyles)),QN.push(St),S.has(Et)&&o.push(St)}),QN.forEach(st=>{const Et=u.get(st.element);if(Et&&Et.length){const St=Rh(Et);st.setRealPlayer(St)}}),o.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<Fe.length;st++){const Et=Fe[st],St=Et[Da];if(py(Et,LI),St&&St.hasAnimation)continue;let hn=[];if(g.size){let vl=g.get(Et);vl&&vl.length&&hn.push(...vl);let Vo=this.driver.query(Et,rS,!0);for(let Ph=0;Ph<Vo.length;Ph++){let or=g.get(Vo[Ph]);or&&or.length&&hn.push(...or)}}const Ci=hn.filter(vl=>!vl.destroyed);Ci.length?aF(this,Et,Ci):this.processLeaveNode(Et)}return Fe.length=0,Gp.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const Et=this.players.indexOf(st);this.players.splice(Et,1)}),st.play()}),Gp}elementContainsData(e,t){let r=!1;const o=t[Da];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,o,u){let c=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(c=g)}else{const g=this.playersByElement.get(e);if(g){const v=!u||u==o0;g.forEach(I=>{I.queued||!v&&I.triggerName!=o||c.push(I)})}}return(r||o)&&(c=c.filter(g=>!(r&&r!=g.namespaceId||o&&o!=g.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const I=v.element,S=I!==u,x=Fo(r,I,[]);this._getPreviousPlayers(I,S,c,g,t.toState).forEach(H=>{const z=H.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),H.destroy(),x.push(H)})}$p(u,t.fromStyles)}_buildAnimation(e,t,r,o,u,c){const g=t.triggerName,v=t.element,I=[],S=new Set,x=new Set,V=t.timelines.map(z=>{const ye=z.element;S.add(ye);const Fe=ye[Da];if(Fe&&Fe.removedBeforeQueried)return new r0(z.duration,z.delay);const ft=ye!==v,ze=function uF(n){const e=[];return BN(n,e),e}((r.get(ye)||eF).map(Vn=>Vn.getRealPlayer())).filter(Vn=>!!Vn.element&&Vn.element===ye),Ut=u.get(ye),nt=c.get(ye),Ot=hN(0,this._normalizer,0,z.keyframes,Ut,nt),Tt=this._buildPlayer(z,Ot,ze);if(z.subTimeline&&o&&x.add(ye),ft){const Vn=new yS(e,g,ye);Vn.setRealPlayer(Tt),I.push(Vn)}return Tt});I.forEach(z=>{Fo(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function iF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),S.forEach(z=>Ca(z,bN));const H=Rh(V);return H.onDestroy(()=>{S.forEach(z=>py(z,bN)),_l(v,t.toStyles)}),x.forEach(z=>{Fo(o,z,[]).push(H)}),H}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new r0(e.duration,e.delay)}}class yS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new r0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>YA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Fo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function JI(n){return n&&1===n.nodeType}function LN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function VN(n,e,t,r,o){const u=[];t.forEach(v=>u.push(LN(v)));const c=[];r.forEach((v,I)=>{const S={};v.forEach(x=>{const V=S[x]=e.computeStyle(I,x,o);(!V||0==V.length)&&(I[Da]=tF,c.push(I))}),n.set(I,S)});let g=0;return t.forEach(v=>LN(v,u[g++])),c}function UN(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const o=new Set(e),u=new Map;function c(g){if(!g)return 1;let v=u.get(g);if(v)return v;const I=g.parentNode;return v=t.has(I)?I:o.has(I)?1:c(I),u.set(g,v),v}return e.forEach(g=>{const v=c(g);1!==v&&t.get(v).push(g)}),t}function Ca(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function py(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function aF(n,e,t){Rh(t).onDone(()=>n.processLeaveNode(e))}function BN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof cN?BN(r.players,e):e.push(r)}}function jN(n,e,t){const r=t.get(n);if(!r)return!1;let o=e.get(n);return o?r.forEach(u=>o.add(u)):e.set(n,r),t.delete(n),!0}class XI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,u)=>{},this._transitionEngine=new rF(e,t,r),this._timelineEngine=new Z1(e,t,r),this._transitionEngine.onRemovalComplete=(o,u)=>this.onRemovalComplete(o,u)}registerTrigger(e,t,r,o,u){const c=e+"-"+o;let g=this._triggerCache[c];if(!g){const v=[],S=aS(this._driver,u,v,[]);if(v.length)throw function Yk(n,e){return new m.vHH(3404,tn)}();g=function q1(n,e,t){return new z1(n,e,t)}(o,S,this._normalizer),this._triggerCache[c]=g}this._transitionEngine.registerTrigger(t,o,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,o){this._transitionEngine.insertNode(e,t,r,o)}onRemove(e,t,r,o){this._transitionEngine.removeNode(e,t,o||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,o){if("@"==r.charAt(0)){const[u,c]=fN(r);this._timelineEngine.command(u,t,c,o)}else this._transitionEngine.trigger(e,t,r,o)}listen(e,t,r,o,u){if("@"==r.charAt(0)){const[c,g]=fN(r);return this._timelineEngine.listen(c,t,g,u)}return this._transitionEngine.listen(e,t,r,o,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let dF=(()=>{class n{constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&_l(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_l(this._element,this._initialStyles),this._endStyles&&(_l(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&($p(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($p(this._element,this._endStyles),this._endStyles=null),_l(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function _S(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const o=t[r];hF(o)&&(e=e||{},e[o]=n[o])}return e}function hF(n){return"display"===n||"position"===n}class $N{constructor(e,t,r,o){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:AN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class fF{validateStyleProperty(e){return yN(e)}matchesElement(e,t){return!1}containsElement(e,t){return _N(e,t)}getParentElement(e){return eS(e)}query(e,t,r){return vN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,o,u,c=[]){const v={duration:r,delay:o,fill:0==o?"both":"forwards"};u&&(v.easing=u);const I={},S=c.filter(V=>V instanceof $N);(function y1(n,e){return 0===n||0===e})(r,o)&&S.forEach(V=>{let H=V.currentSnapshot;Object.keys(H).forEach(z=>I[z]=H[z])}),t=function _1(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(g=>{u.hasOwnProperty(g)||c.push(g),u[g]=t[g]}),c.length)for(var o=1;o<e.length;o++){let g=e[o];c.forEach(function(v){g[v]=AN(n,v)})}}return e}(e,t=t.map(V=>Oh(V,!1)),I);const x=function cF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=_S(e[0]),e.length>1&&(r=_S(e[e.length-1]))):e&&(t=_S(e)),t||r?new dF(n,t,r):null}(e,t);return new $N(e,t,v,x)}}let pF=(()=>{class n extends oN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?aN(t):t;return HN(this._renderer,null,r,"register",[o]),new gF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class gF extends class Sk{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new mF(this._id,e,t||{},this._renderer)}}class mF{constructor(e,t,r,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return HN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function HN(n,e,t,r,o){return n.setProperty(e,`@@${t}:${r}`,o)}const GN="@.disabled";let yF=(()=>{class n{constructor(t,r,o){this.delegate=t,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const g=null==c?void 0:c.parentNode(u);g&&c.removeChild(g,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new qN("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(c,g,t,S.name,S)};return r.data.animation.forEach(v),new _F(this,g,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,o){t>=0&&t<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,g]=u;c(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(XI),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class qN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,o=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,o){this.delegate.setAttribute(e,t,r,o)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,o){this.delegate.setStyle(e,t,r,o)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==GN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class _F extends qN{constructor(e,t,r,o){super(t,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==GN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const o=function vF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function EF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,o,u,c,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let wF=(()=>{class n extends XI{constructor(t,r,o){super(t.body,r,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re),m.LFG(tS),m.LFG(hS))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const zN=new m.OlP("AnimationModuleType"),WN=[{provide:oN,useClass:pF},{provide:hS,useFactory:function bF(){return new B1}},{provide:XI,useClass:wF},{provide:m.FYo,useFactory:function IF(n,e,t){return new yF(n,e,t)},deps:[_n,XI,m.R0b]}],KN=[{provide:tS,useFactory:()=>new fF},{provide:zN,useValue:"BrowserAnimations"},...WN],DF=[{provide:tS,useClass:EN},{provide:zN,useValue:"NoopAnimations"},...WN];let CF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?DF:KN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:KN,imports:[mo]}),n})();const ZN_firebase={projectId:"todoapp-36d5d",appId:"1:760172319480:web:92da5771ed44ba6844210d",storageBucket:"todoapp-36d5d.appspot.com",locationId:"europe-west",apiKey:"AIzaSyB7lawDA7paBj5OpcY42BYicXSPSVQifqE",authDomain:"todoapp-36d5d.firebaseapp.com",messagingSenderId:"760172319480",measurementId:"G-60X20TR04J"};let TF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[iN]}),n.\u0275inj=m.cJS({providers:[Lh],imports:[[Wr,mo,sw]]}),n})(),AF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Wr]]}),n})(),YN=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("image").valueChanges({idField:"id"}).pipe((0,kt.U)(r=>rN(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(WA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),SF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[YN,{provide:sN,useExisting:YN}],imports:[[nN]]}),n})(),MF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[Ak]}),n.\u0275inj=m.cJS({providers:[],imports:[[mo,Dk,CF,TF,la.hO.initializeApp(ZN_firebase),AF,SF]]}),n})();(0,m.G48)(),xl().bootstrapModule(MF).catch(n=>console.error(n))},5867:(ot,Te,P)=>{P.d(Te,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=P(9681);(0,m.registerVersion)("firebase","9.6.10","app")},127:(ot,Te,P)=>{P.d(Te,{Z:()=>m.Z});var m=P(3942);m.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ot,Te,P)=>{P.r(Te);var m=P(5861),Y=P(3942),O=P(2090),ae=P(9681),X=P(655),pe=P(1877),re=P(4859);const Re=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new pe.Yd("@firebase/auth");function We(y,...h){Xe.logLevel<=pe.in.ERROR&&Xe.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw $e(y,...h)}function _e(y,...h){return $e(y,...h)}function Ee(y,h,p){const E=Object.assign(Object.assign({},Le()),{[h]:p});return new O.LL("auth","Firebase",E).create(h,{appName:y.name})}function He(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(p,...E)}return he.create(y,...h)}function te(y,h,...p){if(!y)throw $e(h,...p)}function W(y){const h="INTERNAL ASSERTION FAILED: "+y;throw We(h),new Error(h)}function ne(y,h){y||W(h)}const ge=new Map;function ie(y){ne(y instanceof Function,"Expected a class definition");let h=ge.get(y);return h?(ne(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ge.set(y,h),h)}function It(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Jt(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class ln{constructor(h,p){this.shortDelay=h,this.longDelay=p,ne(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function at(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(y,h){ne(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Ti{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},as=new ln(3e4,6e4);function Xt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function qt(y,h,p,E){return ar.apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(y,h,p,E,A={}){return ui(y,A,(0,m.Z)(function*(){let R={},q={};E&&("GET"===h?q=E:R={body:JSON.stringify(E)});const se=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Ti.fetch()(Lr(y,y.config.apiHost,p,se),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ui(y,h,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,m.Z)(function*(y,h,p){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},sn),h);try{const A=new us(y),R=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw ls(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const se=R.ok?q.errorMessage:q.error.message,[Ue,Qe]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw ls(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ue)throw ls(y,"email-already-in-use",q);const yt=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ee(y,yt,Qe);De(y,yt)}}catch(A){if(A instanceof O.ZR)throw A;De(y,"network-request-failed")}})).apply(this,arguments)}function Fr(y,h,p,E){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(y,h,p,E,A={}){const R=yield qt(y,h,p,E,A);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Lr(y,h,p,E){const A=`${h}${p}?${E}`;return y.config.emulator?cn(y.config,A):`${y.config.apiScheme}://${A}`}class us{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(_e(this.auth,"network-request-failed")),as.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ls(y,h,p){const E={appName:y.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const A=_e(y,h,E);return A.customData._tokenResponse=p,A}function Gr(){return(Gr=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Xn(y,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function li(y,h){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function yn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Aa(){return(Aa=(0,m.Z)(function*(y,h=!1){const p=(0,O.m9)(y),E=yield p.getIdToken(h),A=rt(E);te(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:A,token:E,authTime:yn(zt(A.auth_time)),issuedAtTime:yn(zt(A.iat)),expirationTime:yn(zt(A.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(y){return 1e3*Number(y)}function rt(y){const[h,p,E]=y.split(".");if(void 0===h||void 0===p||void 0===E)return We("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(p);return A?JSON.parse(A):(We("Failed to decode base64 JWT payload"),null)}catch(A){return We("Caught error parsing JWT payload as JSON",A),null}}function ur(y,h){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Ht(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Ht({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class lo{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class br{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function lr(y){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(y){var h;const p=y.auth,E=yield y.getIdToken(),A=yield ur(y,li(p,{idToken:E}));te(null==A?void 0:A.users.length,p,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const q=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Ce(R.providerUserInfo):[],se=Ke(y.providerData,q),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==se?void 0:se.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:se,metadata:new br(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,it)})).apply(this,arguments)}function Bt(){return(Bt=(0,m.Z)(function*(y){const h=(0,O.m9)(y);yield lr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ke(y,h){return[...y.filter(E=>!h.some(A=>A.providerId===E.providerId)),...h]}function Ce(y){return y.map(h=>{var{providerId:p}=h,E=(0,X._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function dt(){return(dt=(0,m.Z)(function*(y,h){const p=yield ui(y,{},(0,m.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,q=Lr(y,A,"/v1/token",`key=${R}`),se=yield y._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",Ti.fetch()(q,{method:"POST",headers:se,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function vt(y){const h=rt(y);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,m.Z)(function*(){return te(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:q}=yield function Ye(y,h){return dt.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(A,R,Number(q))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:A,expirationTime:R}=p,q=new jt;return E&&(te("string"==typeof E,"internal-error",{appName:h}),q.refreshToken=E),A&&(te("string"==typeof A,"internal-error",{appName:h}),q.accessToken=A),R&&(te("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return W("not implemented")}}function Lt(y,h){te("string"==typeof y||void 0===y,"internal-error",{appName:h})}class B{constructor(h){var{uid:p,auth:E,stsTokenManager:A}=h,R=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new br(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const E=yield ur(p,p.stsTokenManager.getToken(p.auth,h));return te(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function Ps(y){return Aa.apply(this,arguments)}(this,h)}reload(){return function Ir(y){return Bt.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new B(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,m.Z)(function*(){let A=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield lr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield ur(h,function ut(y,h){return Gr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,A,R,q,se,Ue,Qe,yt;const it=null!==(E=p.displayName)&&void 0!==E?E:void 0,Mn=null!==(A=p.email)&&void 0!==A?A:void 0,Xi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,uc=null!==(q=p.photoURL)&&void 0!==q?q:void 0,Hu=null!==(se=p.tenantId)&&void 0!==se?se:void 0,Gu=null!==(Ue=p._redirectEventId)&&void 0!==Ue?Ue:void 0,gf=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,Gy=null!==(yt=p.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:sa,emailVerified:Vd,isAnonymous:Ud,providerData:mf,stsTokenManager:Bd}=p;te(sa&&Bd,h,"internal-error");const Ui=jt.fromJSON(this.name,Bd);te("string"==typeof sa,h,"internal-error"),Lt(it,h.name),Lt(Mn,h.name),te("boolean"==typeof Vd,h,"internal-error"),te("boolean"==typeof Ud,h,"internal-error"),Lt(Xi,h.name),Lt(uc,h.name),Lt(Hu,h.name),Lt(Gu,h.name),Lt(gf,h.name),Lt(Gy,h.name);const yf=new B({uid:sa,auth:h,email:Mn,emailVerified:Vd,displayName:it,isAnonymous:Ud,photoURL:uc,phoneNumber:Xi,tenantId:Hu,stsTokenManager:Ui,createdAt:gf,lastLoginAt:Gy});return mf&&Array.isArray(mf)&&(yf.providerData=mf.map(_g=>Object.assign({},_g))),Gu&&(yf._redirectEventId=Gu),yf}static _fromIdTokenResponse(h,p,E=!1){return(0,m.Z)(function*(){const A=new jt;A.updateFromServerResponse(p);const R=new B({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:E});return yield lr(R),R})()}}const G=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,E){var A=this;return(0,m.Z)(function*(){A.storage[p]=E})()}_get(p){var E=this;return(0,m.Z)(function*(){const A=E.storage[p];return void 0===A?null:A})()}_remove(p){var E=this;return(0,m.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return y.type="NONE",y})();function ce(y,h,p){return`firebase:${y}:${h}:${p}`}class Q{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:A,name:R}=this.auth;this.fullUserKey=ce(this.userKey,A.apiKey,R),this.fullPersistenceKey=ce("persistence",A.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?B._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Q(ie(G),h,E);const A=(yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=A[0]||ie(G);const q=ce(E,h.config.apiKey,h.name);let se=null;for(const Qe of p)try{const yt=yield Qe._get(q);if(yt){const it=B._fromJSON(h,yt);Qe!==R&&(se=it),R=Qe;break}}catch(yt){}const Ue=A.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],se&&(yield R._set(q,se.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(yt){if(yt!==R)try{yield yt._remove(q)}catch(it){}});return function(yt){return Qe.apply(this,arguments)}}())),new Q(R,h,E)):new Q(R,h,E)})()}}function Ve(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Wt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(gt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Nt(h))return"Blackberry";if(fn(h))return"Webos";if(Zt(h))return"Safari";if((h.includes("chrome/")||Dr(h))&&!h.includes("edge/"))return"Chrome";if(Dn(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function gt(y=(0,O.z$)()){return/firefox\//i.test(y)}function Zt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Dr(y=(0,O.z$)()){return/crios\//i.test(y)}function Wt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Dn(y=(0,O.z$)()){return/android/i.test(y)}function Nt(y=(0,O.z$)()){return/blackberry/i.test(y)}function fn(y=(0,O.z$)()){return/webos/i.test(y)}function tr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function cs(y=(0,O.z$)()){return tr(y)||Dn(y)||fn(y)||Nt(y)||/windows phone/i.test(y)||Wt(y)}function Ma(y,h=[]){let p;switch(y){case"Browser":p=Ve((0,O.z$)());break;case"Worker":p=`${Ve((0,O.z$)())}-${y}`;break;default:p=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${E}`}class ci{constructor(h,p,E){this.app=h,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pt(this),this.idTokenSubscription=new Pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,R;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,h),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(q){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var E;let A=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,q=null==A?void 0:A._redirectEventId,se=yield p.tryRedirectSignIn(h);(!R||R===q)&&(null==se?void 0:se.user)&&(A=se.user)}return A?A._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(A){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){try{yield lr(h)}catch(E){if("auth/network-request-failed"!==E.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function pt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&te(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){if(!p._deleted)return h&&te(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,m.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,m.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&ie(h)||p._popupRedirectResolver;te(E,p,"argument-error"),p.redirectPersistenceManager=yield Q.create(p,[ie(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var E,A;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,A){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return te(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,E,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ma(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function Oe(y){return(0,O.m9)(y)}class Pt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function cr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Bn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class on{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return W("not implemented")}_getIdTokenResponse(h){return W("not implemented")}_linkToIdToken(h,p){return W("not implemented")}_getReauthenticationResolver(h){return W("not implemented")}}function On(y,h){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:resetPassword",Xt(y,h))})).apply(this,arguments)}function Mt(y,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ls(y,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:update",Xt(y,h))})).apply(this,arguments)}function nr(){return(nr=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithPassword",Xt(y,h))})).apply(this,arguments)}function ds(y,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:sendOobCode",Xt(y,h))})).apply(this,arguments)}function Ai(y,h){return an.apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(y,h){return ds(y,h)})).apply(this,arguments)}function hu(y,h){return fu.apply(this,arguments)}function fu(){return(fu=(0,m.Z)(function*(y,h){return ds(y,h)})).apply(this,arguments)}function Si(y,h){return di.apply(this,arguments)}function di(){return(di=(0,m.Z)(function*(y,h){return ds(y,h)})).apply(this,arguments)}function td(y,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,m.Z)(function*(y,h){return ds(y,h)})).apply(this,arguments)}function qr(){return(qr=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithEmailLink",Xt(y,h))})).apply(this,arguments)}function nd(){return(nd=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithEmailLink",Xt(y,h))})).apply(this,arguments)}class gu extends on{constructor(h,p,E,A=null){super("password",E),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new gu(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new gu(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function Vs(y,h){return nr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function pu(y,h){return qr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return Mt(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Fh(y,h){return nd.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function jn(y,h){return rd.apply(this,arguments)}function rd(){return(rd=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithIdp",Xt(y,h))})).apply(this,arguments)}class fs extends on{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new fs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A}=p,R=(0,X._T)(p,["providerId","signInMethod"]);if(!E||!A)return null;const q=new fs(E,A);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return jn(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,jn(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,jn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Kp(y,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:sendVerificationCode",Xt(y,h))})).apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithPhoneNumber",Xt(y,h))})).apply(this,arguments)}function id(){return(id=(0,m.Z)(function*(y,h){const p=yield Fr(y,"POST","/v1/accounts:signInWithPhoneNumber",Xt(y,h));if(p.temporaryProof)throw ls(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Yp={USER_NOT_FOUND:"user-not-found"};function sd(){return(sd=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithPhoneNumber",Xt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Yp)})).apply(this,arguments)}class Bo extends on{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Bo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Bo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function El(y,h){return Bs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Zp(y,h){return id.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Lh(y,h){return sd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:R}=h;return E||p||A||R?new Bo({verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:R}):null}}class ho{constructor(h){var p,E,A,R,q,se;const Ue=(0,O.zd)((0,O.pd)(h)),Qe=null!==(p=Ue.apiKey)&&void 0!==p?p:null,yt=null!==(E=Ue.oobCode)&&void 0!==E?E:null,it=function gy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);te(Qe&&yt&&it,"argument-error"),this.apiKey=Qe,this.operation=it,this.code=yt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Ue.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(se=Ue.tenantId)&&void 0!==se?se:null}static parseLink(h){const p=function yu(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||p||h||y}(h);try{return new ho(p)}catch(E){return null}}}let wl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,E){return gu._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const A=ho.parseLink(E);return te(A,"argument-error"),gu._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class js{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zr extends js{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class jo extends zr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return te("providerId"in p&&"signInMethod"in p,"argument-error"),fs._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return jo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return jo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:R,nonce:q,providerId:se}=h;if(!E&&!A&&!p&&!R||!se)return null;try{return new jo(se)._credential({idToken:p,accessToken:E,nonce:q,pendingToken:R})}catch(Ue){return null}}}let fo=(()=>{class y extends zr{constructor(){super("facebook.com")}static credential(p){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Na=(()=>{class y extends zr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:A}=p;if(!E&&!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),od=(()=>{class y extends zr{constructor(){super("github.com")}static credential(p){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Wr extends on{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return jn(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,jn(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,jn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A,pendingToken:R}=p;return E&&A&&R&&E===A?new Wr(E,R):null}static _create(h,p){return new Wr(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hi extends js{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return hi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return hi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Wr.fromJSON(h);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return Wr._create(E,p)}catch(A){return null}}}let _u=(()=>{class y extends zr{constructor(){super("twitter.com")}static credential(p,E){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=p;if(!E||!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function vu(y,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signUp",Xt(y,h))})).apply(this,arguments)}class dr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,A=!1){return(0,m.Z)(function*(){const R=yield B._fromIdTokenResponse(h,E,A),q=Uh(E);return new dr({user:R,providerId:q,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const A=Uh(E);return new dr({user:h,providerId:A,_tokenResponse:E,operationType:p})})()}}function Uh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ad(){return(ad=(0,m.Z)(function*(y){var h;const p=Oe(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new dr({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield vu(p,{returnSecureToken:!0}),A=yield dr._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class wu extends O.ZR{constructor(h,p,E,A){var R;super(p.code,p.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,A){return new wu(h,p,E,A)}}function bu(y,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?wu._fromErrorAndOperation(y,R,h,E):R})}function ps(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function bl(){return(bl=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);yield Hs(!0,p,h);const{providerUserInfo:E}=yield Xn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=ps(E||[]);return p.providerData=p.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function mn(y,h){return $o.apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(y,h,p=!1){const E=yield ur(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return dr._forOperation(y,"link",E)})).apply(this,arguments)}function Hs(y,h,p){return un.apply(this,arguments)}function un(){return(un=(0,m.Z)(function*(y,h,p){yield lr(h);const A=!1===y?"provider-already-linked":"no-such-provider";te(ps(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function ud(y,h){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(y,h,p=!1){const{auth:E}=y,A="reauthenticate";try{const R=yield ur(y,bu(E,A,h,y),p);te(R.idToken,E,"internal-error");const q=rt(R.idToken);te(q,E,"internal-error");const{sub:se}=q;return te(y.uid===se,E,"user-mismatch"),dr._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(E,"user-mismatch"),R}})).apply(this,arguments)}function go(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(y,h,p=!1){const E="signIn",A=yield bu(y,E,h),R=yield dr._fromIdTokenResponse(y,E,A);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Pn(y,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(y,h){return go(Oe(y),h)})).apply(this,arguments)}function Mi(y,h){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Hs(!1,p,h.providerId),mn(p,h)})).apply(this,arguments)}function Gs(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(y,h){return ud((0,O.m9)(y),h)})).apply(this,arguments)}function Iu(y,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(function*(y,h){return Fr(y,"POST","/v1/accounts:signInWithCustomToken",Xt(y,h))})).apply(this,arguments)}function zs(){return(zs=(0,m.Z)(function*(y,h){const p=Oe(y),E=yield Iu(p,{token:h,returnSecureToken:!0}),A=yield dr._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class ht{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Du._fromServerResponse(h,p):De(h,"internal-error")}}class Du extends ht{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Du(p)}}function Pa(y,h,p){var E;te((null===(E=p.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Tu(){return(Tu=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&Pa(E,A,p),yield hu(E,A)})).apply(this,arguments)}function Il(){return(Il=(0,m.Z)(function*(y,h,p){yield On((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function be(){return(be=(0,m.Z)(function*(y,h){yield Ls((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Vt(y,h){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),E=yield On(p,{oobCode:h}),A=E.requestType;switch(te(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(E.mfaInfo,p,"internal-error");default:te(E.email,p,"internal-error")}let R=null;return E.mfaInfo&&(R=ht._fromServerResponse(Oe(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(y,h){const{data:p}=yield Vt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Yr(){return(Yr=(0,m.Z)(function*(y,h,p){const E=Oe(y),A=yield vu(E,{returnSecureToken:!0,email:h,password:p}),R=yield dr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function ld(){return(ld=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};te(p.handleCodeInApp,E,"argument-error"),p&&Pa(E,A,p),yield Si(E,A)})).apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),A=wl.credentialWithLink(h,p||It());return te(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Pn(E,A)})).apply(this,arguments)}function hr(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:createAuthUri",Xt(y,h))})).apply(this,arguments)}function Ks(){return(Ks=(0,m.Z)(function*(y,h){const E={identifier:h,continueUri:Jt()?It():"http://localhost"},{signinMethods:A}=yield hr((0,O.m9)(y),E);return A||[]})).apply(this,arguments)}function Ml(){return(Ml=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Pa(p.auth,A,h);const{email:R}=yield Ai(p.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Nu(){return(Nu=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Pa(E.auth,R,p);const{email:q}=yield td(E.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function xl(y,h){return ka.apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(y,h){return qt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Nl(){return(Nl=(0,m.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,O.m9)(y),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield ur(E,xl(E.auth,R));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const se=E.providerData.find(({providerId:Ue})=>"password"===Ue);se&&(se.displayName=E.displayName,se.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function Ol(y,h,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,m.Z)(function*(y,h,p){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const q=yield ur(y,Mt(E,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class _o{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class hd extends _o{constructor(h,p,E,A){super(h,p,E),this.username=A}}class fd extends _o{constructor(h,p){super(h,"facebook.com",p)}}class vo extends hd{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Zs extends _o{constructor(h,p){super(h,"google.com",p)}}class Pl extends hd{constructor(h,p,E){super(h,"twitter.com",p,E)}}function Ar(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function dd(y){var h,p;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const q=null===(p=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new _o(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new fd(R,A);case"github.com":return new vo(R,A);case"google.com":return new Zs(R,A);case"twitter.com":return new Pl(R,A,y.screenName||null);case"custom":case"anonymous":return new _o(R,null);default:return new _o(R,E,A)}}(p)}class ms{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ms("enroll",h)}static _fromMfaPendingCredential(h){return new ms("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ms._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ms._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Fa{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=Oe(h),A=p.customData._serverResponse,R=(A.mfaInfo||[]).map(se=>ht._fromServerResponse(E,se));te(A.mfaPendingCredential,E,"internal-error");const q=ms._fromMfaPendingCredential(A.mfaPendingCredential);return new Fa(q,R,function(){var se=(0,m.Z)(function*(Ue){const Qe=yield Ue._process(E,q);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const it=yield dr._fromIdTokenResponse(E,p.operationType,yt);return yield E._updateCurrentUser(it.user),it;case"reauthenticate":return te(p.user,E,"internal-error"),dr._forOperation(p.user,p.operationType,yt);default:De(E,"internal-error")}});return function(Ue){return se.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function $n(y,h){return qt(y,"POST","/v2/accounts/mfaEnrollment:start",Xt(y,h))}class ys{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>ht._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new ys(h)}getSession(){var h=this;return(0,m.Z)(function*(){return ms._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var E=this;return(0,m.Z)(function*(){const A=h,R=yield E.getSession(),q=yield ur(E.user,A._process(E.user.auth,R,p));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){const E="string"==typeof h?h:h.uid,A=yield p.user.getIdToken(),R=yield ur(p.user,function Jp(y,h){return qt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(y,h))}(p.user.auth,{idToken:A,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:q})=>q!==E),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const qo=new WeakMap,Ll="__sak";class Eo{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ll,"1"),this.storage.removeItem(Ll),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fn=(()=>{class y extends Eo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yd(){const y=(0,O.z$)();return Zt(y)||tr(y)}()&&function Kn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=cs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),R=this.localCache[E];A!==R&&p(E,R,A)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((se,Ue,Qe)=>{this.notifyListeners(se,Qe)});const A=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(A);if(p.newValue!==se)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!E)return}const R=()=>{const se=this.storage.getItem(A);!E&&this.localCache[A]===se||this.notifyListeners(A,se)},q=this.storage.getItem(A);!function Sa(){return(0,O.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var A=()=>super._set,R=this;return(0,m.Z)(function*(){yield A().call(R,p,E),R.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,A=this;return(0,m.Z)(function*(){const R=yield E().call(A,p);return A.localCache[p]=JSON.stringify(R),R})()}_remove(p){var E=()=>super._remove,A=this;return(0,m.Z)(function*(){yield E().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),fr=(()=>{class y extends Eo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return y.type="SESSION",y})();let Jr=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(R=>R.isListeningto(p));if(E)return E;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,m.Z)(function*(){const A=p,{eventId:R,eventType:q,data:se}=A.data,Ue=E.handlersMap[q];if(!(null==Ue?void 0:Ue.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Qe=Array.from(Ue).map(function(){var it=(0,m.Z)(function*(Mn){return Mn(A.origin,se)});return function(Mn){return it.apply(this,arguments)}}()),yt=yield function Qr(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);A.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:yt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function zo(y="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return y+p}class _d{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var A=this;return(0,m.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,se;return new Promise((Ue,Qe)=>{const yt=zo("",20);R.port1.start();const it=setTimeout(()=>{Qe(new Error("unsupported_event"))},E);se={messageChannel:R,onMessage(Mn){const Xi=Mn;if(Xi.data.eventId===yt)switch(Xi.data.status){case"ack":clearTimeout(it),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ue(Xi.data.response);break;default:clearTimeout(it),clearTimeout(q),Qe(new Error("invalid_response"))}}},A.handlers.add(se),R.port1.addEventListener("message",se.onMessage),A.target.postMessage({eventType:h,eventId:yt,data:p},[R.port2])}).finally(()=>{se&&A.removeMessageHandler(se)})})()}}function gn(){return window}function Ni(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function pi(){return(pi=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Vl="firebaseLocalStorageDb",wo="firebaseLocalStorage",Hn="fbase_key";class _s{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Wo(y,h){return y.transaction([wo],h?"readwrite":"readonly").objectStore(wo)}function Qs(){const y=indexedDB.open(Vl,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(wo,{keyPath:Hn})}catch(A){p(A)}}),y.addEventListener("success",(0,m.Z)(function*(){const E=y.result;E.objectStoreNames.contains(wo)?h(E):(E.close(),yield function gi(){const y=indexedDB.deleteDatabase(Vl);return new _s(y).toPromise()}(),h(yield Qs()))}))})}function La(y,h,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(y,h,p){const E=Wo(y,!0).put({[Hn]:h,value:p});return new _s(E).toPromise()})).apply(this,arguments)}function Js(){return(Js=(0,m.Z)(function*(y,h){const p=Wo(y,!1).get(h),E=yield new _s(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Wi(y,h){const p=Wo(y,!0).delete(h);return new _s(p).toPromise()}const Ri=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield Qs()),p.db})()}_withRetries(p){var E=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const R=yield E._openDb();return yield p(R)}catch(R){if(A++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Ni()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Jr._getInstance(function vd(){return Ni()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(A,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(A,R){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var E,A;if(p.activeServiceWorker=yield function Ou(){return pi.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new _d(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function kt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Qs();return yield La(p,Ll,"1"),yield Wi(p,Ll),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(R=>La(R,p,E)),A.localCache[p]=E,A.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,m.Z)(function*(){const A=yield E._withRetries(R=>function Ul(y,h){return Js.apply(this,arguments)}(R,p));return E.localCache[p]=A,A})()}_remove(p){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(A=>Wi(A,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const E=yield p._withRetries(q=>{const se=Wo(q,!1).getAll();return new _s(se).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:q,value:se}of E)R.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(se)&&(p.notifyListeners(q,se),A.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!R.has(q)&&(p.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Zo(y,h){return qt(y,"POST","/v2/accounts/mfaSignIn:start",Xt(y,h))}function Oi(){return(Oi=(0,m.Z)(function*(y){return(yield qt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ln(y){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=A=>{const R=_e("internal-error");R.customData=A,p(R)},E.type="text/javascript",E.charset="UTF-8",function bd(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function Yo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Sr=1e12;class vs{constructor(h){this.auth=h,this.counter=Sr,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new Ki(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||Sr;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Sr))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var E;return null===(E=p._widgets.get(h||Sr))||void 0===E||E.execute(),""})()}}class Ki{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;te(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Tn(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xs=Yo("rcb"),Id=new ln(3e4,6e4);class eg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(h,p=""){return te(function tg(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(gn().grecaptcha):new Promise((E,A)=>{const R=gn().setTimeout(()=>{A(_e(h,"network-request-failed"))},Id.get());gn()[Xs]=()=>{gn().clearTimeout(R),delete gn()[Xs];const se=gn().grecaptcha;if(!se)return void A(_e(h,"internal-error"));const Ue=se.render;se.render=(Qe,yt)=>{const it=Ue(Qe,yt);return this.counter++,it},this.hostLanguage=p,E(se)},Ln(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Xs,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),A(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!gn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ng{load(h){return(0,m.Z)(function*(){return new vs(h)})()}clearedOneInstance(){}}const eo="recaptcha",Xr={theme:"light",type:"image"};class rg{constructor(h,p=Object.assign({},Xr),E){this.parameters=p,this.type=eo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(E),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ng:new eg,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(R=>{const q=se=>{!se||(h.tokenChangeListeners.delete(q),R(se))};h.tokenChangeListeners.add(q),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=gn()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){te(Jt()&&!Ni(),h.auth,"internal-error"),yield function to(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Vr(y){return Oi.apply(this,arguments)}(h.auth);te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Es{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Bo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function wn(){return(wn=(0,m.Z)(function*(y,h,p){const E=Oe(y),A=yield Mr(E,h,(0,O.m9)(p));return new Es(A,R=>Pn(E,R))})).apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);yield Hs(!1,E,"phone");const A=yield Mr(E.auth,h,(0,O.m9)(p));return new Es(A,R=>Mi(E,R))})).apply(this,arguments)}function $l(){return($l=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),A=yield Mr(E.auth,h,(0,O.m9)(p));return new Es(A,R=>Gs(E,R))})).apply(this,arguments)}function Mr(y,h,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(y,h,p){var E;const A=yield p.verify();try{let R;if(te("string"==typeof A,y,"argument-error"),te(p.type===eo,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return te("enroll"===q.type,y,"internal-error"),(yield $n(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===q.type,y,"internal-error");const se=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return te(se,y,"missing-multi-factor-info"),(yield Zo(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Kp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return q}}finally{p._reset()}})).apply(this,arguments)}function ws(){return(ws=(0,m.Z)(function*(y,h){yield mn((0,O.m9)(y),h)})).apply(this,arguments)}let ki=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Oe(p)}verifyPhoneNumber(p,E){return Mr(this.auth,p,(0,O.m9)(E))}static credential(p,E){return Bo._fromVerification(p,E)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:A}=p;return E&&A?Bo._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zi(y,h){return h?ie(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ua extends on{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return jn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return jn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return jn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Gl(y){return go(y.auth,new Ua(y),y.bypassAuthState)}function ql(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),ud(p,new Ua(y),y.bypassAuthState)}function Ft(y){return zl.apply(this,arguments)}function zl(){return(zl=(0,m.Z)(function*(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),mn(p,new Ua(y),y.bypassAuthState)})).apply(this,arguments)}class Zn{constructor(h,p,E,A,R=!1){this.auth=h,this.resolver=E,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(E,A){h.pendingPromise={resolve:E,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:R,tenantId:q,error:se,type:Ue}=h;if(se)return void p.reject(se);const Qe={auth:p.auth,requestUri:E,sessionId:A,tenantId:q||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ue)(Qe))}catch(yt){p.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Gl;case"linkViaPopup":case"linkViaRedirect":return Ft;case"reauthViaPopup":case"reauthViaRedirect":return ql;default:De(this.auth,"internal-error")}}resolve(h){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wl=new ln(2e3,1e4);function Dd(){return(Dd=(0,m.Z)(function*(y,h,p){const E=Oe(y);He(y,h,js);const A=Zi(E,p);return new Qi(E,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function ku(){return(ku=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,js);const A=Zi(E.auth,p);return new Qi(E.auth,"reauthViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,js);const A=Zi(E.auth,p);return new Qi(E.auth,"linkViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}let Qi=(()=>{class y extends Zn{constructor(p,E,A,R,q){super(p,E,R,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const E=yield p.execute();return te(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,m.Z)(function*(){ne(1===p.filter.length,"Popup operations only handle one event");const E=zo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Wl.get())};p()}}return y.currentPopupAction=null,y})();const Ji=new Map;class Yn extends Zn{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let E=Ji.get(p.auth._key());if(!E){try{const R=(yield function yi(y,h){return Kl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(R)}catch(A){E=()=>Promise.reject(A)}Ji.set(p.auth._key(),E)}return p.bypassAuthState||Ji.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const A=yield E.auth._redirectUserForId(h.eventId);if(A)return E.user=A,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Kl(){return(Kl=(0,m.Z)(function*(y,h){const p=C(h),E=D(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(p));return yield E._remove(p),A})).apply(this,arguments)}function Io(y,h){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,m.Z)(function*(y,h){return D(y)._set(C(h),"true")})).apply(this,arguments)}function D(y){return ie(y._redirectPersistence)}function C(y){return ce("pendingRedirect",y.config.apiKey,y.name)}function K(){return(K=(0,m.Z)(function*(y,h,p){const E=Oe(y);He(y,h,js);const A=Zi(E,p);return yield Io(A,E),A._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Me(){return(Me=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,js);const A=Zi(E.auth,p);yield Io(A,E.auth);const R=yield Do(E);return A._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,js);const A=Zi(E.auth,p);yield Hs(!1,E,h.providerId),yield Io(A,E.auth);const R=yield Do(E);return A._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Gn(){return(Gn=(0,m.Z)(function*(y,h){return yield Oe(y)._initializationPromise,Sn(y,h,!1)})).apply(this,arguments)}function Sn(y,h){return ea.apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(y,h,p=!1){const E=Oe(y),A=Zi(E,h),q=yield new Yn(E,A,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,h)),q})).apply(this,arguments)}function Do(y){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,m.Z)(function*(y){const h=zo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Fi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Zl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Td(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!Td(h)){const A=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Co(h))}saveEventToCache(h){this.cachedEventUids.add(Co(h)),this.lastProcessedEventTime=Date.now()}}function Co(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Td({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Yl(y){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(y,h={}){return qt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const sg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yy=/^https?/;function bs(){return(bs=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Yl(y);for(const p of h)try{if(Ql(p))return}catch(E){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Ql(y){const h=It(),{protocol:p,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===E}if(!yy.test(p))return!1;if(sg.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const vy=new ln(3e4,6e4);function Ey(){const y=gn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ad=null;function wy(y){return Ad=Ad||function og(y){return new Promise((h,p)=>{var E,A,R;function q(){Ey(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ey(),p(_e(y,"network-request-failed"))},timeout:vy.get()})}if(null===(A=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=gn().gapi)||void 0===R?void 0:R.load)){const se=Yo("iframefcb");return gn()[se]=()=>{gapi.load?q():p(_e(y,"network-request-failed"))},Ln(`https://apis.google.com/js/api.js?onload=${se}`).catch(Ue=>p(Ue))}q()}}).catch(h=>{throw Ad=null,h})}(y),Ad}const $h=new ln(5e3,15e3),Ao={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ja(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?cn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},A=Sd.get(y.config.apiHost);A&&(E.eid=A);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${p}?${(0,O.xO)(E).slice(1)}`}function ta(){return ta=(0,m.Z)(function*(y){const h=yield wy(y),p=gn().gapi;return te(p,y,"internal-error"),h.open({where:document.body,url:ja(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ao,dontclear:!0},E=>new Promise(function(){var A=(0,m.Z)(function*(R,q){yield E.restyle({setHideOnLeave:!1});const se=_e(y,"network-request-failed"),Ue=gn().setTimeout(()=>{q(se)},$h.get());function Qe(){gn().clearTimeout(Ue),R(E)}E.ping(Qe).then(Qe,()=>{q(se)})});return function(R,q){return A.apply(this,arguments)}}()))}),ta.apply(this,arguments)}const Iy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function zh(y,h,p,E,A,R){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:E,v:ae.SDK_VERSION,eventId:A};if(h instanceof js){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Qe]of Object.entries(R||{}))q[Ue]=Qe}if(h instanceof zr){const Ue=h.getScopes().filter(Qe=>""!==Qe);Ue.length>0&&(q.scopes=Ue.join(","))}y.tenantId&&(q.tid=y.tenantId);const se=q;for(const Ue of Object.keys(se))void 0===se[Ue]&&delete se[Ue];return`${function Cy({config:y}){return y.emulator?cn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(se).slice(1)}`}const ro="webStorageSupport";class Wh extends class ag{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Wh(h)}_finalizeEnroll(h,p,E){return function gd(y,h){return qt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(y,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Va(y,h){return qt(y,"POST","/v2/accounts/mfaSignIn:finalize",Xt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ty=(()=>{class y{constructor(){}static assertion(p){return Wh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Ay="@firebase/auth",Kh="0.19.11";class ug{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{var A;h((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function io(){return window}function Bu(){return(Bu=(0,m.Z)(function*(y,h,p){var E;const{BuildInfo:A}=io();ne(h.sessionId,"AuthEvent did not contain a session ID");const R=yield $a(h.sessionId),q={};return tr()?q.ibi=A.packageName:Dn()?q.apn=A.packageName:De(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=R,zh(y,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function Li(){return(Li=(0,m.Z)(function*(y){const{BuildInfo:h}=io(),p={};tr()?p.iosBundleId=h.packageName:Dn()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Yl(y,p)})).apply(this,arguments)}function Od(){return(Od=(0,m.Z)(function*(y,h,p){const{cordova:E}=io();let A=()=>{};try{yield new Promise((R,q)=>{let se=null;function Ue(){var it;R();const Mn=null===(it=E.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof Mn&&Mn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Qe(){se||(se=window.setTimeout(()=>{q(_e(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}h.addPassiveListener(Ue),document.addEventListener("resume",Qe,!1),Dn()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",yt,!1),se&&window.clearTimeout(se)}})}finally{A()}})).apply(this,arguments)}function $a(y){return cg.apply(this,arguments)}function cg(){return(cg=(0,m.Z)(function*(y){const h=ju(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ju(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let E=0;E<y.length;E++)p[E]=y.charCodeAt(E);return p}!function My(y){(0,ae._registerComponent)(new re.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=E.options;return((se,Ue)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:se.name}),te(!(null==q?void 0:q.includes(":")),"argument-error",{appName:se.name});const Qe={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ma(y)},yt=new ci(se,Ue,Qe);return function oe(y,h){const p=(null==h?void 0:h.persistence)||[],E=(Array.isArray(p)?p:[p]).map(ie);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(yt,p),yt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new re.wA("auth-internal",h=>{const p=Oe(h.getProvider("auth").getImmediate());return new ug(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Ay,Kh,function Sy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Ay,Kh,"esm2017")}("Browser");class Jh extends Fi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function ec(y){return ra.apply(this,arguments)}function ra(){return(ra=(0,m.Z)(function*(y){const h=yield nc()._get(ef(y));return h&&(yield nc()._remove(ef(y))),h})).apply(this,arguments)}function tc(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function nc(){return ie(Fn)}function ef(y){return ce("authEvent",y.config.apiKey,y.name)}function kd(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function sf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Fd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function hg(y=(0,O.z$)()){return!("file:"!==Fd()&&"ionic:"!==Fd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function xr(){try{const y=self.localStorage,h=zo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function ia(y=(0,O.z$)()){return function Py(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ky(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return So()&&(0,O.hl)()}return!1}function So(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function sc(){return(function Oy(){return"http:"===Fd()||"https:"===Fd()}()||(0,O.ru)()||hg())&&!function Ld(){return(0,O.b$)()||(0,O.UG)()}()&&xr()&&!So()}function of(){return hg()&&"undefined"!=typeof document}function Ha(){return(Ha=(0,m.Z)(function*(){return!!of()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Vi={LOCAL:"local",NONE:"none",SESSION:"session"},Ga=te,uf="persistence";function qa(y){return lf.apply(this,arguments)}function lf(){return(lf=(0,m.Z)(function*(y){yield y._initializationPromise;const h=oc(),p=ce(uf,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function oc(){var y;try{return(null===(y=function af(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Fy=te;class vi{constructor(){this.browserResolver=ie(class na{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fr,this._completeRedirectFn=Sn}_openPopup(h,p,E,A){var R=this;return(0,m.Z)(function*(){var q;ne(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const se=zh(h,p,E,It(),A);return function Rd(y,h,p,E=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let se="";const Ue=Object.assign(Object.assign({},Iy),{width:E.toString(),height:A.toString(),top:R,left:q}),Qe=(0,O.z$)().toLowerCase();p&&(se=Dr(Qe)?"_blank":p),gt(Qe)&&(h=h||"http://localhost",Ue.scrollbars="yes");const yt=Object.entries(Ue).reduce((Mn,[Xi,uc])=>`${Mn}${Xi}=${uc},`,"");if(function du(y=(0,O.z$)()){var h;return tr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Qe)&&"_self"!==se)return function qh(y,h){const p=document.createElement("a");p.href=y,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",se),new Nd(null);const it=window.open(h||"",se,yt);te(it,y,"popup-blocked");try{it.focus()}catch(Mn){}return new Nd(it)}(h,se,zo())})()}_openRedirect(h,p,E,A){var R=this;return(0,m.Z)(function*(){return yield R._originValidation(h),function jh(y){gn().location.href=y}(zh(h,p,E,It(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:R}=this.eventManagers[p];return A?Promise.resolve(A):(ne(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const E=yield function by(y){return ta.apply(this,arguments)}(h),A=new Fi(h);return E.register("authEvent",R=>(te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=E,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(ro,{type:ro},A=>{var R;const q=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[ro];void 0!==q&&p(!!q),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function _y(y){return bs.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return cs()||Zt()||tr()}}),this.cordovaResolver=ie(class rf{constructor(){this._redirectPersistence=fr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sn}_initialize(h){var p=this;return(0,m.Z)(function*(){const E=h._key();let A=p.eventManagers.get(E);return A||(A=new Jh(h),p.eventManagers.set(E,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,A){var R=this;return(0,m.Z)(function*(){!function Pd(y){var h,p,E,A,R,q,se,Ue,Qe,yt;const it=io();te("function"==typeof(null===(h=null==it?void 0:it.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(p=null==it?void 0:it.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(A=null===(E=null==it?void 0:it.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ue=null===(se=null===(q=null==it?void 0:it.cordova)||void 0===q?void 0:q.plugins)||void 0===se?void 0:se.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(yt=null===(Qe=null==it?void 0:it.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function Lu(){Ji.clear()}(),yield R._originValidation(h);const se=function Xh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:tc(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,E,A);yield function c0(y,h){return nc()._set(ef(y),h)}(h,se);const Ue=yield function Zh(y,h,p){return Bu.apply(this,arguments)}(h,se,p),Qe=yield function Xl(y){const{cordova:h}=io();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let A=null;E?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function co(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Ue);return function lg(y,h,p){return Od.apply(this,arguments)}(h,q,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Yh(y){return Li.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:A,BuildInfo:R}=io(),q=setTimeout((0,m.Z)(function*(){yield ec(h),p.onEvent(sf())}),500),se=function(){var yt=(0,m.Z)(function*(it){clearTimeout(q);const Mn=yield ec(h);let Xi=null;Mn&&(null==it?void 0:it.url)&&(Xi=function Ny(y,h){var p,E;const A=function rc(y){const h=kd(y),p=h.link?decodeURIComponent(h.link):void 0,E=kd(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return kd(A).link||A||E||p||y}(h);if(A.includes("/__/auth/callback")){const R=kd(A),q=R.firebaseError?function tf(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,se=null===(E=null===(p=null==q?void 0:q.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ue=se?_e(se):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Mn,it.url)),p.onEvent(Xi||sf())});return function(Mn){return yt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,se);const Ue=A,Qe=`${R.packageName.toLowerCase()}://`;io().handleOpenURL=function(){var yt=(0,m.Z)(function*(it){if(it.toLowerCase().startsWith(Qe)&&se({url:it}),"function"==typeof Ue)try{Ue(it)}catch(Mn){console.error(Mn)}});return function(it){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=fr,this._completeRedirectFn=Sn}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,A){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,E,A)})()}_openRedirect(h,p,E,A){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,E,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return of()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Br(){return Ha.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function gg(y){return y.unwrap()}function za(y){return mg(y)}function mg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ki.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=Na;break;case"facebook.com":E=fo;break;case"github.com":E=od;break;case"twitter.com":E=_u;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:se,nonce:Ue}=h;return R||q||A||se?se?p.startsWith("saml.")?Wr._create(p,se):fs._fromParams({providerId:p,signInMethod:p,pendingToken:se,idToken:A,accessToken:R}):new jo(p).credential({idToken:A,accessToken:R,rawNonce:Ue}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Nr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Vy(y,h){var p;const E=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Uy(y,function Ru(y,h){var p;const E=(0,O.m9)(y),A=h;return te(h.customData.operationType,E,"argument-error"),te(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),Fa._fromError(E,A)}(y,h));else if(E){const A=mg(h),R=h;A&&(R.credential=A,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:za(p),additionalUserInfo:Ar(p),user:Mo.getOrCreate(A)}})}function cf(y,h){return df.apply(this,arguments)}function df(){return(df=(0,m.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>Nr(y,p.confirm(E))}})).apply(this,arguments)}class Uy{constructor(h,p){this.resolver=p,this.auth=function Ly(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Nr(gg(this.auth),this.resolver.resolveSignIn(h))}}class Mo{constructor(h){this._delegate=h,this.multiFactor=function md(y){const h=(0,O.m9)(y);return qo.has(h)||qo.set(h,ys._fromUser(h)),qo.get(h)}(h)}static getOrCreate(h){return Mo.USER_MAP.has(h)||Mo.USER_MAP.set(h,new Mo(h)),Mo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return Nr(p.auth,Mi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,m.Z)(function*(){return cf(E.auth,function jl(y,h,p){return Jo.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return Nr(p.auth,function Yi(y,h,p){return Fu.apply(this,arguments)}(p._delegate,h,vi))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield qa(Oe(p.auth)),function Ze(y,h,p){return function wt(y,h,p){return Rt.apply(this,arguments)}(y,h,p)}(p._delegate,h,vi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return Nr(p.auth,Gs(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return cf(this.auth,function ig(y,h,p){return $l.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Nr(this.auth,function bo(y,h,p){return ku.apply(this,arguments)}(this._delegate,h,vi))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield qa(Oe(p.auth)),function ee(y,h,p){return function Se(y,h,p){return Me.apply(this,arguments)}(y,h,p)}(p._delegate,h,vi)})()}sendEmailVerification(h){return function xi(y,h){return Ml.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function Ra(y,h){return bl.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Rl(y,h){return Ol((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function cd(y,h){return Ol((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Hl(y,h){return ws.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function mo(y,h){return Nl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function xu(y,h,p){return Nu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mo.USER_MAP=new WeakMap;const ac=te;let hf=(()=>{class y{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;ac(A,"invalid-api-key",{appName:p.name}),ac(A,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?vi:void 0;this._delegate=E.initialize({options:{persistence:By(A,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function pn(y,h,p){const E=Oe(y);te(E._canInitEmulator,E,"emulator-config-failed"),te(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),R=cr(h),{host:q,port:se}=function ks(y){const h=cr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const R=A[1];return{host:R,port:Bn(E.substr(R.length+1))}}{const[R,q]=E.split(":");return{host:R,port:Bn(q)}}}(h);E.config.emulator={url:`${R}//${q}${null===se?"":`:${se}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:se,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function qi(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,E)}applyActionCode(p){return function Dl(y,h){return be.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Vt(this._delegate,p)}confirmPasswordReset(p,E){return function Au(y,h,p){return Il.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var A=this;return(0,m.Z)(function*(){return Nr(A._delegate,function Go(y,h,p){return Yr.apply(this,arguments)}(A._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Mu(y,h){return Ks.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Sl(y,h){const p=ho.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){ac(sc(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function Dt(y,h){return Gn.apply(this,arguments)}(p._delegate,vi);return E?Nr(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function dg(y,h){Oe(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,A){const{next:R,error:q,complete:se}=ff(p,E,A);return this._delegate.onAuthStateChanged(R,q,se)}onIdTokenChanged(p,E,A){const{next:R,error:q,complete:se}=ff(p,E,A);return this._delegate.onIdTokenChanged(R,q,se)}sendSignInLinkToEmail(p,E){return function Al(y,h,p){return ld.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function Cu(y,h,p){return Tu.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,m.Z)(function*(){let A;switch(function fg(y,h){Ga(Object.values(Vi).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Ga(h!==Vi.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ga(h===Vi.NONE,y,"unsupported-persistence-type"):So()?Ga(h===Vi.NONE||h===Vi.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ga(h===Vi.NONE||xr(),y,"unsupported-persistence-type")}(E._delegate,p),p){case Vi.SESSION:A=fr;break;case Vi.LOCAL:A=(yield ie(Ri)._isAvailable())?Ri:Fn;break;case Vi.NONE:A=G;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Nr(this._delegate,function Eu(y){return ad.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Nr(this._delegate,Pn(this._delegate,p))}signInWithCustomToken(p){return Nr(this._delegate,function qs(y,h){return zs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Nr(this._delegate,function Tl(y,h,p){return Pn((0,O.m9)(y),wl.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Nr(this._delegate,function Su(y,h,p){return Ws.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return cf(this._delegate,function Pu(y,h,p){return wn.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,m.Z)(function*(){return ac(sc(),E._delegate,"operation-not-supported-in-this-environment"),Nr(E._delegate,function no(y,h,p){return Dd.apply(this,arguments)}(E._delegate,p,vi))})()}signInWithRedirect(p){var E=this;return(0,m.Z)(function*(){return ac(sc(),E._delegate,"operation-not-supported-in-this-environment"),yield qa(E._delegate),function N(y,h,p){return function F(y,h,p){return K.apply(this,arguments)}(y,h,p)}(E._delegate,p,vi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function _n(y,h){return Ho.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Vi,y})();function ff(y,h,p){let E=y;"function"!=typeof y&&({next:E,error:h,complete:p}=y);const A=E;return{next:q=>A(q&&Mo.getOrCreate(q)),error:h,complete:p}}function By(y,h){const p=function pg(y,h){const p=oc();if(!p)return[];const E=ce(uf,y,h);switch(p.getItem(E)){case Vi.NONE:return[G];case Vi.LOCAL:return[Ri,fr];case Vi.SESSION:return[fr];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Ri)&&p.push(Ri),"undefined"!=typeof window)for(const E of[Fn,fr])p.includes(E)||p.push(E);return p.includes(G)||p.push(G),p}class pf{constructor(){this.providerId="phone",this._delegate=new ki(gg(Y.Z.auth()))}static credential(h,p){return ki.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}pf.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,pf.PROVIDER_ID=ki.PROVIDER_ID;const jy=te;class $y{constructor(h,p,E=Y.Z.app()){var A;jy(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new rg(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yg(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new hf(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wl,FacebookAuthProvider:fo,GithubAuthProvider:od,GoogleAuthProvider:Na,OAuthProvider:jo,SAMLAuthProvider:hi,PhoneAuthProvider:pf,PhoneMultiFactorGenerator:Ty,RecaptchaVerifier:$y,TwitterAuthProvider:_u,Auth:hf,AuthCredential:on,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ot,Te,P)=>{P.d(Te,{y:()=>j});var m=P(2961),Y=P(727),O=P(8822),ae=P(4671);var re=P(2416),de=P(576),ue=P(2806);let j=(()=>{class Ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Ae;return he.source=this,he.operator=Le,he}subscribe(Le,he,we){const Xe=function Ge(Ae){return Ae&&Ae instanceof m.Lv||function J(Ae){return Ae&&(0,de.m)(Ae.next)&&(0,de.m)(Ae.error)&&(0,de.m)(Ae.complete)}(Ae)&&(0,Y.Nn)(Ae)}(Le)?Le:new m.Hp(Le,he,we);return(0,ue.x)(()=>{const{operator:We,source:De}=this;Xe.add(We?We.call(Xe,De):De?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=$(he))((we,Xe)=>{const We=new m.Hp({next:De=>{try{Le(De)}catch(_e){Xe(_e),We.unsubscribe()}},error:Xe,complete:we});this.subscribe(We)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[O.L](){return this}pipe(...Le){return function pe(Ae){return 0===Ae.length?ae.y:1===Ae.length?Ae[0]:function(Le){return Ae.reduce((he,we)=>we(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=$(Le))((he,we)=>{let Xe;this.subscribe(We=>Xe=We,We=>we(We),()=>he(Xe))})}}return Ae.create=Re=>new Ae(Re),Ae})();function $(Ae){var Re;return null!==(Re=null!=Ae?Ae:re.v.Promise)&&void 0!==Re?Re:Promise}},7579:(ot,Te,P)=>{P.d(Te,{x:()=>re});var m=P(8306),Y=P(727);const ae=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=P(8737),pe=P(2806);let re=(()=>{class ue extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new de(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new ae}next($){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:Ge,observers:Ae}=this;return J||Ge?Y.Lc:(this.currentObservers=null,Ae.push($),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:Ge,isStopped:Ae}=this;J?$.error(Ge):Ae&&$.complete()}asObservable(){const $=new m.y;return $.source=this,$}}return ue.create=(j,$)=>new de(j,$),ue})();class de extends re{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,j)}error(j){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==J?J:Y.Lc}}},2961:(ot,Te,P)=>{P.d(Te,{Hp:()=>Le,Lv:()=>J});var m=P(576),Y=P(727),O=P(2416),ae=P(7849);function X(){}const pe=ue("C",void 0,void 0);function ue(De,_e,Ee){return{kind:De,value:_e,error:Ee}}var j=P(3410),$=P(2806);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=We}static create(_e,Ee,He){return new Le(_e,Ee,He)}next(_e){this.isStopped?Xe(function de(De){return ue("N",De,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Xe(function re(De){return ue("E",void 0,De)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Xe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ae(De,_e){return Ge.call(De,_e)}class Re{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(He){he(He)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(He){he(He)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){he(Ee)}}}class Le extends J{constructor(_e,Ee,He){let $e;if(super(),(0,m.m)(_e)||!_e)$e={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=He?He:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),$e={next:_e.next&&Ae(_e.next,te),error:_e.error&&Ae(_e.error,te),complete:_e.complete&&Ae(_e.complete,te)}):$e=_e}this.destination=new Re($e)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(De):(0,ae.h)(De)}function Xe(De,_e){const{onStoppedNotification:Ee}=O.v;Ee&&j.z.setTimeout(()=>Ee(De,_e))}const We={closed:!0,next:X,error:function we(De){throw De},complete:X}},727:(ot,Te,P)=>{P.d(Te,{Lc:()=>pe,w0:()=>X,Nn:()=>re});var m=P(576);const O=(0,P(3888).d)(ue=>function($){ue(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,Ge)=>`${Ge+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ae=P(8737);class X{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,m.m)(J))try{J()}catch(Ae){j=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ae of Ge)try{de(Ae)}catch(Re){j=null!=j?j:[],Re instanceof O?j=[...j,...Re.errors]:j.push(Re)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)de(j);else{if(j instanceof X){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,ae.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,ae.P)($,j),j instanceof X&&j._removeParent(this)}}X.EMPTY=(()=>{const ue=new X;return ue.closed=!0,ue})();const pe=X.EMPTY;function re(ue){return ue instanceof X||ue&&"closed"in ue&&(0,m.m)(ue.remove)&&(0,m.m)(ue.add)&&(0,m.m)(ue.unsubscribe)}function de(ue){(0,m.m)(ue)?ue():ue.unsubscribe()}},2416:(ot,Te,P)=>{P.d(Te,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,P)=>{P.d(Te,{E:()=>Y});const Y=new(P(8306).y)(X=>X.complete())},8996:(ot,Te,P)=>{P.d(Te,{D:()=>_e});var m=P(8421),Y=P(5363),O=P(9468),pe=P(8306),de=P(2202),ue=P(576),j=P(9672);function J(Ee,He){if(!Ee)throw new Error("Iterable cannot be null");return new pe.y($e=>{(0,j.f)($e,He,()=>{const te=Ee[Symbol.asyncIterator]();(0,j.f)($e,He,()=>{te.next().then(W=>{W.done?$e.complete():$e.next(W.value)})},0,!0)})})}var Ge=P(3670),Ae=P(8239),Re=P(1144),Le=P(6495),he=P(2206),we=P(4532),Xe=P(3260);function _e(Ee,He){return He?function De(Ee,He){if(null!=Ee){if((0,Ge.c)(Ee))return function ae(Ee,He){return(0,m.Xf)(Ee).pipe((0,O.R)(He),(0,Y.Q)(He))}(Ee,He);if((0,Re.z)(Ee))return function re(Ee,He){return new pe.y($e=>{let te=0;return He.schedule(function(){te===Ee.length?$e.complete():($e.next(Ee[te++]),$e.closed||this.schedule())})})}(Ee,He);if((0,Ae.t)(Ee))return function X(Ee,He){return(0,m.Xf)(Ee).pipe((0,O.R)(He),(0,Y.Q)(He))}(Ee,He);if((0,he.D)(Ee))return J(Ee,He);if((0,Le.T)(Ee))return function $(Ee,He){return new pe.y($e=>{let te;return(0,j.f)($e,He,()=>{te=Ee[de.h](),(0,j.f)($e,He,()=>{let W,ne;try{({value:W,done:ne}=te.next())}catch(ge){return void $e.error(ge)}ne?$e.complete():$e.next(W)},0,!0)}),()=>(0,ue.m)(null==te?void 0:te.return)&&te.return()})}(Ee,He);if((0,Xe.L)(Ee))return function We(Ee,He){return J((0,Xe.Q)(Ee),He)}(Ee,He)}throw(0,we.z)(Ee)}(Ee,He):(0,m.Xf)(Ee)}},8421:(ot,Te,P)=>{P.d(Te,{Xf:()=>Ge});var m=P(655),Y=P(1144),O=P(8239),ae=P(8306),X=P(3670),pe=P(2206),re=P(4532),de=P(6495),ue=P(3260),j=P(576),$=P(7849),J=P(8822);function Ge(De){if(De instanceof ae.y)return De;if(null!=De){if((0,X.c)(De))return function Ae(De){return new ae.y(_e=>{const Ee=De[J.L]();if((0,j.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Y.z)(De))return function Re(De){return new ae.y(_e=>{for(let Ee=0;Ee<De.length&&!_e.closed;Ee++)_e.next(De[Ee]);_e.complete()})}(De);if((0,O.t)(De))return function Le(De){return new ae.y(_e=>{De.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,$.h)})}(De);if((0,pe.D)(De))return we(De);if((0,de.T)(De))return function he(De){return new ae.y(_e=>{for(const Ee of De)if(_e.next(Ee),_e.closed)return;_e.complete()})}(De);if((0,ue.L)(De))return function Xe(De){return we((0,ue.Q)(De))}(De)}throw(0,re.z)(De)}function we(De){return new ae.y(_e=>{(function We(De,_e){var Ee,He,$e,te;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,m.KL)(De);!(He=yield Ee.next()).done;)if(_e.next(He.value),_e.closed)return}catch(W){$e={error:W}}finally{try{He&&!He.done&&(te=Ee.return)&&(yield te.call(Ee))}finally{if($e)throw $e.error}}_e.complete()})})(De,_e).catch(Ee=>_e.error(Ee))})}},6451:(ot,Te,P)=>{P.d(Te,{T:()=>pe});var m=P(8189),Y=P(8421),O=P(515),ae=P(7669),X=P(8996);function pe(...re){const de=(0,ae.yG)(re),ue=(0,ae._6)(re,1/0),j=re;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,m.J)(ue)((0,X.D)(j,de)):O.E}},5403:(ot,Te,P)=>{P.d(Te,{x:()=>Y});var m=P(2961);function Y(ae,X,pe,re,de){return new O(ae,X,pe,re,de)}class O extends m.Lv{constructor(X,pe,re,de,ue,j){super(X),this.onFinalize=ue,this.shouldUnsubscribe=j,this._next=pe?function($){try{pe($)}catch(J){X.error(J)}}:super._next,this._error=de?function($){try{de($)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch($){X.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ot,Te,P)=>{P.d(Te,{U:()=>O});var m=P(4482),Y=P(5403);function O(ae,X){return(0,m.e)((pe,re)=>{let de=0;pe.subscribe((0,Y.x)(re,ue=>{re.next(ae.call(X,ue,de++))}))})}},8189:(ot,Te,P)=>{P.d(Te,{J:()=>O});var m=P(5577),Y=P(4671);function O(ae=1/0){return(0,m.z)(Y.y,ae)}},5577:(ot,Te,P)=>{P.d(Te,{z:()=>de});var m=P(4004),Y=P(8421),O=P(4482),ae=P(9672),X=P(5403),re=P(576);function de(ue,j,$=1/0){return(0,re.m)(j)?de((J,Ge)=>(0,m.U)((Ae,Re)=>j(J,Ae,Ge,Re))((0,Y.Xf)(ue(J,Ge))),$):("number"==typeof j&&($=j),(0,O.e)((J,Ge)=>function pe(ue,j,$,J,Ge,Ae,Re,Le){const he=[];let we=0,Xe=0,We=!1;const De=()=>{We&&!he.length&&!we&&j.complete()},_e=He=>we<J?Ee(He):he.push(He),Ee=He=>{Ae&&j.next(He),we++;let $e=!1;(0,Y.Xf)($(He,Xe++)).subscribe((0,X.x)(j,te=>{null==Ge||Ge(te),Ae?_e(te):j.next(te)},()=>{$e=!0},void 0,()=>{if($e)try{for(we--;he.length&&we<J;){const te=he.shift();Re?(0,ae.f)(j,Re,()=>Ee(te)):Ee(te)}De()}catch(te){j.error(te)}}))};return ue.subscribe((0,X.x)(j,_e,()=>{We=!0,De()})),()=>{null==Le||Le()}}(J,Ge,ue,$)))}},5363:(ot,Te,P)=>{P.d(Te,{Q:()=>ae});var m=P(9672),Y=P(4482),O=P(5403);function ae(X,pe=0){return(0,Y.e)((re,de)=>{re.subscribe((0,O.x)(de,ue=>(0,m.f)(de,X,()=>de.next(ue),pe),()=>(0,m.f)(de,X,()=>de.complete(),pe),ue=>(0,m.f)(de,X,()=>de.error(ue),pe)))})}},3099:(ot,Te,P)=>{P.d(Te,{B:()=>pe});var m=P(8996),Y=P(5698),O=P(7579),ae=P(2961),X=P(4482);function pe(de={}){const{connector:ue=(()=>new O.x),resetOnError:j=!0,resetOnComplete:$=!0,resetOnRefCountZero:J=!0}=de;return Ge=>{let Ae=null,Re=null,Le=null,he=0,we=!1,Xe=!1;const We=()=>{null==Re||Re.unsubscribe(),Re=null},De=()=>{We(),Ae=Le=null,we=Xe=!1},_e=()=>{const Ee=Ae;De(),null==Ee||Ee.unsubscribe()};return(0,X.e)((Ee,He)=>{he++,!Xe&&!we&&We();const $e=Le=null!=Le?Le:ue();He.add(()=>{he--,0===he&&!Xe&&!we&&(Re=re(_e,J))}),$e.subscribe(He),Ae||(Ae=new ae.Hp({next:te=>$e.next(te),error:te=>{Xe=!0,We(),Re=re(De,j,te),$e.error(te)},complete:()=>{we=!0,We(),Re=re(De,$),$e.complete()}}),(0,m.D)(Ee).subscribe(Ae))})(Ge)}}function re(de,ue,...j){return!0===ue?(de(),null):!1===ue?null:ue(...j).pipe((0,Y.q)(1)).subscribe(()=>de())}},9468:(ot,Te,P)=>{P.d(Te,{R:()=>Y});var m=P(4482);function Y(O,ae=0){return(0,m.e)((X,pe)=>{pe.add(O.schedule(()=>X.subscribe(pe),ae))})}},5698:(ot,Te,P)=>{P.d(Te,{q:()=>ae});var m=P(515),Y=P(4482),O=P(5403);function ae(X){return X<=0?()=>m.E:(0,Y.e)((pe,re)=>{let de=0;pe.subscribe((0,O.x)(re,ue=>{++de<=X&&(re.next(ue),X<=de&&re.complete())}))})}},8505:(ot,Te,P)=>{P.d(Te,{b:()=>X});var m=P(576),Y=P(4482),O=P(5403),ae=P(4671);function X(pe,re,de){const ue=(0,m.m)(pe)||re||de?{next:pe,error:re,complete:de}:pe;return ue?(0,Y.e)((j,$)=>{var J;null===(J=ue.subscribe)||void 0===J||J.call(ue);let Ge=!0;j.subscribe((0,O.x)($,Ae=>{var Re;null===(Re=ue.next)||void 0===Re||Re.call(ue,Ae),$.next(Ae)},()=>{var Ae;Ge=!1,null===(Ae=ue.complete)||void 0===Ae||Ae.call(ue),$.complete()},Ae=>{var Re;Ge=!1,null===(Re=ue.error)||void 0===Re||Re.call(ue,Ae),$.error(Ae)},()=>{var Ae,Re;Ge&&(null===(Ae=ue.unsubscribe)||void 0===Ae||Ae.call(ue)),null===(Re=ue.finalize)||void 0===Re||Re.call(ue)}))}):ae.y}},4408:(ot,Te,P)=>{P.d(Te,{o:()=>X});var m=P(727);class Y extends m.w0{constructor(re,de){super()}schedule(re,de=0){return this}}const O={setInterval(pe,re,...de){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,re,...de):setInterval(pe,re,...de)},clearInterval(pe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=P(8737);class X extends Y{constructor(re,de){super(re,de),this.scheduler=re,this.work=de,this.pending=!1}schedule(re,de=0){if(this.closed)return this;this.state=re;const ue=this.id,j=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(j,ue,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(j,this.id,de),this}requestAsyncId(re,de,ue=0){return O.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,de,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return de;O.clearInterval(de)}execute(re,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,de);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,de){let j,ue=!1;try{this.work(re)}catch($){ue=!0,j=$||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:re,scheduler:de}=this,{actions:ue}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(de,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,P)=>{P.d(Te,{v:()=>O});var m=P(6063);class Y{constructor(X,pe=Y.now){this.schedulerActionCtor=X,this.now=pe}schedule(X,pe=0,re){return new this.schedulerActionCtor(this,X).schedule(re,pe)}}Y.now=m.l.now;class O extends Y{constructor(X,pe=Y.now){super(X,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:pe}=this;if(this._active)return void pe.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=pe.shift());if(this._active=!1,re){for(;X=pe.shift();)X.unsubscribe();throw re}}}},4986:(ot,Te,P)=>{P.d(Te,{z:()=>O});var m=P(4408);const O=new(P(7565).v)(m.o)},6063:(ot,Te,P)=>{P.d(Te,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,P)=>{P.d(Te,{z:()=>m});const m={setTimeout(Y,O,...ae){const{delegate:X}=m;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,O,...ae):setTimeout(Y,O,...ae)},clearTimeout(Y){const{delegate:O}=m;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ot,Te,P)=>{P.d(Te,{h:()=>Y});const Y=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,P)=>{P.d(Te,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,P)=>{P.d(Te,{_6:()=>pe,jO:()=>ae,yG:()=>X});var m=P(576);function O(re){return re[re.length-1]}function ae(re){return(0,m.m)(O(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,m.m)(re.schedule)}(O(re))?re.pop():void 0}function pe(re,de){return"number"==typeof O(re)?re.pop():de}},8737:(ot,Te,P)=>{function m(Y,O){if(Y){const ae=Y.indexOf(O);0<=ae&&Y.splice(ae,1)}}P.d(Te,{P:()=>m})},3888:(ot,Te,P)=>{function m(Y){const ae=Y(X=>{Error.call(X),X.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(Te,{d:()=>m})},2806:(ot,Te,P)=>{P.d(Te,{x:()=>O,O:()=>ae});var m=P(2416);let Y=null;function O(X){if(m.v.useDeprecatedSynchronousErrorHandling){const pe=!Y;if(pe&&(Y={errorThrown:!1,error:null}),X(),pe){const{errorThrown:re,error:de}=Y;if(Y=null,re)throw de}}else X()}function ae(X){m.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ot,Te,P)=>{function m(Y,O,ae,X=0,pe=!1){const re=O.schedule(function(){ae(),pe?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!pe)return re}P.d(Te,{f:()=>m})},4671:(ot,Te,P)=>{function m(Y){return Y}P.d(Te,{y:()=>m})},1144:(ot,Te,P)=>{P.d(Te,{z:()=>m});const m=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ot,Te,P)=>{P.d(Te,{D:()=>Y});var m=P(576);function Y(O){return Symbol.asyncIterator&&(0,m.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ot,Te,P)=>{function m(Y){return"function"==typeof Y}P.d(Te,{m:()=>m})},3670:(ot,Te,P)=>{P.d(Te,{c:()=>O});var m=P(8822),Y=P(576);function O(ae){return(0,Y.m)(ae[m.L])}},6495:(ot,Te,P)=>{P.d(Te,{T:()=>O});var m=P(2202),Y=P(576);function O(ae){return(0,Y.m)(null==ae?void 0:ae[m.h])}},8239:(ot,Te,P)=>{P.d(Te,{t:()=>Y});var m=P(576);function Y(O){return(0,m.m)(null==O?void 0:O.then)}},3260:(ot,Te,P)=>{P.d(Te,{Q:()=>O,L:()=>ae});var m=P(655),Y=P(576);function O(X){return(0,m.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:de,done:ue}=yield(0,m.qq)(re.read());if(ue)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(de)}}finally{re.releaseLock()}})}function ae(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(ot,Te,P)=>{P.d(Te,{A:()=>Y,e:()=>O});var m=P(576);function Y(ae){return(0,m.m)(null==ae?void 0:ae.lift)}function O(ae){return X=>{if(Y(X))return X.lift(function(pe){try{return ae(pe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Te,P)=>{P.d(Te,{h:()=>O});var m=P(2416),Y=P(3410);function O(ae){Y.z.setTimeout(()=>{const{onUnhandledError:X}=m.v;if(!X)throw ae;X(ae)})}},4532:(ot,Te,P)=>{function m(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Te,{z:()=>m})},655:(ot,Te,P)=>{function ae(W,ne){var ge={};for(var ie in W)Object.prototype.hasOwnProperty.call(W,ie)&&ne.indexOf(ie)<0&&(ge[ie]=W[ie]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(ie=Object.getOwnPropertySymbols(W);Ne<ie.length;Ne++)ne.indexOf(ie[Ne])<0&&Object.prototype.propertyIsEnumerable.call(W,ie[Ne])&&(ge[ie[Ne]]=W[ie[Ne]])}return ge}function de(W,ne,ge,ie){return new(ge||(ge=Promise))(function(oe,It){function Jt(pt){try{at(ie.next(pt))}catch(ln){It(ln)}}function Rn(pt){try{at(ie.throw(pt))}catch(ln){It(ln)}}function at(pt){pt.done?oe(pt.value):function Ne(oe){return oe instanceof ge?oe:new ge(function(It){It(oe)})}(pt.value).then(Jt,Rn)}at((ie=ie.apply(W,ne||[])).next())})}function he(W){return this instanceof he?(this.v=W,this):new he(W)}function we(W,ne,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,ie=ge.apply(W,ne||[]),oe=[];return Ne={},It("next"),It("throw"),It("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function It(cn){ie[cn]&&(Ne[cn]=function(Ti){return new Promise(function(sn,as){oe.push([cn,Ti,sn,as])>1||Jt(cn,Ti)})})}function Jt(cn,Ti){try{!function Rn(cn){cn.value instanceof he?Promise.resolve(cn.value.v).then(at,pt):ln(oe[0][2],cn)}(ie[cn](Ti))}catch(sn){ln(oe[0][3],sn)}}function at(cn){Jt("next",cn)}function pt(cn){Jt("throw",cn)}function ln(cn,Ti){cn(Ti),oe.shift(),oe.length&&Jt(oe[0][0],oe[0][1])}}function We(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ne=W[Symbol.asyncIterator];return ne?ne.call(W):(W=function J(W){var ne="function"==typeof Symbol&&Symbol.iterator,ge=ne&&W[ne],ie=0;if(ge)return ge.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ie>=W.length&&(W=void 0),{value:W&&W[ie++],done:!W}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ge={},ie("next"),ie("throw"),ie("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ie(oe){ge[oe]=W[oe]&&function(It){return new Promise(function(Jt,Rn){!function Ne(oe,It,Jt,Rn){Promise.resolve(Rn).then(function(at){oe({value:at,done:Jt})},It)}(Jt,Rn,(It=W[oe](It)).done,It.value)})}}}P.d(Te,{_T:()=>ae,mG:()=>de,qq:()=>he,FC:()=>we,KL:()=>We})},5e3:(ot,Te,P)=>{P.d(Te,{deG:()=>eg,tb:()=>Gb,AFp:()=>Bb,ip1:()=>Ub,CZH:()=>gE,hGG:()=>VE,z2F:()=>AE,sBO:()=>Dp,Sil:()=>qC,_Vd:()=>iu,EJc:()=>Wb,SBq:()=>ch,qLn:()=>Nr,vpe:()=>va,tBr:()=>Ur,XFs:()=>ut,OlP:()=>An,zs3:()=>ua,ZZ4:()=>Tp,aQg:()=>Sp,soG:()=>yE,YKP:()=>qv,h0i:()=>kc,PXZ:()=>KC,R0b:()=>As,FiY:()=>_i,Lbi:()=>Hb,g9A:()=>$b,Qsj:()=>bC,FYo:()=>cb,JOm:()=>se,tp0:()=>Co,Rgc:()=>hl,dDg:()=>bE,q4F:()=>up,GfV:()=>dh,s_b:()=>pp,ifc:()=>zt,eFA:()=>CE,G48:()=>ME,Gpc:()=>$,X6Q:()=>YC,_c5:()=>uI,VLi:()=>Gc,c2e:()=>qb,zSh:()=>Wg,wAp:()=>_t,vHH:()=>Re,cg1:()=>Qf,kL8:()=>zw,dqk:()=>Ht,sIi:()=>Xu,CqO:()=>bw,QGY:()=>ev,F4k:()=>Ic,RDi:()=>ps,AaK:()=>de,qOj:()=>Je,TTD:()=>fo,_Bn:()=>Bv,xp6:()=>n_,uIk:()=>Xd,ekj:()=>_m,Suo:()=>Um,Xpm:()=>Lt,lG2:()=>Zt,Yz7:()=>sn,cJS:()=>Xt,oAB:()=>Q,Yjl:()=>Dr,Y36:()=>bc,_UZ:()=>X_,qZA:()=>Lf,TgZ:()=>th,EpF:()=>ww,n5z:()=>bd,LFG:()=>Ze,$8M:()=>Yo,$Z:()=>Y_,NdJ:()=>tv,CRH:()=>vh,O4$:()=>pd,oxw:()=>rv,ALo:()=>Lc,lcZ:()=>Jv,Q6J:()=>Q_,VKq:()=>Wv,iGM:()=>Ts,CHM:()=>Cl,LSH:()=>$u,YNc:()=>Pf,_uU:()=>hv,hij:()=>Xa});var m=P(7579),Y=P(727),O=P(8306),ae=P(6451),X=P(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=pe({__forward_ref__:pe});function $(i){return i.__forward_ref__=$,i.toString=function(){return de(this())},i}function J(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class Re extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${we(i)} found${a}`)}function at(i,s){null==i&&function pt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function sn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Xt(i){return{providers:i.providers||[],imports:i.imports||[]}}function qt(i){return ar(i,Hi)||ar(i,us)}function ar(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fr(i){return i&&(i.hasOwnProperty(Lr)||i.hasOwnProperty(ls))?i[Lr]:null}const Hi=pe({\u0275prov:pe}),Lr=pe({\u0275inj:pe}),us=pe({ngInjectableDef:pe}),ls=pe({ngInjectorDef:pe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Gr;function Wn(i){const s=Gr;return Gr=i,s}function li(i,s,a){const l=qt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ut.Optional?null:void 0!==s?s:void _e(de(i),"Injector")}function yn(i){return{toString:i}.toString()}var er=(()=>((er=er||{})[er.OnPush=0]="OnPush",er[er.Default=1]="Default",er))(),zt=(()=>{return(i=zt||(zt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",zt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,ur="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=rt||"undefined"!=typeof global&&global||vt||ur,lr={},ct=[],Ir=pe({\u0275cmp:pe}),Bt=pe({\u0275dir:pe}),Ke=pe({\u0275pipe:pe}),Ce=pe({\u0275mod:pe}),Ye=pe({\u0275fac:pe}),dt=pe({__NG_ELEMENT_ID__:pe});let jt=0;function Lt(i){return yn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===er.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||zt.Emulated,id:"c",styles:i.styles||ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,_=i.pipes;return l.id+=jt++,l.inputs=gt(i.inputs,a),l.outputs=gt(i.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(G):null,l})}function L(i){return Wt(i)||function Dn(i){return i[Bt]||null}(i)}function G(i){return function Nt(i){return i[Ke]||null}(i)}const ce={};function Q(i){return yn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ce[i.id]=i.type),s})}function gt(i,s){if(null==i)return lr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,s&&(s[d]=f)}return a}const Zt=Lt;function Dr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Wt(i){return i[Ir]||null}function fn(i,s){const a=i[Ce]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function Si(i){return Array.isArray(i)&&"object"==typeof i[1]}function di(i){return Array.isArray(i)&&!0===i[1]}function td(i){return 0!=(8&i.flags)}function Us(i){return 2==(2&i.flags)}function pu(i){return 1==(1&i.flags)}function qr(i){return null!==i.template}function Fh(i){return 0!=(512&i[2])}function zr(i,s){return i.hasOwnProperty(Ye)?i[Ye]:null}class jo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function fo(){return Na}function Na(i){return i.type.prototype.ngOnChanges&&(i.setInput=Qp),od}function od(){const i=$s(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===lr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Qp(i,s,a,l){const d=$s(i)||function hi(i,s){return i[Wr]=s}(i,{previous:lr,current:null}),f=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];f[w]=new jo(b&&b.currentValue,s,_===lr),i[l]=s}fo.ngInherit=!0;const Wr="__ngSimpleChanges__";function $s(i){return i[Wr]||null}let bu;function ps(i){bu=i}function mn(i){return!!i.listen}const $o={createRenderer:(i,s)=>function Ra(){return void 0!==bu?bu:"undefined"!=typeof document?document:void 0}()};function un(i){for(;Array.isArray(i);)i=i[0];return i}function go(i,s){return un(s[i])}function Cr(i,s){return un(s[i.index])}function Oa(i,s){return i.data[s]}function Tr(i,s){const a=s[i];return Si(a)?a:a[0]}function Gs(i){return 4==(4&i[2])}function gs(i){return 128==(128&i[2])}function Zr(i,s){return null==s?null:i[s]}function qs(i){i[18]=0}function zs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ht={lFrame:_o(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Au(){return ht.bindingsEnabled}function be(){return ht.lFrame.lView}function Vt(){return ht.lFrame.tView}function Cl(i){return ht.lFrame.contextLView=i,i[8]}function _n(){let i=Ho();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ho(){return ht.lFrame.currentTNode}function Yr(i,s){const a=ht.lFrame;a.currentTNode=i,a.isParent=s}function Tl(){return ht.lFrame.isParent}function Su(){return ht.isInCheckNoChangesMode}function Ws(i){ht.isInCheckNoChangesMode=i}function hr(){const i=ht.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Ks(){return ht.lFrame.bindingIndex++}function Nu(i,s){const a=ht.lFrame;a.bindingIndex=a.bindingRootIndex=i,ka(s)}function ka(i){ht.lFrame.currentDirectiveIndex=i}function Nl(){return ht.lFrame.currentQueryIndex}function Rl(i){ht.lFrame.currentQueryIndex=i}function cd(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ol(i,s,a){if(a&ut.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&ut.Host||(d=cd(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const l=ht.lFrame=dd();return l.currentTNode=s,l.lView=i,!0}function yo(i){const s=dd(),a=i[1];ht.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function dd(){const i=ht.lFrame,s=null===i?null:i.child;return null===s?_o(i):s}function _o(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function hd(){const i=ht.lFrame;return ht.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const fd=hd;function vo(){const i=hd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ar(){return ht.lFrame.selectedIndex}function Ys(i){ht.lFrame.selectedIndex=i}function Cn(){const i=ht.lFrame;return Oa(i.tView,i.selectedIndex)}function pd(){ht.lFrame.currentNamespace="svg"}function ms(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:M}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Fa(i,s,a){gd(i,s,3,a)}function Ru(i,s,a,l){(3&i[2])===a&&gd(i,s,a,l)}function $n(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function gd(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<f||-1==f)&&(Jp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Jp(i,s,a,l){const d=a[l]<0,f=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class qo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function mt(i,s,a){const l=mn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=f,w=a[++d];Qr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function fr(i){return 3===i||4===i||6===i}function Qr(i){return 64===i.charCodeAt(0)}function Jr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||zo(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function zo(i,s,a,l,d){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function _d(i){return-1!==i}function gn(i){return 32767&i}function Ni(i,s){let a=function jh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Ou=!0;function pi(i){const s=Ou;return Ou=i,s}let Ed=0;function Hn(i,s){const a=Wo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,_s(l.data,i),_s(s,null),_s(l.blueprint,null));const d=gi(i,s),f=i.injectorIndex;if(_d(d)){const _=gn(d),w=Ni(d,s),b=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[_+T]|b[_+T]}return s[f+8]=d,f}function _s(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Wo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function gi(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const f=d[1],_=f.type;if(l=2===_?f.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Qs(i,s,a){!function wo(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(dt)&&(l=a[dt]),null==l&&(l=a[dt]=Ed++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function zi(i,s,a){if(a&ut.Optional)return i;_e(s,"NodeInjector")}function Ul(i,s,a,l){if(a&ut.Optional&&void 0===l&&(l=null),0==(a&(ut.Self|ut.Host))){const d=i[9],f=Wn(void 0);try{return d?d.get(s,l,a&ut.Optional):li(s,l,a&ut.Optional)}finally{Wn(f)}}return zi(l,s,a)}function Js(i,s,a,l=ut.Default,d){if(null!==i){const f=function Zo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(dt)?i[dt]:void 0;return"number"==typeof s?s>=0?255&s:Bl:s}(a);if("function"==typeof f){if(!Ol(s,i,l))return l&ut.Host?zi(d,a,l):Ul(s,a,l,d);try{const _=f(l);if(null!=_||l&ut.Optional)return _;_e(a)}finally{fd()}}else if("number"==typeof f){let _=null,w=Wo(i,s),b=-1,T=l&ut.Host?s[16][6]:null;for((-1===w||l&ut.SkipSelf)&&(b=-1===w?gi(i,s):s[w+8],-1!==b&&Vr(l,!1)?(_=s[1],w=gn(b),s=Ni(b,s)):w=-1);-1!==w;){const M=s[1];if(Va(f,w,M.data)){const k=wd(w,s,a,_,l,T);if(k!==Wi)return k}b=s[w+8],-1!==b&&Vr(l,s[1].data[w+8]===T)&&Va(f,w,s)?(_=M,w=gn(b),s=Ni(b,s)):w=-1}}}return Ul(s,a,l,d)}const Wi={};function Bl(){return new Oi(_n(),be())}function wd(i,s,a,l,d,f){const _=s[1],w=_.data[i+8],M=Ko(w,_,a,null==l?Us(w)&&Ou:l!=_&&0!=(3&w.type),d&ut.Host&&f===w);return null!==M?Ri(s,_,M,w):Wi}function Ko(i,s,a,l,d){const f=i.providerIndexes,_=s.data,w=1048575&f,b=i.directiveStart,M=f>>20,U=d?w+M:i.directiveEnd;for(let Z=l?w:w+M;Z<U;Z++){const me=_[Z];if(Z<b&&a===me||Z>=b&&me.type===a)return Z}if(d){const Z=_[b];if(Z&&qr(Z)&&Z.type===a)return b}return null}function Ri(i,s,a,l){let d=i[a];const f=s.data;if(function md(i){return i instanceof qo}(d)){const _=d;_.resolving&&function Xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(f[a]));const w=pi(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Wn(_.injectImpl):null;Ol(i,l,ut.Default);try{d=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Fl(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const _=Na(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==b&&Wn(b),pi(w),_.resolving=!1,fd()}}return d}function Va(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Vr(i,s){return!(i&ut.Self||i&ut.Host&&s)}class Oi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Js(this._tNode,this._lView,s,l,a)}}function bd(i){return yn(()=>{const s=i.prototype.constructor,a=s[Ye]||Ln(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[Ye]||Ln(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Ln(i){return Ge(i)?()=>{const s=Ln(J(i));return s&&s()}:zr(i)}function Yo(i){return function La(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(fr(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(_n(),i)}const Qo="__parameters__";function Tn(i,s,a){return yn(()=>{const l=function Ki(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return w.annotation=_,w;function w(b,T,M){const k=b.hasOwnProperty(Qo)?b[Qo]:Object.defineProperty(b,Qo,{value:[]})[Qo];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class An{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=sn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const eg=new An("AnalyzeForEntryComponents");function Mr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Mr(l,s)):s!==i&&s.push(l)}return s}function mi(i,s){i.forEach(a=>Array.isArray(a)?mi(a,s):s(a))}function Hl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ws(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Zn(i,s,a){let l=no(i,s);return l>=0?i[1|l]=a:(l=~l,function Gl(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Wl(i,s){const a=no(i,s);if(a>=0)return i[1|a]}function no(i,s){return function bo(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?d=f:l=f+1}return~(d<<a)}(i,s,1)}const Io={},Xo="__NG_DI_FLAG__",Lu="ngTempTokenPath",C=/\n/gm,F="__source",K=pe({provide:String,useValue:pe});let ee;function Se(i){const s=ee;return ee=i,s}function Me(i,s=ut.Default){if(void 0===ee)throw new Re(203,"");return null===ee?li(i,void 0,s):ee.get(i,s&ut.Optional?null:void 0,s)}function Ze(i,s=ut.Default){return(function Xn(){return Gr}()||Me)(J(i),s)}const Rt=Ze;function Dt(i){const s=[];for(let a=0;a<i.length;a++){const l=J(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let d,f=ut.Default;for(let _=0;_<l.length;_++){const w=l[_],b=Sn(w);"number"==typeof b?-1===b?d=w.token:f|=b:d=w}s.push(Ze(d,f))}else s.push(Ze(l))}return s}function Gn(i,s){return i[Xo]=s,i.prototype[Xo]=s,i}function Sn(i){return i[Xo]}const Ur=Gn(Tn("Inject",i=>({token:i})),-1),_i=Gn(Tn("Optional"),8),Co=Gn(Tn("SkipSelf"),4);class Rd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ro(i){return i instanceof Rd?i.changingThisBreaksApplicationSecurity:i}const io=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Zh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var nn=(()=>((nn=nn||{})[nn.NONE=0]="NONE",nn[nn.HTML=1]="HTML",nn[nn.STYLE=2]="STYLE",nn[nn.SCRIPT=3]="SCRIPT",nn[nn.URL=4]="URL",nn[nn.RESOURCE_URL=5]="RESOURCE_URL",nn))();function $u(i){const s=function ia(){const i=be();return i&&i[12]}();return s?s.sanitize(nn.URL,i)||"":function na(i,s){const a=function Uu(i){return i instanceof Rd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ro(i):function Bu(i){return(i=String(i)).match(io)||i.match(Zh)?i:"unsafe:"+i}(he(i))}const of="__ngContext__";function Br(i,s){i[of]=s}function af(i){const s=function Ha(i){return i[of]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function za(i){return i.ngOriginalError}function mg(i,...s){i.error(...s)}class Nr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Vy(i){return i&&i.ngErrorLogger||mg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&za(s);for(;a&&za(a);)a=za(a);return a||null}}const $y=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function p(i){return i instanceof Function?i():i}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();function Qe(i,s){return undefined(i,s)}function Mn(i){const s=i[3];return di(s)?s[3]:s}function Hu(i){return gf(i[13])}function Gu(i){return gf(i[4])}function gf(i){for(;null!==i&&!di(i);)i=i[4];return i}function sa(i,s,a,l,d){if(null!=l){let f,_=!1;di(l)?f=l:Si(l)&&(_=!0,l=l[0]);const w=un(l);0===i&&null!==a?null==d?Zy(s,a,w):Is(s,a,w,d||null,!0):1===i&&null!==a?Is(s,a,w,d||null,!0):2===i?function Xy(i,s,a){const l=Wa(i,s);l&&function nD(i,s,a,l){mn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=f&&function sD(i,s,a,l,d){const f=a[7];f!==un(a)&&sa(s,i,l,f,d);for(let w=10;w<a.length;w++){const b=a[w];wg(b[1],b,i,s,l,f)}}(s,i,f,a,d)}}function Bd(i,s,a){if(mn(i))return i.createElement(s,a);{const l=null!==a?function wu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function d0(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,zs(d,-1)),a.splice(l,1)}function zy(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&d0(d,l),s>0&&(i[a-1][4]=l[4]);const f=ws(i,10+s);!function Ui(i,s){wg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Wy(i,s){if(!(256&s[2])){const a=s[11];mn(a)&&a.destroyNode&&wg(i,s,a,3,null,null),function _f(i){let s=i[13];if(!s)return Ky(i[1],i);for(;s;){let a=null;if(Si(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Si(s)&&Ky(s[1],s),s=s[3];null===s&&(s=i),Si(s)&&Ky(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ky(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function f0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof qo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const w=d[f[_]],b=f[_+1];try{b.call(w)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function h0(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],w="function"==typeof _?_(s):un(s[_]),b=l[d=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],b,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&mn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&di(s[3])){a!==s[3]&&d0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function vg(i,s,a){return function tD(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===zt.None||d===zt.Emulated)return null}return Cr(l,a)}(i,s.parent,a)}function Is(i,s,a,l,d){mn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function Zy(i,s,a){mn(i)?i.appendChild(s,a):s.appendChild(a)}function p0(i,s,a,l,d){null!==l?Is(i,s,a,l,d):Zy(i,s,a)}function Wa(i,s){return mn(i)?i.parentNode(s):s.parentNode}let Yy=function m0(i,s,a){return 40&i.type?Cr(i,a):null};function Eg(i,s,a,l){const d=vg(i,l,s),f=s[11],w=function g0(i,s,a){return Yy(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)p0(f,d,a[b],w,!1);else p0(f,d,a,w,!1)}function $d(i,s){if(null!==s){const a=s.type;if(3&a)return Cr(s,i);if(4&a)return Jy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return $d(i,l);{const d=i[s.index];return di(d)?Jy(-1,d):un(d)}}if(32&a)return Qe(s,i)()||un(i[s.index]);{const l=_0(i,s);return null!==l?Array.isArray(l)?l[0]:$d(Mn(i[16]),l):$d(i,s.next)}}return null}function _0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Jy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return $d(l,d)}return s[7]}function e_(i,s,a,l,d,f,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&Br(un(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)e_(i,s,a.child,l,d,f,!1),sa(s,i,d,w,f);else if(32&b){const T=Qe(a,l);let M;for(;M=T();)sa(s,i,d,M,f);sa(s,i,d,w,f)}else 16&b?v0(i,s,l,a,d,f):sa(s,i,d,w,f);a=_?a.projectionNext:a.next}}function wg(i,s,a,l,d,f){e_(a,l,i.firstChild,s,d,f,!1)}function v0(i,s,a,l,d,f){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)sa(s,i,d,b[T],f);else e_(i,s,b,_[3],d,f,!0)}function t_(i,s,a){mn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function bg(i,s,a){mn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function E0(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const qu="ng-template";function oa(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==E0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function w0(i){return 4===i.type&&i.value!==qu}function b0(i,s,a){return s===(4!==i.type||a?i.value:qu)}function uD(i,s,a){let l=4;const d=i.attrs||[],f=function I0(i){for(let s=0;s<i.length;s++)if(fr(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!b0(i,b,a)||""===b&&1===s.length){if(xo(l))return!1;_=!0}}else{const T=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!oa(i.attrs,T,a)){if(xo(l))return!1;_=!0}continue}const k=lD(8&l?"class":b,d,w0(i),a);if(-1===k){if(xo(l))return!1;_=!0;continue}if(""!==T){let U;U=k>f?"":d[k+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==E0(Z,T,0)||2&l&&T!==U){if(xo(l))return!1;_=!0}}}}else{if(!_&&!xo(l)&&!xo(b))return!1;if(_&&xo(b))continue;_=!1,l=b|1&l}}return xo(l)||_}function xo(i){return 0==(1&i)}function lD(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let f=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function Ei(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function vf(i,s,a=!1){for(let l=0;l<s.length;l++)if(uD(i,s[l],a))return!0;return!1}function D0(i,s){return i?":not("+s.trim()+")":s}function ES(i){let s=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!xo(_)&&(s+=D0(f,d),d=""),l=_,f=f||!xo(l);a++}return""!==d&&(s+=D0(f,d)),s}const xt={};function n_(i){r_(Vt(),be(),Ar()+i,Su())}function r_(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Fa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Ru(s,f,0,a)}Ys(a)}function Ef(i,s){return i<<17|s<<2}function so(i){return i>>17&32767}function Ig(i){return 2|i}function aa(i){return(131068&i)>>2}function Dg(i,s){return-131069&i|s<<2}function Cg(i){return 1|i}function c_(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];Rl(d),_.contentQueries(2,s[f],f)}}}function Df(i,s,a,l,d,f,_,w,b,T){const M=s.blueprint.slice();return M[0]=d,M[2]=140|l,qs(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=b||i&&i[12]||null,M[9]=T||i&&i[9]||null,M[6]=f,M[16]=2==s.type?i[16]:M,M}function Cf(i,s,a,l,d){let f=i.data[s];if(null===f)f=function d_(i,s,a,l,d){const f=Ho(),_=Tl(),b=i.data[s]=function L0(i,s,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=b),null!==f&&(_?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(i,s,a,l,d),function Ml(){return ht.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function Go(){const i=ht.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Yr(f,!0),f}function lc(i,s,a,l){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Og(i,s,a){yo(s);try{const l=i.viewQuery;null!==l&&Sf(1,l,a);const d=i.template;null!==d&&h_(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&c_(i,s),i.staticViewQueries&&Sf(2,i.viewQuery,a);const f=i.components;null!==f&&function P0(i,s){for(let a=0;a<s.length;a++)TD(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,vo()}}function Yu(i,s,a,l){const d=s[2];if(256==(256&d))return;yo(s);const f=Su();try{qs(s),function Mu(i){return ht.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&h_(i,s,a,2,l);const _=3==(3&d);if(!f)if(_){const T=i.preOrderCheckHooks;null!==T&&Fa(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Ru(s,T,0,null),$n(s,0)}if(function H0(i){for(let s=Hu(i);null!==s;s=Gu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&zs(f,1),d[2]|=1024}}}(s),function SS(i){for(let s=Hu(i);null!==s;s=Gu(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];gs(l)&&Yu(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&c_(i,s),!f)if(_){const T=i.contentCheckHooks;null!==T&&Fa(s,T)}else{const T=i.contentHooks;null!==T&&Ru(s,T,1),$n(s,1)}!function pD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ys(~d);else{const f=d,_=a[++l],w=a[++l];Nu(_,f),w(2,s[f])}}}finally{Ys(-1)}}(i,s);const w=i.components;null!==w&&function gD(i,s){for(let a=0;a<s.length;a++)CD(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&Sf(2,b,l),!f)if(_){const T=i.viewCheckHooks;null!==T&&Fa(s,T)}else{const T=i.viewHooks;null!==T&&Ru(s,T,2),$n(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,zs(s[3],-1))}finally{vo()}}function mD(i,s,a,l){const d=s[10],f=!Su(),_=Gs(s);try{f&&!_&&d.begin&&d.begin(),_&&Og(i,s,l),Yu(i,s,a,l)}finally{f&&!_&&d.end&&d.end()}}function h_(i,s,a,l,d){const f=Ar(),_=2&l;try{Ys(-1),_&&s.length>20&&r_(i,s,20,Su()),a(l,d)}finally{Ys(f)}}function Tf(i,s,a){!Au()||(function Af(i,s,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Hn(a,s),Br(l,s);const _=a.initialInputs;for(let w=d;w<f;w++){const b=i.data[w],T=qr(b);T&&bD(s,a,b);const M=Ri(s,i,w,a);Br(M,s),null!==_&&__(0,w-d,M,b,0,_),T&&(Tr(a.index,s)[8]=M)}}(i,s,a,Cr(a,s)),128==(128&a.flags)&&function g_(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function xl(){return ht.lFrame.currentDirectiveIndex}();try{Ys(_);for(let b=l;b<d;b++){const T=i.data[b],M=s[b];ka(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&m_(T,M)}}finally{Ys(-1),ka(w)}}(i,s,a))}function k0(i,s,a=Cr){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function kg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Qu(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Qu(i,s,a,l,d,f,_,w,b,T){const M=20+l,k=M+d,U=function Fg(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:xt);return a}(M,k),Z="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Z,incompleteFirstPass:!1}}function Vg(i,s,a,l){const d=Gg(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&W0(i).push(l,d.length-1))}function Ug(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function dc(i,s,a,l){let d=!1;if(Au()){const f=function CS(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];vf(a,_.selectors,!1)&&(d||(d=[]),Qs(Hn(a,s),i,_.type),qr(_)?(wD(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==f){d=!0,j0(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const k=f[M];k.providersResolver&&k.providersResolver(k)}let w=!1,b=!1,T=lc(i,s,f.length,null);for(let M=0;M<f.length;M++){const k=f[M];a.mergedAttrs=Jr(a.mergedAttrs,k.hostAttrs),y_(i,a,s,T,k),AS(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}!function V0(i,s){const l=s.directiveEnd,d=i.data,f=s.attrs,_=[];let w=null,b=null;for(let T=s.directiveStart;T<l;T++){const M=d[T],k=M.inputs,U=null===f||w0(s)?null:ID(k,f);_.push(U),w=Ug(k,T,w),b=Ug(M.outputs,T,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function TS(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new Re(-301,!1);l.push(s[d],f)}}}(a,l,_)}return a.mergedAttrs=Jr(a.mergedAttrs,a.attrs),d}function B0(i,s,a,l,d,f){const _=f.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function ED(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function m_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function wD(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function AS(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;qr(s)&&(a[""]=i)}}function j0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function y_(i,s,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=zr(d.type)),_=new qo(f,qr(d),null);i.blueprint[l]=_,a[l]=_,B0(i,s,0,l,lc(i,a,d.hostVars,xt),d)}function bD(i,s,a){const l=Cr(s,i),d=kg(a),f=i[10],_=Kd(i,Df(i,d,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function No(i,s,a,l,d,f){const _=Cr(i,s);!function $g(i,s,a,l,d,f,_){if(null==f)mn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?he(f):_(f,l||"",d);mn(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,f,i.value,a,l,d)}function __(i,s,a,l,d,f){const _=f[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const T=_[b++],M=_[b++],k=_[b++];null!==w?l.setInput(a,k,T,M):a[M]=k}}}function ID(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function $0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function CD(i,s){const a=Tr(s,i);if(gs(a)){const l=a[1];80&a[2]?Yu(l,a,l.template,a[8]):a[5]>0&&Hg(a)}}function Hg(i){for(let l=Hu(i);null!==l;l=Gu(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const _=f[1];Yu(_,f,_.template,f[8])}else f[5]>0&&Hg(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Tr(a[l],i);gs(d)&&d[5]>0&&Hg(d)}}function TD(i,s){const a=Tr(s,i),l=a[1];(function G0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Og(l,a,a[8])}function Kd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function v_(i){for(;i;){i[2]|=64;const s=Mn(i);if(Fh(i)&&!s)return i;i=s}return null}function hc(i,s,a){const l=s[10];l.begin&&l.begin();try{Yu(i,s,i.template,a)}catch(d){throw K0(s,d),d}finally{l.end&&l.end()}}function z0(i){!function E_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=af(a),d=l[1];mD(d,l,d.template,a)}}(i[8])}function Sf(i,s,a){Rl(0),s(i,a)}const MD=(()=>Promise.resolve(null))();function Gg(i){return i[7]||(i[7]=[])}function W0(i){return i.cleanup||(i.cleanup=[])}function K0(i,s){const a=i[9],l=a?a.get(Nr,null):null;l&&l.handleError(s)}function qg(i,s,a,l,d){for(let f=0;f<a.length;){const _=a[f++],w=a[f++],b=s[_],T=i.data[_];null!==T.setInput?T.setInput(b,d,l,w):b[w]=d}}function Za(i,s,a){const l=go(s,i);!function Ud(i,s,a){mn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function zg(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?f=w:1==f?d=ue(d,w):2==f&&(l=ue(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Mf=new An("INJECTOR",-1);class Y0{get(s,a=Io){if(a===Io){const l=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw l.name="NullInjectorError",l}return a}}const Wg=new An("Set Injector scope."),xf={},Q0={};let Ya;function J0(){return void 0===Ya&&(Ya=new Y0),Ya}function I_(i,s=null,a=null,l){const d=X0(i,s,a,l);return d._resolveInjectorDefTypes(),d}function X0(i,s=null,a=null,l){return new ew(i,a,s||J0(),l)}class ew{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&mi(a,w=>this.processProvider(w,s,a)),mi([s],w=>this.processInjectorType(w,[],f)),this.records.set(Mf,Zd(void 0,this));const _=this.records.get(Wg);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Io,l=ut.Default){this.assertNotDestroyed();const d=Se(this),f=Wn(void 0);try{if(!(l&ut.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function MS(i){return"function"==typeof i||"object"==typeof i&&i instanceof An}(s)&&qt(s);w=b&&this.injectableDefInScope(b)?Zd(D_(s),xf):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ut.Self?J0():this.parent).get(s,a=l&ut.Optional&&a===Io?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Lu]=_[Lu]||[]).unshift(de(s)),d)throw _;return function ea(i,s,a,l){const d=i[Lu];throw s[F]&&d.unshift(s[F]),i.message=function Do(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=de(s);if(Array.isArray(s))d=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];f.push(_+":"+("string"==typeof w?JSON.stringify(w):de(w)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Lu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Wn(f),Se(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(de(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=J(s)))return!1;let d=Fr(s);const f=null==d&&s.ngModule||void 0,_=void 0===f?s:f,w=-1!==l.indexOf(_);if(void 0!==f&&(d=Fr(f)),null==d)return!1;if(null!=d.imports&&!w){let M;l.push(_);try{mi(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:U,providers:Z}=M[k];mi(Z,me=>this.processProvider(me,U,Z||ct))}}this.injectorDefTypes.add(_);const b=zr(_)||(()=>new _);this.records.set(_,Zd(b,xf));const T=d.providers;if(null!=T&&!w){const M=s;mi(T,k=>this.processProvider(k,M,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let d=Yd(s=J(s))?s:J(s&&s.provide);const f=function Kg(i,s,a){return T_(i)?Zd(void 0,i.useValue):Zd(C_(i),xf)}(s);if(Yd(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Zd(void 0,xf,!0),_.factory=()=>Dt(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,f)}hydrate(s,a){return a.value===xf&&(a.value=Q0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function rw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=J(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function D_(i){const s=qt(i),a=null!==s?s.factory:zr(i);if(null!==a)return a;if(i instanceof An)throw new Re(204,!1);if(i instanceof Function)return function ND(i){const s=i.length;if(s>0)throw function ki(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function ui(i){const s=i&&(i[Hi]||i[us]);if(s){const a=function Os(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function C_(i,s,a){let l;if(Yd(i)){const d=J(i);return zr(d)||D_(d)}if(T_(i))l=()=>J(i.useValue);else if(function tw(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Dt(i.deps||[]));else if(function RD(i){return!(!i||!i.useExisting)}(i))l=()=>Ze(J(i.useExisting));else{const d=J(i&&(i.useClass||i.provide));if(!function OD(i){return!!i.deps}(i))return zr(d)||D_(d);l=()=>new d(...Dt(i.deps))}return l}function Zd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function T_(i){return null!==i&&"object"==typeof i&&K in i}function Yd(i){return"function"==typeof i}let ua=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return I_({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return I_({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Io,i.NULL=new Y0,i.\u0275prov=sn({token:i,providedIn:"any",factory:()=>Ze(Mf)}),i.__NG_ELEMENT_ID__=-1,i})();function Kt(i,s){ms(af(i)[1],_n())}function Je(i){let s=function da(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(qr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=At(i.inputs),_.declaredInputs=At(i.declaredInputs),_.outputs=At(i.outputs);const w=d.hostBindings;w&&Rf(i,w);const b=d.viewQuery,T=d.contentQueries;if(b&&Zg(i,b),T&&R_(i,T),re(i.inputs,d.inputs),re(i.declaredInputs,d.declaredInputs),re(i.outputs,d.outputs),qr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const w=f[_];w&&w.ngInherit&&w(i),w===Je&&(a=!1)}}s=Object.getPrototypeOf(s)}!function N_(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Jr(d.hostAttrs,a=Jr(a,d.hostAttrs))}}(l)}function At(i){return i===lr?{}:i===ct?[]:i}function Zg(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function R_(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{s(l,d,f),a(l,d,f)}:s}function Rf(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Yg=null;function Qd(){if(!Yg){const i=Ht.Symbol;if(i&&i.iterator)Yg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Yg=l)}}}return Yg}function Xu(i){return!!P_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Qd()in i)}function P_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ni(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Xd(i,s,a,l){const d=be();return ni(d,Ks(),s)&&(Vt(),No(Cn(),d,i,s,a,l)),Xd}function Pf(i,s,a,l,d,f,_,w){const b=be(),T=Vt(),M=i+20,k=T.firstCreatePass?function hw(i,s,a,l,d,f,_,w,b){const T=s.consts,M=Cf(s,i,4,_||null,Zr(T,w));dc(s,a,M,Zr(T,b)),ms(s,M);const k=M.tViews=Qu(2,M,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,T,b,s,a,l,d,f,_):T.data[M];Yr(k,!1);const U=b[11].createComment("");Eg(T,b,U,k),Br(U,b),Kd(b,b[M]=$0(U,b,U,k)),pu(k)&&Tf(T,b,k),null!=_&&k0(b,k,w)}function bc(i,s=ut.Default){const a=be();return null===a?Ze(i,s):Js(_n(),a,J(i),s)}function Y_(){throw new Error("invalid")}function Q_(i,s,a){const l=be();return ni(l,Ks(),s)&&function es(i,s,a,l,d,f,_,w){const b=Cr(s,a);let M,T=s.inputs;!w&&null!=T&&(M=T[l])?(qg(i,a,M,l,d),Us(s)&&function f_(i,s){const a=Tr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Bg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,mn(f)?f.setProperty(b,l,d):Qr(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(Vt(),Cn(),l,i,s,l[11],a,!1),Q_}function eh(i,s,a,l,d){const _=d?"class":"style";qg(i,a,s.inputs[_],_,l)}function th(i,s,a,l){const d=be(),f=Vt(),_=20+i,w=d[11],b=d[_]=Bd(w,s,function my(){return ht.lFrame.currentNamespace}()),T=f.firstCreatePass?function J_(i,s,a,l,d,f,_){const w=s.consts,T=Cf(s,i,2,d,Zr(w,f));return dc(s,a,T,Zr(w,_)),null!==T.attrs&&zg(T,T.attrs,!1),null!==T.mergedAttrs&&zg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,d,0,s,a,l):f.data[_];Yr(T,!0);const M=T.mergedAttrs;null!==M&&mt(w,b,M);const k=T.classes;null!==k&&bg(w,b,k);const U=T.styles;return null!==U&&t_(w,b,U),64!=(64&T.flags)&&Eg(f,d,b,T),0===function Pa(){return ht.lFrame.elementDepthCount}()&&Br(b,d),function Cu(){ht.lFrame.elementDepthCount++}(),pu(T)&&(Tf(f,d,T),function Pg(i,s,a){if(td(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,d)),null!==l&&k0(d,T),th}function Lf(){let i=_n();Tl()?function Al(){ht.lFrame.isParent=!1}():(i=i.parent,Yr(i,!1));const s=i;!function Tu(){ht.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(ms(a,i),td(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Bh(i){return 0!=(16&i.flags)}(s)&&eh(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Xp(i){return 0!=(32&i.flags)}(s)&&eh(a,s,be(),s.stylesWithoutHost,!1),Lf}function X_(i,s,a,l){return th(i,s,a,l),Lf(),X_}function ww(){return be()}function ev(i){return!!i&&"function"==typeof i.then}function Ic(i){return!!i&&"function"==typeof i.subscribe}const bw=Ic;function tv(i,s,a,l){const d=be(),f=Vt(),_=_n();return function Uf(i,s,a,l,d,f,_,w){const b=pu(l),M=i.firstCreatePass&&W0(i),k=s[8],U=Gg(s);let Z=!0;if(3&l.type||w){const Be=Cr(l,s),et=w?w(Be):Be,Ie=U.length,lt=w?$t=>w(un($t[l.index])):l.index;if(mn(a)){let $t=null;if(!w&&b&&($t=function Iw(i,s,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const w=s[7],b=d[f+2];return w.length>b?w[b]:null}"string"==typeof _&&(f+=2)}return null}(i,s,d,l.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=f,$t.__ngLastListenerFn__=f,Z=!1;else{f=Dc(l,s,k,f,!1);const en=a.listen(et,d,f);U.push(f,en),M&&M.push(d,lt,Ie,Ie+1)}}else f=Dc(l,s,k,f,!0),et.addEventListener(d,f,_),U.push(f),M&&M.push(d,lt,Ie,_)}else f=Dc(l,s,k,f,!1);const me=l.outputs;let ke;if(Z&&null!==me&&(ke=me[d])){const Be=ke.length;if(Be)for(let et=0;et<Be;et+=2){const Ii=s[ke[et]][ke[et+1]].subscribe(f),lu=U.length;U.push(f,Ii),M&&M.push(d,l.index,lu,-(lu+1))}}}(f,d,d[11],_,i,s,!!a,l),tv}function nv(i,s,a,l){try{return!1!==a(l)}catch(d){return K0(i,d),!1}}function Dc(i,s,a,l,d){return function f(_){if(_===Function)return l;const w=2&i.flags?Tr(i.index,s):s;0==(32&s[2])&&v_(w);let b=nv(s,0,l,_),T=f.__ngNextListenerFn__;for(;T;)b=nv(s,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function rv(i=1){return function Zs(i){return(ht.lFrame.contextLView=function Pl(i,s){for(;i>0;)s=s[15],i--;return s}(i,ht.lFrame.contextLView))[8]}(i)}function mm(i,s,a,l,d){const f=i[a+1],_=null===s;let w=l?so(f):aa(f),b=!1;for(;0!==w&&(!1===b||_);){const M=i[w+1];ym(i[w],s)&&(b=!0,i[w+1]=l?Cg(M):Ig(M)),w=l?so(M):aa(M)}b&&(i[a+1]=l?Ig(f):Cg(f))}function ym(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&no(i,s)>=0}function _m(i,s){return function ns(i,s,a,l){const d=be(),f=Vt(),_=function xi(i){const s=ht.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function xn(i,s,a,l){const d=i.data;if(null===d[a+1]){const f=d[Ar()],_=function cv(i,s){return s>=i.expandoStartIndex}(i,a);(function dv(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function vm(i,s,a,l){const d=function mo(i){const s=ht.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=zf(a=Sc(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Sc(d,i,s,a,l),null===f){let b=function YD(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==aa(l))return i[so(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=Sc(null,i,s,b[1],l),b=zf(b,s.attrs,l),function QD(i,s,a,l){i[so(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else f=function qf(i,s,a){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=zf(l,i[f].hostAttrs,a);return zf(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,l),function Cw(i,s,a,l,d,f){let _=f?s.classBindings:s.styleBindings,w=so(_),b=aa(_);i[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||no(k,M)>0)&&(T=!0)}else M=a;if(d)if(0!==b){const U=so(i[w+1]);i[l+1]=Ef(U,w),0!==U&&(i[U+1]=Dg(i[U+1],l)),i[w+1]=function A0(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Ef(w,0),0!==w&&(i[w+1]=Dg(i[w+1],l)),w=l;else i[l+1]=Ef(b,0),0===w?w=l:i[b+1]=Dg(i[b+1],l),b=l;T&&(i[l+1]=Ig(i[l+1])),mm(i,M,l,!0),mm(i,M,l,!1),function ZD(i,s,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&no(f,s)>=0&&(a[l+1]=Cg(a[l+1]))}(s,M,i,l,f),_=Ef(w,b),f?s.classBindings=_:s.styleBindings=_}(d,f,s,a,_,l)}}(f,i,_,l),s!==xt&&ni(d,_,s)&&function Ow(i,s,a,l,d,f,_,w){if(!(3&s.type))return;const b=i.data,T=b[w+1];sl(function S0(i){return 1==(1&i)}(T)?Pw(b,s,a,d,aa(T),_):void 0)||(sl(f)||function wf(i){return 2==(2&i)}(T)&&(f=Pw(b,null,a,d,w,_)),function oD(i,s,a,l,d){const f=mn(i);if(s)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:se.DashCase;if(null==d)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=se.Important),f?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,go(Ar(),a),d,f))}(f,f.data[Ar()],d,d[11],i,d[_+1]=function ol(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(ro(i)))),i}(s,a),l,_)}(i,s,null,!0),_m}function Sc(i,s,a,l,d){let f=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(f=s[w],l=zf(l,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function zf(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Zn(i,_,!!a||s[++f]))}return void 0===i?null:i}function Pw(i,s,a,l,d,f){const _=null===s;let w;for(;d>0;){const b=i[d],T=Array.isArray(b),M=T?b[1]:b,k=null===M;let U=a[d+1];U===xt&&(U=k?ct:void 0);let Z=k?Wl(U,l):M===l?U:void 0;if(T&&!sl(Z)&&(Z=Wl(b,l)),sl(Z)&&(w=Z,_))return w;const me=i[d+1];d=_?so(me):aa(me)}if(null!==s){let b=f?s.residualClasses:s.residualStyles;null!=b&&(w=Wl(b,l))}return w}function sl(i){return void 0!==i}function hv(i,s=""){const a=be(),l=Vt(),d=i+20,f=l.firstCreatePass?Cf(l,d,1,s,null):l.data[d],_=a[d]=function Vd(i,s){return mn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Eg(l,a,_,f),Yr(f,!1)}function Xa(i,s,a){const l=be(),d=function pr(i,s,a,l){return ni(i,Ks(),a)?s+he(a)+l:xt}(l,i,s,a);return d!==xt&&Za(l,Ar(),d),Xa}const Ro=void 0;var Dv=["en",[["a","p"],["AM","PM"],Ro],[["AM","PM"],Ro,Ro],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ro,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ro,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ro,"{1} 'at' {0}",Ro],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qw(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let eu={};function Qf(i){const s=function Ww(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Tv(s);if(a)return a;const l=s.split("-")[0];if(a=Tv(l),a)return a;if("en"===l)return Dv;throw new Error(`Missing locale data for the locale "${i}".`)}function zw(i){return Qf(i)[_t.PluralCase]}function Tv(i){return i in eu||(eu[i]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[i]),eu[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Jf="en-US";let Mv=Jf;function ll(i,s,a,l,d){if(i=J(i),Array.isArray(i))for(let f=0;f<i.length;f++)ll(i[f],s,a,l,d);else{const f=Vt(),_=be();let w=Yd(i)?i:J(i.provide),b=C_(i);const T=_n(),M=1048575&T.providerIndexes,k=T.directiveStart,U=T.providerIndexes>>20;if(Yd(i)||!i.multi){const Z=new qo(b,d,bc),me=xm(w,s,d?M:M+U,k);-1===me?(Qs(Hn(T,_),f,w),ap(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Z),_.push(Z)):(a[me]=Z,_[me]=Z)}else{const Z=xm(w,s,M+U,k),me=xm(w,s,M,M+U),ke=Z>=0&&a[Z],Be=me>=0&&a[me];if(d&&!Be||!d&&!ke){Qs(Hn(T,_),f,w);const et=function ab(i,s,a,l,d){const f=new qo(i,a,bc);return f.multi=[],f.index=s,f.componentProviders=0,lh(f,d,l&&!a),f}(d?Nm:ob,a.length,d,l,b);!d&&Be&&(a[me].providerFactory=et),ap(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(et),_.push(et)}else ap(f,i,Z>-1?Z:me,lh(a[d?me:Z],b,!d&&l));!d&&l&&Be&&a[me].componentProviders++}}}function ap(i,s,a,l){const d=Yd(s),f=function nw(i){return!!i.useClass}(s);if(d||f){const b=(f?J(s.useClass):s).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,b]):T[M+1].push(l,b)}else T.push(a,b)}}}function lh(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function xm(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function ob(i,s,a,l){return Rc(this.multi,[])}function Nm(i,s,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Ri(a,a[1],this.providerFactory.index,l);f=w.slice(0,_),Rc(d,f);for(let b=_;b<w.length;b++)f.push(w[b])}else f=[],Rc(d,f);return f}function Rc(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Bv(i,s=[]){return a=>{a.providersResolver=(l,d)=>function Uv(i,s,a){const l=Vt();if(l.firstCreatePass){const d=qr(i);ll(a,l.data,l.blueprint,d,!0),ll(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class oi{}class $v{resolveComponentFactory(s){throw function lb(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let iu=(()=>{class i{}return i.NULL=new $v,i})();function Rm(){return _a(_n(),be())}function _a(i,s){return new ch(Cr(i,s))}let ch=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Rm,i})();function wC(i){return i instanceof ch?i.nativeElement:i}class cb{}let bC=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Oc(){const i=be(),a=Tr(_n().index,i);return function db(i){return i[11]}(Si(a)?a:i)}(),i})(),IC=(()=>{class i{}return i.\u0275prov=sn({token:i,providedIn:"root",factory:()=>null}),i})();class dh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const up=new dh("13.2.7"),hh={};function vr(i,s,a,l,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(un(f)),di(f))for(let w=10;w<f.length;w++){const b=f[w],T=b[1].firstChild;null!==T&&vr(b[1],b,T,l)}const _=a.type;if(8&_)vr(i,s,a.child,l);else if(32&_){const w=Qe(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=_0(s,a);if(Array.isArray(w))l.push(...w);else{const b=Mn(s[16]);vr(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class lp{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return vr(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(di(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(zy(s,l),ws(a,l))}this._attachedToViewContainer=!1}Wy(this._lView[1],this._lView)}onDestroy(s){Vg(this._lView[1],this._lView,null,s)}markForCheck(){v_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function w_(i,s,a){Ws(!0);try{hc(i,s,a)}finally{Ws(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _g(i,s){wg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class DC extends lp{constructor(s){super(s),this._view=s}detectChanges(){z0(this._view)}checkNoChanges(){!function AD(i){Ws(!0);try{z0(i)}finally{Ws(!1)}}(this._view)}get context(){return null}}class hb extends iu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Wt(s);return new Gv(a,this.ngModule)}}function Hv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Gv extends oi{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function C0(i){return i.map(ES).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Hv(this.componentDef.inputs)}get outputs(){return Hv(this.componentDef.outputs)}create(s,a,l,d){const f=(d=d||this.ngModule)?function TC(i,s){return{get:(a,l,d)=>{const f=i.get(a,hh,d);return f!==hh||l===hh?f:s.get(a,l,d)}}}(s,d.injector):s,_=f.get(cb,$o),w=f.get(IC,null),b=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=l?function F0(i,s,a){if(mn(i))return i.selectRootElement(s,a===zt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Bd(_.createRenderer(null,this.componentDef),T,function CC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),k=this.componentDef.onPush?576:528,U=function Qa(i,s){return{components:[],scheduler:i||$y,clean:MD,playerHandler:s||null,flags:0}}(),Z=Qu(0,null,null,1,0,null,null,null,null,null),me=Df(null,Z,U,k,null,null,_,b,w,f);let ke,Be;yo(me);try{const et=function Ju(i,s,a,l,d,f){const _=a[1];a[20]=i;const b=Cf(_,20,2,"#host",null),T=b.mergedAttrs=s.hostAttrs;null!==T&&(zg(b,T,!0),null!==i&&(mt(d,i,T),null!==b.classes&&bg(d,i,b.classes),null!==b.styles&&t_(d,i,b.styles)));const M=l.createRenderer(i,s),k=Df(a,kg(s),null,s.onPush?64:16,a[20],b,l,M,f||null,null);return _.firstCreatePass&&(Qs(Hn(b,a),_,s.type),wD(_,b),j0(b,a.length,1)),Kd(a,k),a[20]=k}(M,this.componentDef,me,_,b);if(M)if(l)mt(b,M,["ng-version",up.full]);else{const{attrs:Ie,classes:lt}=function T0(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++l]):8===d&&a.push(f);else{if(!xo(d))break;d=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&mt(b,M,Ie),lt&&lt.length>0&&bg(b,M,lt.join(" "))}if(Be=Oa(Z,20),void 0!==a){const Ie=Be.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const $t=a[lt];Ie.push(null!=$t?Array.from($t):null)}}ke=function Nf(i,s,a,l,d){const f=a[1],_=function jg(i,s,a){const l=_n();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),y_(i,l,s,lc(i,s,1,null),a));const d=Ri(s,i,l.directiveStart,l);Br(d,s);const f=Cr(l,s);return f&&Br(f,s),d}(f,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,s)),s.contentQueries){const b=_n();s.contentQueries(1,_,b.directiveStart)}const w=_n();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ys(w.index),B0(a[1],w,0,w.directiveStart,w.directiveEnd,s),m_(s,_)),_}(et,this.componentDef,me,U,[Kt]),Og(Z,me,null)}finally{vo()}return new fh(this.componentType,ke,_a(Be,me),me,Be)}}class fh extends class ub{}{constructor(s,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new DC(d),this.componentType=s}get injector(){return new Oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class kc{}class qv{}const ss=new Map;class km extends kc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hb(this);const l=fn(s);this._bootstrapComponents=p(l.bootstrap),this._r3Injector=X0(s,a,[{provide:kc,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ua.THROW_IF_NOT_FOUND,l=ut.Default){return s===ua||s===kc||s===Mf?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class dl extends qv{constructor(s){super(),this.moduleType=s,null!==fn(s)&&function Om(i){const s=new Set;!function a(l){const d=fn(l,!0),f=d.id;null!==f&&(function Fc(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(f,ss.get(f),l),ss.set(f,l));const _=p(d.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new km(this.moduleType,s)}}function Wv(i,s,a,l){return Yv(be(),hr(),i,s,a,l)}function Yv(i,s,a,l,d,f){const _=s+a;return ni(i,_,d)?function ha(i,s,a){return i[s]=a}(i,_+1,f?l.call(f,d):l(d)):function ph(i,s){const a=i[s];return a===xt?void 0:a}(i,_+1)}function Lc(i,s){const a=Vt();let l;const d=i+20;a.firstCreatePass?(l=function Vc(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=zr(l.type)),_=Wn(bc);try{const w=pi(!1),b=f();return pi(w),function V_(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,be(),d,b),b}finally{Wn(_)}}function Jv(i,s,a){const l=i+20,d=be(),f=function Mi(i,s){return i[s]}(d,l);return function mh(i,s){return i[1].data[s].pure}(d,l)?Yv(d,hr(),s,f.transform,a,f):f.transform(a)}function Xv(i){return s=>{setTimeout(i,void 0,s)}}const va=class hp extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,f,_;let w=s,b=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),b=null===(f=k.error)||void 0===f?void 0:f.bind(k),T=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(b=Xv(b),w&&(w=Xv(w)),T&&(T=Xv(T)));const M=super.subscribe({next:w,error:b,complete:T});return s instanceof Y.w0&&s.add(M),M}};function Er(){return this._results[Qd()]()}class yh{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Qd(),l=yh.prototype;l[a]||(l[a]=Er)}get changes(){return this._changes||(this._changes=new va)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Mr(s);(this._changesDetected=!function $l(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=s[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let hl=(()=>{class i{}return i.__NG_ELEMENT_ID__=RC,i})();const NC=hl,eE=class extends NC{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Df(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Og(a,l,s),new lp(l)}};function RC(){return fp(_n(),be())}function fp(i,s){return 4&i.type?new eE(s,i,_a(i,s)):null}let pp=(()=>{class i{}return i.__NG_ELEMENT_ID__=gp,i})();function gp(){return _h(_n(),be())}const Bc=pp,tE=class extends Bc{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Oi(this._hostTNode,this._hostLView)}get parentInjector(){const s=gi(this._hostTNode,this._hostLView);if(_d(s)){const a=Ni(s,this._hostLView),l=gn(s);return new Oi(a[1].data[l+8],a)}return new Oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=nE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,f){const _=s&&!function Jo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,f=k.ngModuleRef}const b=_?s:new Gv(Wt(s)),T=l||this.parentInjector;if(!f&&null==b.ngModule){const U=(_?T:this.parentInjector).get(kc,null);U&&(f=U)}const M=b.create(T,d,void 0,f);return this.insert(M.hostView,w),M}insert(s,a){const l=s._lView,d=l[1];if(function Iu(i){return di(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=l[3],U=new tE(k,k[6],k[3]);U.detach(U.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function qy(i,s,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=s),l<f-10?(s[4]=a[d],Hl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function jd(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,_,f);const w=Jy(f,_),b=l[11],T=Wa(b,_[7]);return null!==T&&function yf(i,s,a,l,d,f){l[0]=d,l[6]=s,wg(i,l,a,1,d,f)}(d,_[6],b,l,T,w),s.attachToViewContainerRef(),Hl(Fm(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=nE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=zy(this._lContainer,a);l&&(ws(Fm(this._lContainer),a),Wy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=zy(this._lContainer,a);return l&&null!=ws(Fm(this._lContainer),a)?new lp(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function nE(i){return i[8]}function Fm(i){return i[8]||(i[8]=[])}function _h(i,s){let a;const l=s[i.index];if(di(l))a=l;else{let d;if(8&i.type)d=un(l);else{const f=s[11];d=f.createComment("");const _=Cr(i,s);Is(f,Wa(f,_),d,function rD(i,s){return mn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=$0(l,s,d,i),Kd(s,a)}return new tE(a,i,s)}class Yt{constructor(s){this.queryList=s,this.matches=null}clone(){return new Yt(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new Lm(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==mp(s,a).matches&&this.queries[a].setDirty()}}class iE{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Ea{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Ea(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class qn{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new qn(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,a,Vm(a,f)),this.matchTNodeWithReadOption(s,a,Ko(a,s,f,!1,!1))}else l===hl?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ko(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ch||d===pp||d===hl&&4&a.type)this.addMatch(a.index,-2);else{const f=Ko(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Vm(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Nn(i,s,a,l){return-1===a?function ai(i,s){return 11&i.type?_a(i,s):4&i.type?fp(i,s):null}(s,i):-2===a?function bb(i,s,a){return a===ch?_a(s,i):a===hl?fp(s,i):a===pp?_h(s,i):void 0}(i,s,l):Ri(i,i[1],a,s)}function jc(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const T=_[b];w.push(T<0?null:Nn(s,f[T],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function sE(i,s,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=jc(i,s,d,a);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)l.push(_[w/2]);else{const T=f[w+1],M=s[-b];for(let k=10;k<M.length;k++){const U=M[k];U[17]===U[3]&&sE(U[1],U,T,l)}if(null!==M[9]){const k=M[9];for(let U=0;U<k.length;U++){const Z=k[U];sE(Z[1],Z,T,l)}}}}}return l}function Ts(i){const s=be(),a=Vt(),l=Nl();Rl(l+1);const d=mp(a,l);if(i.dirty&&Gs(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?sE(a,s,l,[]):jc(a,s,d,l);i.reset(f,wC),i.notifyOnChanges()}return!0}return!1}function Um(i,s,a,l){const d=Vt();if(d.firstCreatePass){const f=_n();(function dn(i,s,a){null===i.queries&&(i.queries=new Ea),i.queries.track(new qn(s,a))})(d,new iE(s,a,l),f.index),function FC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Ib(i,s,a){const l=new yh(4==(4&a));Vg(i,s,l,l.destroy),null===s[19]&&(s[19]=new Lm),s[19].queries.push(new Yt(l))}(d,be(),a)}function vh(){return function kC(i,s){return i[19].queries[s].queryList}(be(),Nl())}function mp(i,s){return i.queries.getByIndex(s)}function qm(...i){}const Ub=new An("Application Initializer");let gE=(()=>{class i{constructor(a){this.appInits=a,this.resolve=qm,this.reject=qm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(ev(f))a.push(f);else if(bw(f)){const _=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ze(Ub,8))},i.\u0275prov=sn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Bb=new An("AppId",{providedIn:"root",factory:function jb(){return`${mE()}${mE()}${mE()}`}});function mE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $b=new An("Platform Initializer"),Hb=new An("Platform ID"),Gb=new An("appBootstrapListener");let qb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();const yE=new An("LocaleId",{providedIn:"root",factory:()=>Rt(yE,ut.Optional|ut.SkipSelf)||function zb(){return"undefined"!=typeof $localize&&$localize.locale||Jf}()}),Wb=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Po{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let qC=(()=>{class i{compileModuleSync(a){return new dl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=p(fn(a).declarations).reduce((_,w)=>{const b=Wt(w);return b&&_.push(new Gv(b)),_},[]);return new Po(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=sn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zC=(()=>Promise.resolve(0))();function ou(i){"undefined"==typeof Zone?zC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class As{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new va(!1),this.onMicrotaskEmpty=new va(!1),this.onStable=new va(!1),this.onError=new va(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Kb(){let i=Ht.requestAnimationFrame,s=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function EE(i){const s=()=>{!function vE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ht,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,bp(i),i.isCheckStableRunning=!0,wr(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),bp(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,w)=>{try{return au(i),a.invokeTask(d,f,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),wE(i)}},onInvoke:(a,l,d,f,_,w,b)=>{try{return au(i),a.invoke(d,f,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),wE(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,bp(i),wr(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!As.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(As.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,Zb,qm,qm);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Zb={};function wr(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function bp(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function au(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function wE(i){i._nesting--,wr(i)}class WC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new va,this.onMicrotaskEmpty=new va,this.onStable=new va,this.onError=new va}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let bE=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{As.assertNotInAngularZone(),ou(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ou(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ze(As))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})(),Ip=(()=>{class i{constructor(){this._applications=new Map,pl.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return pl.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();class Hc{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Gc(i){pl=i}let ji,pl=new Hc;const DE=new An("AllowMultipleToken");class KC{constructor(s,a){this.name=s,this.token=a}}function CE(i,s,a=[]){const l=`Platform: ${s}`,d=new An(l);return(f=[])=>{let _=qc();if(!_||_.injector.get(DE,!1))if(i)i(a.concat(f).concat({provide:d,useValue:!0}));else{const w=a.concat(f).concat({provide:d,useValue:!0},{provide:Wg,useValue:"platform"});!function Jb(i){if(ji&&!ji.destroyed&&!ji.injector.get(DE,!1))throw new Re(400,"");ji=i.get(Xb);const s=i.get($b,null);s&&s.forEach(a=>a())}(ua.create({providers:w,name:l}))}return function TE(i){const s=qc();if(!s)throw new Re(401,"");return s}()}}function qc(){return ji&&!ji.destroyed?ji:null}let Xb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function eI(i,s){let a;return a="noop"===i?new WC:("zone.js"===i?void 0:i)||new As({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:As,useValue:w}];return w.run(()=>{const T=ua.create({providers:b,parent:this.injector,name:a.moduleType.name}),M=a.create(T),k=M.injector.get(Nr,null);if(!k)throw new Re(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Z=>{k.handleError(Z)}});M.onDestroy(()=>{Ih(this._modules,M),U.unsubscribe()})}),function ZC(i,s,a){try{const l=a();return ev(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const U=M.injector.get(gE);return U.runInitializers(),U.donePromise.then(()=>(function Kw(i){at(i,"Expected localeId to be defined"),"string"==typeof i&&(Mv=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(yE,Jf)||Jf),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=tI({},l);return function Yb(i,s,a){const l=new dl(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(AE);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ze(ua))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();function tI(i,s){return Array.isArray(s)?s.reduce(tI,i):Object.assign(Object.assign({},i),s)}let AE=(()=>{class i{constructor(a,l,d,f,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new O.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{As.assertNotInAngularZone(),ou(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{As.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(w,b.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let d;d=a instanceof oi?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function IE(i){return i.isBoundToModule}(d)?void 0:this._injector.get(kc),w=d.create(ua.NULL,[],l||d.selector,f),b=w.location.nativeElement,T=w.injector.get(bE,null),M=T&&w.injector.get(Ip);return T&&M&&M.registerApplication(b,T),w.onDestroy(()=>{this.detachView(w.hostView),Ih(this.components,w),M&&M.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Ih(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Gb,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ze(As),Ze(ua),Ze(Nr),Ze(iu),Ze(gE))},i.\u0275prov=sn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ih(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let SE=!0,nI=!1;function YC(){return nI=!0,SE}function ME(){if(nI)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let Dp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Wm,i})();function Wm(i){return function Km(i,s,a){if(Us(i)&&!a){const l=Tr(i.index,s);return new lp(l,l)}return 47&i.type?new lp(s[16],s):null}(_n(),be(),16==(16&i))}class PE{constructor(){}supports(s){return Xu(s)}create(s){return new eT(s)}}const XC=(i,s)=>s;class eT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||XC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<kE(l,d,f)?a:l,w=kE(_,d,f),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const T=w-d,M=b-d;if(T!=M){for(let U=0;U<T;U++){const Z=U<f.length?f[U]:f[U]=0,me=Z+U;M<=me&&me<T&&(f[U]=Z+1)}f[_.previousIndex]=M-T}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Xu(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],_=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,w),l=!0),a=a._next}else d=0,function el(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Qd()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new oI(a,l),f,d),s}_verifyReinsertion(s,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ch),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ch),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class oI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yc{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ch{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Yc,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kE(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class FE{constructor(){}supports(s){return s instanceof Map||P_(s)}create(){return new tT}}class tT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||P_(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new aI(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class aI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jm(){return new Tp([new PE])}let Tp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Jm()),deps:[[i,new Co,new _i]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=sn({token:i,providedIn:"root",factory:Jm}),i})();function Ap(){return new Sp([new FE])}let Sp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ap()),deps:[[i,new Co,new _i]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=sn({token:i,providedIn:"root",factory:Ap}),i})();const uI=CE(null,"core",[{provide:Hb,useValue:"unknown"},{provide:Xb,deps:[ua]},{provide:Ip,deps:[]},{provide:qb,deps:[]}]);let VE=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ze(AE))},i.\u0275mod=Q({type:i}),i.\u0275inj=Xt({}),i})()},3942:(ot,Te,P)=>{P.d(Te,{Z:()=>Re});var m=P(2090),Y=P(4859),O=P(9681),ae=P(1877);class X{constructor(he,we){this._delegate=he,this.firebase=we,(0,O._addComponent)(he,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,we=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(he);return!We.isInitialized()&&"EXPLICIT"===(null===(Xe=We.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&We.initialize(),We.getImmediate({identifier:we})}_removeServiceInstance(he,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(we)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const Le=function de(Le){const he={},we={__esModule:!0,initializeApp:function De($e,te={}){const W=O.initializeApp($e,te);if((0,m.r3)(he,W.name))return he[W.name];const ne=new Le(W,we);return he[W.name]=ne,ne},app:We,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee($e){const te=$e.name,W=te.replace("-compat","");if(O._registerComponent($e)&&"PUBLIC"===$e.type){const ne=(ge=We())=>{if("function"!=typeof ge[W])throw re.create("invalid-app-argument",{appName:te});return ge[W]()};void 0!==$e.serviceProps&&(0,m.ZB)(ne,$e.serviceProps),we[W]=ne,Le.prototype[W]=function(...ge){return this._getService.bind(this,te).apply(this,$e.multipleInstances?ge:[])}}return"PUBLIC"===$e.type?we[W]:null},removeApp:function Xe($e){delete he[$e]},useAsService:function He($e,te){return"serverAuth"===te?null:te},modularAPIs:O}};function We($e){if(!(0,m.r3)(he,$e=$e||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:$e});return he[$e]}return we.default=we,Object.defineProperty(we,"apps",{get:function _e(){return Object.keys(he).map($e=>he[$e])}}),We.App=Le,we}(X);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(we){(0,m.ZB)(Le,we)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Le}(),$=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=j;!function Ae(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Le)}()},9681:(ot,Te,P)=>{P.r(Te),P.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Ti,_apps:()=>pt,_clearComponents:()=>qt,_components:()=>ln,_getProvider:()=>as,_registerComponent:()=>sn,_removeServiceInstance:()=>Xt,deleteApp:()=>ls,getApp:()=>Lr,getApps:()=>us,initializeApp:()=>Hi,onLog:()=>Xn,registerVersion:()=>Gr,setLogLevel:()=>Wn});var m=P(5861),Y=P(4859),O=P(1877),ae=P(2090);class X{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function pe(Ke){const Ce=Ke.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Ye)){const dt=Ye.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(Ye=>Ye).join(" ")}}const re="@firebase/app",ue=new O.Yd("@firebase/app"),Rn="[DEFAULT]",at={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pt=new Map,ln=new Map;function cn(Ke,Ce){try{Ke.container.addComponent(Ce)}catch(Ye){ue.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ke.name}`,Ye)}}function Ti(Ke,Ce){Ke.container.addOrOverwriteComponent(Ce)}function sn(Ke){const Ce=Ke.name;if(ln.has(Ce))return ue.debug(`There were multiple attempts to register component ${Ce}.`),!1;ln.set(Ce,Ke);for(const Ye of pt.values())cn(Ye,Ke);return!0}function as(Ke,Ce){const Ye=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),Ke.container.getProvider(Ce)}function Xt(Ke,Ce,Ye=Rn){as(Ke,Ce).clearInstance(Ye)}function qt(){ln.clear()}const ui=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Os{constructor(Ce,Ye,dt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}const Fr="9.6.10";function Hi(Ke,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Ye=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},Ce),dt=Ye.name;if("string"!=typeof dt||!dt)throw ui.create("bad-app-name",{appName:String(dt)});const jt=pt.get(dt);if(jt){if((0,ae.vZ)(Ke,jt.options)&&(0,ae.vZ)(Ye,jt.config))return jt;throw ui.create("duplicate-app",{appName:dt})}const Lt=new Y.H0(dt);for(const L of ln.values())Lt.addComponent(L);const B=new Os(Ke,Ye,Lt);return pt.set(dt,B),B}function Lr(Ke=Rn){const Ce=pt.get(Ke);if(!Ce)throw ui.create("no-app",{appName:Ke});return Ce}function us(){return Array.from(pt.values())}function ls(Ke){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(Ke){const Ce=Ke.name;pt.has(Ce)&&(pt.delete(Ce),yield Promise.all(Ke.container.getProviders().map(Ye=>Ye.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function Gr(Ke,Ce,Ye){var dt;let jt=null!==(dt=at[Ke])&&void 0!==dt?dt:Ke;Ye&&(jt+=`-${Ye}`);const Lt=jt.match(/\s|\//),B=Ce.match(/\s|\//);if(Lt||B){const L=[`Unable to register library "${jt}" with version "${Ce}":`];return Lt&&L.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),Lt&&B&&L.push("and"),B&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}sn(new Y.wA(`${jt}-version`,()=>({library:jt,version:Ce}),"VERSION"))}function Xn(Ke,Ce){if(null!==Ke&&"function"!=typeof Ke)throw ui.create("invalid-log-argument");(0,O.Am)(Ke,Ce)}function Wn(Ke){(0,O.Ub)(Ke)}const yn="firebase-heartbeat-store";let er=null;function Ps(){return er||(er=(0,ae.X3)("firebase-heartbeat-database",1,(Ke,Ce)=>{0===Ce&&Ke.createObjectStore(yn)}).catch(Ke=>{throw ui.create("storage-open",{originalErrorMessage:Ke.message})})),er}function zt(){return(zt=(0,m.Z)(function*(Ke){try{return(yield Ps()).transaction(yn).objectStore(yn).get(ur(Ke))}catch(Ce){throw ui.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function rt(Ke,Ce){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(Ke,Ce){try{const dt=(yield Ps()).transaction(yn,"readwrite");return yield dt.objectStore(yn).put(Ce,ur(Ke)),dt.complete}catch(Ye){throw ui.create("storage-set",{originalErrorMessage:Ye.message})}})).apply(this,arguments)}function ur(Ke){return`${Ke.name}!${Ke.options.appId}`}class lo{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new ct(Ye),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var Ce=this;return(0,m.Z)(function*(){const dt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=br();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Ce._heartbeatsCache.heartbeats.some(Lt=>Lt.date===jt))return Ce._heartbeatsCache.heartbeats.push({date:jt,agent:dt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Lt=>{const B=new Date(Lt.date).valueOf();return Date.now()-B<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,m.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Ye=br(),{heartbeatsToSend:dt,unsentEntries:jt}=function lr(Ke,Ce=1024){const Ye=[];let dt=Ke.slice();for(const jt of Ke){const Lt=Ye.find(B=>B.agent===jt.agent);if(Lt){if(Lt.dates.push(jt.date),Ir(Ye)>Ce){Lt.dates.pop();break}}else if(Ye.push({agent:jt.agent,dates:[jt.date]}),Ir(Ye)>Ce){Ye.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:dt}}(Ce._heartbeatsCache.heartbeats),Lt=(0,ae.L)(JSON.stringify({version:2,heartbeats:dt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Ye,jt.length>0?(Ce._heartbeatsCache.heartbeats=jt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Lt})()}}function br(){return(new Date).toISOString().substring(0,10)}class ct{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,m.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Aa(Ke){return zt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Ye=this;return(0,m.Z)(function*(){var dt;if(yield Ye._canUseIndexedDBPromise){const Lt=yield Ye.read();return rt(Ye.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:Lt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Ye=this;return(0,m.Z)(function*(){var dt;if(yield Ye._canUseIndexedDBPromise){const Lt=yield Ye.read();return rt(Ye.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Ce.heartbeats]})}})()}}function Ir(Ke){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function Bt(Ke){sn(new Y.wA("platform-logger",Ce=>new X(Ce),"PRIVATE")),sn(new Y.wA("heartbeat",Ce=>new lo(Ce),"PRIVATE")),Gr(re,"0.7.20",Ke),Gr(re,"0.7.20","esm2017"),Gr("fire-js","")}("")},4859:(ot,Te,P)=>{P.d(Te,{wA:()=>O,H0:()=>de});var m=P(5861),Y=P(2090);class O{constructor(j,$,J){this.name=j,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ae="[DEFAULT]";class X{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const J=new Y.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:$});Ge&&J.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const J=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Ge=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ae){if(Ge)return null;throw Ae}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function re(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ae})}catch($){}for(const[$,J]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ge});J.resolve(Ae)}catch(Ae){}}}}clearInstance(j=ae){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ae){return this.instances.has(j)}getOptions(j=ae){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,J=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[Ae,Re]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ae)&&Re.resolve(Ge);return Ge}onInit(j,$){var J;const Ge=this.normalizeInstanceIdentifier($),Ae=null!==(J=this.onInitCallbacks.get(Ge))&&void 0!==J?J:new Set;Ae.add(j),this.onInitCallbacks.set(Ge,Ae);const Re=this.instances.get(Ge);return Re&&j(Re,Ge),()=>{Ae.delete(j)}}invokeOnInitCallbacks(j,$){const J=this.onInitCallbacks.get($);if(J)for(const Ge of J)try{Ge(j,$)}catch(Ae){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let J=this.instances.get(j);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===ae?void 0:ue),options:$}),this.instances.set(j,J),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(J,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,J)}catch(Ge){}var ue;return J||null}normalizeInstanceIdentifier(j=ae){return this.component?this.component.multipleInstances?j:ae:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new X(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Te,P)=>{P.d(Te,{in:()=>Y,Yd:()=>re,Ub:()=>de,Am:()=>ue});const m=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ae=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},pe=(j,$,...J)=>{if($<j.logLevel)return;const Ge=(new Date).toISOString(),Ae=X[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${Ge}]  ${j.name}:`,...J)};class re{constructor($){this.name=$,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function de(j){m.forEach($=>{$.setLogLevel(j)})}function ue(j,$){for(const J of m){let Ge=null;$&&$.level&&(Ge=O[$.level]),J.userLogHandler=null===j?null:(Ae,Re,...Le)=>{const he=Le.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(Xe){return null}}).filter(we=>we).join(" ");Re>=(null!=Ge?Ge:Ae.logLevel)&&j({level:Y[Re].toLowerCase(),message:he,args:Le,type:Ae.name})}}}},5861:(ot,Te,P)=>{function m(O,ae,X,pe,re,de,ue){try{var j=O[de](ue),$=j.value}catch(J){return void X(J)}j.done?ae($):Promise.resolve($).then(pe,re)}function Y(O){return function(){var ae=this,X=arguments;return new Promise(function(pe,re){var de=O.apply(ae,X);function ue($){m(de,pe,re,ue,j,"next",$)}function j($){m(de,pe,re,ue,j,"throw",$)}ue(void 0)})}}P.d(Te,{Z:()=>Y})}},ot=>{ot(ot.s=8032)}]);